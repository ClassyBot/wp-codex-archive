<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<a href="https://codex.wordpress.org/Creating_Tables_with_Plugins" title="Creating Tables with Plugins">English</a> • 
<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/Creating">Tables with Plugins 日本語</a> 
<strong class="selflink">Русский</strong> • 

 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div style="background-color:#FAEBD7; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">Эта страница <a href="https://codex.wordpress.org/Category:Stubs" title="Category:Stubs">помечена</a> как незавершённая. Вы можете <a href="https://codex.wordpress.org/Codex:Contributing" title="Codex:Contributing">помочь</a> проекту, <b><a rel="nofollow" class="external text" href="https://codex.wordpress.org/index.php?title=%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D1%8B:_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86_%D0%91%D0%94&amp;action=edit">дополнив её</a></b>.</div>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86_.D0.B2_.D0.B1.D0.B0.D0.B7.D0.B5_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"><span class="tocnumber">1</span> <span class="toctext">Создание таблиц в базе данных</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#.D0.9F.D1.80.D0.B5.D1.84.D0.B8.D0.BA.D1.81_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86_.D0.B2_.D0.B1.D0.B0.D0.B7.D0.B5_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"><span class="tocnumber">1.1</span> <span class="toctext">Префикс таблиц в базе данных</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#.D0.A2.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D0.B0_.D1.83.D0.B6.D0.B5_.D1.81.D1.83.D1.89.D0.B5.D1.81.D1.82.D0.B2.D1.83.D0.B5.D1.82.3F"><span class="tocnumber">1.2</span> <span class="toctext">Таблица уже существует?</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#.D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B8.D0.BB.D0.B8_.D0.9E.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D1.8B"><span class="tocnumber">1.3</span> <span class="toctext">Создание или Обновление таблицы</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#.D0.94.D0.BE.D0.B1.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.98.D1.81.D1.85.D0.BE.D0.B4.D0.BD.D1.8B.D1.85_.D0.94.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"><span class="tocnumber">1.4</span> <span class="toctext">Добавление Исходных Данных</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#.D0.92.D0.B5.D1.80.D1.81.D0.B8.D1.8F"><span class="tocnumber">1.5</span> <span class="toctext">Версия</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#.D0.A4.D1.83.D0.BD.D0.BA.D1.86.D0.B8.D1.8F_.D0.B2_.D1.86.D0.B5.D0.BB.D0.BE.D0.BC"><span class="tocnumber">1.6</span> <span class="toctext">Функция в целом</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#.D0.92.D1.8B.D0.B7.D0.BE.D0.B2_.D1.84.D1.83.D0.BD.D0.BA.D1.86.D0.B8.D0.B8"><span class="tocnumber">2</span> <span class="toctext">Вызов функции</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#.D0.94.D0.BE.D0.B1.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.A4.D1.83.D0.BD.D0.BA.D1.86.D0.B8.D0.B8_.D0.9E.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F"><span class="tocnumber">3</span> <span class="toctext">Добавление Функции Обновления</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#.D0.A0.D0.B5.D1.81.D1.83.D1.80.D1.81.D1.8B"><span class="tocnumber">4</span> <span class="toctext">Ресурсы</span></a></li>
</ul>
</div>

<p>Если вы <a href="https://codex.wordpress.org/%D0%9D%D0%B0%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BF%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D0%B0" title="Написание плагина">создаете плагины</a> для WordPress, то наверняка вы сталкивались с необходимостью сохранить некоторые данные в базе данных WordPress. Существуют два типа данных, доступных для сохранения:
</p>
<ul><li> <b>Установочная информация</b> -- опции пользователя. Они вводятся пользователем когда он (она) задает установки плагина во время первого пользования, и впоследствии больше не увеличиваются в размерах; например, в плагине, связанного с тегами, опции пользователя в отношении формата собрания тегов в боковой колонке. <br /> Установочная информация обычно сохраняется с использованием <a href="https://codex.wordpress.org/Writing_a_Plugin#Saving_Plugin_Data_to_the_Database" title="Writing a Plugin">WordPress <i>options</i> mechanism</a>.</li>
<li> <b>Данные</b> -- информация которая добавляется пользователем по мере использования вашего плагина, обычно являющаяся расширенной информацией связанной с записями, категориями, загрузками и другими компонентами WordPress(например: плагины статистики, различные виды страниц, ссылки, и другие статистические данные связанные с каждой записью на вашем сайте).</li></ul>
<p>Данные могут хранится в отдельной созданной MySQL таблице.  Перед созданием совершенно новой таблицы, рассмотрите возможность сохранения данных Вашего плагина в <a href="https://codex.wordpress.org/Writing_a_Plugin#Saving_Plugin_Data_to_the_Database" title="Writing a Plugin">WordPress' Post Meta</a> (ранее Поля, созданные пользователем).  Post Meta - это предпочитаемый метод, пользуйтесь им когда это возможно или практично.
</p><p>This article describes how to have your plugin automatically create a MySQL table to store its data.  Note that as an alternative to following the steps here, you could have the plugin user run an install script when they install your plugin. Another approach would be to have the user execute an SQL query on their own, using something like <a href="https://codex.wordpress.org/phpMyAdmin" title="phpMyAdmin">phpMyAdmin</a>. But neither of those options is very satisfactory, since a user could easily forget to run the install script or screw up the query (and they might not have phpMyAdmin available). 
</p><p>Мы рекомендуем следовать следующим шагам для автоматического создание вашим плагином таблицы в безе данных:
</p>
<ol><li> Напишите PHP функцию , которая создаст таблицы.</li>
<li> Убедитесь в том, что WordPress вызывает эту функцию , при установке плагина.</li>
<li> Создайте функцию обновления , если новая версия вашего плагина использует другую структуру таблиц БД.</li></ol>
<h2><span class="mw-headline" id=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86_.D0.B2_.D0.B1.D0.B0.D0.B7.D0.B5_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85">Создание таблиц в базе данных</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D1%8B:_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86_%D0%91%D0%94&amp;action=edit&amp;section=1" title="Edit section: Создание таблиц в базе данных">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Первым шагом в автоматическом создании таблицы в базе данных вашим плагином, является создание функции PHP (в вашем плагине) , которая добавит таблицу или таблицы в базу данных WordPress (в этой статье будем будем использовать <tt>jal_install</tt> для обозначения этой функции).
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B5.D1.84.D0.B8.D0.BA.D1.81_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86_.D0.B2_.D0.B1.D0.B0.D0.B7.D0.B5_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85">Префикс таблиц в базе данных</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D1%8B:_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86_%D0%91%D0%94&amp;action=edit&amp;section=2" title="Edit section: Префикс таблиц в базе данных">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>В файле <tt>wp-config.php</tt>, владелец сайта на WordPress может определить префикс таблиц в базе данных. По умолчанию, префикс имеет вид "wp_", но Вам следует проверить актуальное значение и использовать его для определения имени Вашей таблицы. Это значение, вы узнаете из переменной <tt>$wpdb-&gt;prefix</tt>. (Если вы программируете для версий, ранних чем Wordpress 2.0, вы должны использовать глобальную переменную <tt>$table_prefix</tt>, которая является устаревшей для версий поздних 2.1). 
</p><p>К примеру, вы хотите создать таблицу с именем <tt>(prefix)liveshoutbox</tt>, тогда первые несколько строк вашей функции, которая создает таблицу, должны быть такими:
</p>
<pre>
function jal_install () {
   global $wpdb;

   $table_name = $wpdb-&gt;prefix . "liveshoutbox";
</pre>
<h3><span class="mw-headline" id=".D0.A2.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D0.B0_.D1.83.D0.B6.D0.B5_.D1.81.D1.83.D1.89.D0.B5.D1.81.D1.82.D0.B2.D1.83.D0.B5.D1.82.3F">Таблица уже существует?</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D1%8B:_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86_%D0%91%D0%94&amp;action=edit&amp;section=3" title="Edit section: Таблица уже существует?">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Убеждаемся в том, что созданная нами таблица успешно добавлена в базу данных. Выполняя проверку по <tt>if</tt> и SQL-запросу <tt>SHOW TABLES</tt>, просматриваем таблицы и ищем, в результате выдачи запроса, имя нашей таблицы:
</p>
<pre>
    if($wpdb-&gt;get_var("SHOW TABLES LIKE '$table_name'")&#160;!= $table_name) {
</pre>
<h3><span class="mw-headline" id=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B8.D0.BB.D0.B8_.D0.9E.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D1.8B">Создание или Обновление таблицы</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D1%8B:_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86_%D0%91%D0%94&amp;action=edit&amp;section=4" title="Edit section: Создание или Обновление таблицы">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Следующий шаг - фактическое создание таблицы. Вместо того, чтобы напрямую делать SQL запрос, мы будем использовать функцию <tt>dbDelta</tt> из файла <tt>wp-admin/includes/upgrade.php</tt> (необходимо загрузить этот файл, так как он не подгружается по умолчанию). Функция <tt>dbDelta</tt> проверяет существующую структуру таблиц в БД, сравнивает ее с необходимой плагину структурой и, если это необходимо, вносит изменения в таблицы, (для примеров использования функции <tt>dbDelta</tt> смотри файл <tt>wp-admin/upgrade-schema.php</tt>). 
Необходимо заметить, что функция <tt>dbDelta</tt> "придирчива" к формату входных данных. Например:
</p>
<ul><li> В выражении SQL необходимо писать каждое поле в отдельной строке.</li>
<li> Необходимы два пробела между словами PRIMARY KEY и определением primary key.</li>
<li> Необходимо использовать ключевое слово KEY , а не его синоним INDEX . Так же, необходимо обозначить как минимум один KEY.</li></ul>
<p>Ниже представлен пример правильного формата SQL выражения, которое создает или обновляет таблицу. Все что вам надо сделать, это изменить структуру таблицы на необходимую вам (значение переменной <tt>$sql</tt>):
</p>
<pre>
$sql = "CREATE TABLE " . $table_name . " (
	  id mediumint(9) NOT NULL AUTO_INCREMENT,
	  time bigint(11) DEFAULT '0' NOT NULL,
	  name tinytext NOT NULL,
	  text text NOT NULL,
	  url VARCHAR(55) NOT NULL,
	  UNIQUE KEY id (id)
	);";

require_once(ABSPATH . 'wp-admin/includes/upgrade.php');
dbDelta($sql);
</pre>
<h3><span class="mw-headline" id=".D0.94.D0.BE.D0.B1.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.98.D1.81.D1.85.D0.BE.D0.B4.D0.BD.D1.8B.D1.85_.D0.94.D0.B0.D0.BD.D0.BD.D1.8B.D1.85">Добавление Исходных Данных</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D1%8B:_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86_%D0%91%D0%94&amp;action=edit&amp;section=5" title="Edit section: Добавление Исходных Данных">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Теперь Вам может потребоваться добавить данные в только что созданную таблицу. Сделать это можно так:
</p>
<pre>
  $welcome_name = "Mr. Wordpress";
  $welcome_text = "Поздравляю, установка прошла успешно!";

  $rows_affected = $wpdb-&gt;insert( $table_name, array( 'time' =&gt; current_time('mysql'), 'name' =&gt; $welcome_name, 'text' =&gt; $welcome_text ) );
</pre>
<p><b>ВНИМАНИЕ:</b> Даже если Вы сами определили переменные <tt>$welcome_name</tt> и <tt>$welcome_text</tt> в этой функции и знаете что они не содержат специальных SQL символов, хорошим тоном будет всегда обрабатывать переменную функцией <tt>$wpdb-&gt;escape</tt> перед передачей её в базу данных для предотвращения проблем безопасности и случайных ошибок. Вы можете использовать функцию <tt>$wpdb-&gt;prepare</tt> function syntax, или в данном случае, мы используем <tt>$wpdb-&gt;insert</tt>. <strong>Подробнее об использовании WPDB, смотрите <a href="https://codex.wordpress.org/Function_Reference/wpdb_Class" title="Function Reference/wpdb Class" class="mw-redirect">Function_Reference/wpdb_Class</a>.</strong>
</p>
<h3><span class="mw-headline" id=".D0.92.D0.B5.D1.80.D1.81.D0.B8.D1.8F">Версия</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D1%8B:_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86_%D0%91%D0%94&amp;action=edit&amp;section=6" title="Edit section: Версия">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Другой замечательной идеей будет добавление опции записи версии структуры Вашей таблицы данных, так же Вы можете использовать эту информацию позже, если понадобится обновить таблицу:
</p>
<pre>
add_option("jal_db_version", "1.0");
</pre>
<h3><span class="mw-headline" id=".D0.A4.D1.83.D0.BD.D0.BA.D1.86.D0.B8.D1.8F_.D0.B2_.D1.86.D0.B5.D0.BB.D0.BE.D0.BC">Функция в целом</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D1%8B:_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86_%D0%91%D0%94&amp;action=edit&amp;section=7" title="Edit section: Функция в целом">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Эта функция завершена. Давайте посмотрим как она выглядит в целом. Обратите внимание, что номер версии теперь хранится в глобальной переменной.
</p>
<pre>

global $jal_db_version;
$jal_db_version = "1.0";

function jal_install () {
   global $wpdb;
   global $jal_db_version;

   $table_name = $wpdb-&gt;prefix . "liveshoutbox";
   if($wpdb-&gt;get_var("show tables like '$table_name'")&#160;!= $table_name) {
      
      $sql = "CREATE TABLE " . $table_name . " (
	  id mediumint(9) NOT NULL AUTO_INCREMENT,
	  time bigint(11) DEFAULT '0' NOT NULL,
	  name tinytext NOT NULL,
	  text text NOT NULL,
	  url VARCHAR(55) NOT NULL,
	  UNIQUE KEY id (id)
	);";

      require_once(ABSPATH . 'wp-admin/includes/upgrade.php');
      dbDelta($sql);

      $rows_affected = $wpdb-&gt;insert( $table_name, array( 'time' =&gt; current_time('mysql'), 'name' =&gt; $welcome_name, 'text' =&gt; $welcome_text ) );
 
      add_option("jal_db_version", $jal_db_version);

   }
}
</pre>
<h2><span class="mw-headline" id=".D0.92.D1.8B.D0.B7.D0.BE.D0.B2_.D1.84.D1.83.D0.BD.D0.BA.D1.86.D0.B8.D0.B8">Вызов функции</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D1%8B:_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86_%D0%91%D0%94&amp;action=edit&amp;section=8" title="Edit section: Вызов функции">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Теперь когда мы инициализировали определение функции, мы хотим убедиться, что WordPress вызывает функцию когда плагин активируется администратором WordPress. Чтобы сделать это мы воспользуемся хуком действия <tt>activate_</tt>. Если файл вашего плагина <tt>wp-content/plugins/plugindir/pluginfile.php</tt>, добавьте следующую строку в тело вашего плагина:
</p>
<pre>
register_activation_hook(__FILE__,'jal_install');
</pre>
<p>Смотрите подробнее в <a href="https://codex.wordpress.org/Function_Reference/register_activation_hook" title="Function Reference/register activation hook">Function_Reference/register_activation_hook</a>.
</p>
<h2><span class="mw-headline" id=".D0.94.D0.BE.D0.B1.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.A4.D1.83.D0.BD.D0.BA.D1.86.D0.B8.D0.B8_.D0.9E.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F">Добавление Функции Обновления</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D1%8B:_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86_%D0%91%D0%94&amp;action=edit&amp;section=9" title="Edit section: Добавление Функции Обновления">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>За время жизни вашего плагина, вы можете обнаружить, что вам нужно изменить структуру базы данных плагина в обновленной версии. Чтобы сделать это, вам понадобится создать код обновления в вашем плагине, который будет определять что была установлена новая версия и обновлять структуру базы данных. Простейший способ сделать это - добавить код в функцию <tt>jal_install</tt> которую мы только что создали.
</p><p>Обратите внимание, что вы должны убедится в том, что функция вызывается. Так же оповестите пользователей вашего плагина, что они должны деактивировать плагин перед установкой новой версии и затем повторно его активировать после.
</p><p>Давайте предположим что функция обновляющая базу данных с версии 1.0 до 1.1 расширяет поле URL до 100 символов вместо 55). Вам понадобится добавить следующие строки в конец вашей функции <tt>jal_install</tt> для проверки версии и обновления если это необходимо:
</p>
<pre>

   $installed_ver = get_option( "jal_db_version" );

   if( $installed_ver&#160;!= $jal_db_version ) {

      $sql = "CREATE TABLE " . $table_name . " (
	  id mediumint(9) NOT NULL AUTO_INCREMENT,
	  time bigint(11) DEFAULT '0' NOT NULL,
	  name tinytext NOT NULL,
	  text text NOT NULL,
	  url VARCHAR(100) NOT NULL,
	  UNIQUE KEY id (id)
	);";

      require_once(ABSPATH . 'wp-admin/includes/upgrade.php');
      dbDelta($sql);

      update_option( "jal_db_version", $jal_db_version );
  }
</pre>
<p>Вам также необходимо изменить глобальную переменную <tt>$jal_db_version</tt> в начале файла, и, естественно, код инициализации созданный выше для использования новой структуры таблицы.
</p>
<h2><span class="mw-headline" id=".D0.A0.D0.B5.D1.81.D1.83.D1.80.D1.81.D1.8B">Ресурсы</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D1%8B:_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86_%D0%91%D0%94&amp;action=edit&amp;section=10" title="Edit section: Ресурсы">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Для получения дополнительной информации по разработке плагинов посетите <a href="https://codex.wordpress.org/Plugin_Resources" title="Plugin Resources">исчерпывающий список ресурсов</a>. Вы также можете найти полезным данный пост из <a href="https://codex.wordpress.org/Mailing_Lists#Hackers" title="Mailing Lists">Списка рассылки wp-hackers</a>&#160;: <a rel="nofollow" class="external text" href="http://lists.automattic.com/pipermail/wp-hackers/2005-May/000940.html">WordPress Hackers Mailing List: Answer to Plugin Requires Additional Tables</a>
</p>
<!-- 
NewPP limit report
Cached time: 20190211004609
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.028 seconds
Real time usage: 0.032 seconds
Preprocessor visited node count: 161/1000000
Preprocessor generated node count: 502/1000000
Post‐expand include size: 2067/2097152 bytes
Template argument size: 710/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    9.379      1 - -total
 59.14%    5.547      1 - Template:Languages
 35.48%    3.328      1 - Template:ru:Stub
 21.83%    2.047      1 - Template:Message
 14.14%    1.326      1 - Template:ja
 13.20%    1.238      1 - Template:ru
 13.15%    1.233      1 - Template:en
-->
