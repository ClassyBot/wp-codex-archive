<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<strong class="selflink">English</strong> • 
<a href="https://codex.wordpress.org/es:API_de_Widget" title="es:API de Widget">Español</a> • 

<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/Widgets_API">日本語</a> 
<a href="https://codex.wordpress.org/zh-cn:%E5%B0%8F%E5%B7%A5%E5%85%B7%E6%8E%A5%E5%8F%A3" title="zh-cn:小工具接口">中文(简体)</a> • 
 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div style="background-color:#EEEEFF; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">This article is <a href="https://codex.wordpress.org/Category:Copyedits" title="Category:Copyedits" class="mw-redirect">marked</a> as in need of editing. You can <a href="https://codex.wordpress.org/Codex:Contributing" title="Codex:Contributing">help</a> Codex by <b><a rel="nofollow" class="external text" href="https://codex.wordpress.org/index.php?title=Widgets_API&amp;action=edit">editing it</a></b>.</div>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Widgets_API"><span class="tocnumber">1</span> <span class="toctext">Widgets API</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Function_Reference"><span class="tocnumber">2</span> <span class="toctext">Function Reference</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Developing_Widgets"><span class="tocnumber">3</span> <span class="toctext">Developing Widgets</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Default_Usage"><span class="tocnumber">3.1</span> <span class="toctext">Default Usage</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Example"><span class="tocnumber">3.2</span> <span class="toctext">Example</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Example_With_Namespaces"><span class="tocnumber">3.3</span> <span class="toctext">Example With Namespaces</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Displaying_Widgets_and_Widget_Areas"><span class="tocnumber">4</span> <span class="toctext">Displaying Widgets and Widget Areas</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Widget_Areas"><span class="tocnumber">4.1</span> <span class="toctext">Widget Areas</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Display_Widget_Area_Only_If_Active"><span class="tocnumber">5</span> <span class="toctext">Display Widget Area Only If Active</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Independent_Widgets"><span class="tocnumber">5.1</span> <span class="toctext">Independent Widgets</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#Resources"><span class="tocnumber">6</span> <span class="toctext">Resources</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#Related"><span class="tocnumber">7</span> <span class="toctext">Related</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Widgets_API">Widgets API</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Widgets_API&amp;action=edit&amp;section=1" title="Edit section: Widgets API">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This page contains the technical documentation for the WordPress Widgets API and is written for developers. If you're not a developer you may want to review the <a href="https://codex.wordpress.org/WordPress_Widgets" title="WordPress Widgets"> Widgets</a> page.
</p><p>In technical terms: a WordPress Widget is a <a rel="nofollow" class="external text" href="http://php.net/manual/en/language.oop5.php">PHP object</a> that echoes string data to <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/Stdout#Standard_output_.28stdout.29">STDOUT</a> when its <tt>widget()</tt> method is called. It's located in <code><a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/tags/5.2.3/src/wp-includes/widgets.php#L0">wp-includes/widgets.php</a></code>.
</p>
<h2><span class="mw-headline" id="Function_Reference">Function Reference</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Widgets_API&amp;action=edit&amp;section=2" title="Edit section: Function Reference">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<table cellspacing="10" width="100%">

<tr valign="top">
<td width="50%">
<table class="widefat">

<tr style="background:#464646; color:#d7d7d7;">
<th> <b>Widget Functions</b>
</th></tr>
<tr>
<td>
<ul><li> <tt><a href="https://codex.wordpress.org/Function_Reference/is_active_widget" title="Function Reference/is active widget"> is_active_widget()</a></tt></li>
<li> <tt><a href="https://codex.wordpress.org/Function_Reference/the_widget" title="Function Reference/the widget"> the_widget()</a></tt></li>
<li> <tt><a href="https://codex.wordpress.org/Function_Reference/register_widget" title="Function Reference/register widget"> register_widget()</a></tt></li>
<li> <tt><a href="https://codex.wordpress.org/Function_Reference/unregister_widget" title="Function Reference/unregister widget"> unregister_widget()</a></tt></li></ul>
</td></tr></table>
</td>
<td width="50%">
<table class="widefat">

<tr style="background:#464646; color:#d7d7d7;">
<th> <b>internal Functions</b>
</th></tr>
<tr>
<td>
<ul><li> <tt><a href="https://codex.wordpress.org/Function_Reference/wp_register_widget_control" title="Function Reference/wp register widget control"> wp_register_widget_control()</a></tt></li>
<li> <tt><a href="https://codex.wordpress.org/Function_Reference/wp_unregister_widget_control" title="Function Reference/wp unregister widget control"> wp_unregister_widget_control()</a></tt></li>
<li> <tt><a href="https://codex.wordpress.org/Function_Reference/wp_convert_widget_settings" title="Function Reference/wp convert widget settings"> wp_convert_widget_settings()</a></tt></li>
<li> <tt><a href="https://codex.wordpress.org/Function_Reference/wp_get_widget_defaults" title="Function Reference/wp get widget defaults"> wp_get_widget_defaults()</a></tt></li>
<li> <tt><a href="https://codex.wordpress.org/Function_Reference/wp_widget_description" title="Function Reference/wp widget description"> wp_widget_description()</a></tt></li></ul>
</td></tr></table>
</td></tr></table>
<h2><span class="mw-headline" id="Developing_Widgets">Developing Widgets</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Widgets_API&amp;action=edit&amp;section=3" title="Edit section: Developing Widgets">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>To create a widget, you only need to extend the standard <tt>WP_Widget</tt> class and some of its functions.
</p><p>That base class also contains information about the functions that must be extended to get a working widget.
</p><p>The <tt>WP_Widget</tt> class is located in <code><a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/tags/5.2.3/src/wp-includes/class-wp-widget.php#L0">wp-includes/class-wp-widget.php</a></code>.
</p>
<h3><span class="mw-headline" id="Default_Usage">Default Usage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Widgets_API&amp;action=edit&amp;section=4" title="Edit section: Default Usage">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<pre>
class My_Widget extends WP_Widget {

	/**
	 * Sets up the widgets name etc
	 */
	public function __construct() {
		$widget_ops = array( 
			'classname' =&gt; 'my_widget',
			'description' =&gt; 'My Widget is awesome',
		);
		parent::__construct( 'my_widget', 'My Widget', $widget_ops );
	}

	/**
	 * Outputs the content of the widget
	 *
	 * @param array $args
	 * @param array $instance
	 */
	public function widget( $args, $instance ) {
		// outputs the content of the widget
	}

	/**
	 * Outputs the options form on admin
	 *
	 * @param array $instance The widget options
	 */
	public function form( $instance ) {
		// outputs the options form on admin
	}

	/**
	 * Processing widget options on save
	 *
	 * @param array $new_instance The new options
	 * @param array $old_instance The previous options
	 *
	 * @return array
	 */
	public function update( $new_instance, $old_instance ) {
		// processes widget options to be saved
	}
}
</pre>
<p>The widget can then be registered using the <code>widgets_init</code> hook:
</p><p>PHP 5.3+ only:
</p>
<pre>
add_action( 'widgets_init', function(){
	register_widget( 'My_Widget' );
});
</pre>
<p>PHP 5.2+:
</p>
<pre>
add_action('widgets_init',
	create_function('', 'return register_widget("My_Widget");')
);
</pre>
<h3><span class="mw-headline" id="Example">Example</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Widgets_API&amp;action=edit&amp;section=5" title="Edit section: Example">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This sample code creates a Widget named <tt><i>Foo_Widget</i></tt> that has a settings form to change the display title.
</p>
<pre>
/**
 * Adds Foo_Widget widget.
 */
class Foo_Widget extends WP_Widget {

	/**
	 * Register widget with WordPress.
	 */
	function __construct() {
		parent::__construct(
			'foo_widget', // Base ID
			esc_html__( 'Widget Title', 'text_domain' ), // Name
			array( 'description' =&gt; esc_html__( 'A Foo Widget', 'text_domain' ), ) // Args
		);
	}

	/**
	 * Front-end display of widget.
	 *
	 * @see WP_Widget::widget()
	 *
	 * @param array $args     Widget arguments.
	 * @param array $instance Saved values from database.
	 */
	public function widget( $args, $instance ) {
		echo $args['before_widget'];
		if (&#160;! empty( $instance['title'] ) ) {
			echo $args['before_title'] . apply_filters( 'widget_title', $instance['title'] ) . $args['after_title'];
		}
		echo esc_html__( 'Hello, World!', 'text_domain' );
		echo $args['after_widget'];
	}

	/**
	 * Back-end widget form.
	 *
	 * @see WP_Widget::form()
	 *
	 * @param array $instance Previously saved values from database.
	 */
	public function form( $instance ) {
		$title =&#160;! empty( $instance['title'] )&#160;? $instance['title']&#160;: esc_html__( 'New title', 'text_domain' );
		?&gt;
		&lt;p&gt;
		&lt;label for="&lt;?php echo esc_attr( $this-&gt;get_field_id( 'title' ) );&#160;?&gt;"&gt;&lt;?php esc_attr_e( 'Title:', 'text_domain' );&#160;?&gt;&lt;/label&gt; 
		&lt;input class="widefat" id="&lt;?php echo esc_attr( $this-&gt;get_field_id( 'title' ) );&#160;?&gt;" name="&lt;?php echo esc_attr( $this-&gt;get_field_name( 'title' ) );&#160;?&gt;" type="text" value="&lt;?php echo esc_attr( $title );&#160;?&gt;"&gt;
		&lt;/p&gt;
		&lt;?php 
	}

	/**
	 * Sanitize widget form values as they are saved.
	 *
	 * @see WP_Widget::update()
	 *
	 * @param array $new_instance Values just sent to be saved.
	 * @param array $old_instance Previously saved values from database.
	 *
	 * @return array Updated safe values to be saved.
	 */
	public function update( $new_instance, $old_instance ) {
		$instance = array();
		$instance['title'] = (&#160;! empty( $new_instance['title'] ) )&#160;? sanitize_text_field( $new_instance['title'] )&#160;: '';

		return $instance;
	}

} // class Foo_Widget
</pre>
<p>This sample widget can then be registered in the <tt>'widgets_init'</tt> hook:
</p>
<pre>
// register Foo_Widget widget
function register_foo_widget() {
    register_widget( 'Foo_Widget' );
}
add_action( 'widgets_init', 'register_foo_widget' );
</pre>
<p>Note&#160;: You must use <tt><a href="https://codex.wordpress.org/Function_Reference/get_field_name" title="Function Reference/get field name">get_field_name()</a></tt> and <tt>get_field_id()</tt> function to generate form element name and id.
</p>
<h3><span class="mw-headline" id="Example_With_Namespaces">Example With Namespaces</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Widgets_API&amp;action=edit&amp;section=6" title="Edit section: Example With Namespaces">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>If you use PHP 5.3. with namespaces you should call the constructor directly as in the following example:
</p>
<pre>
namespace a\b\c;

class My_Widget_Class extends \WP_Widget {
	function __construct() {
       	    parent::__construct( 'baseID', 'name' );
        }
        // ... rest of functions
}
</pre>
<p>and call the <tt>register_widget()</tt> with:
</p>
<pre>
add_action( 'widgets_init', function(){
     register_widget( 'a\b\c\My_Widget_Class' );
});
</pre>
<p>(see: <a rel="nofollow" class="external free" href="http://stackoverflow.com/questions/5247302/php-namespace-5-3-and-wordpress-widget/5247436#5247436">http://stackoverflow.com/questions/5247302/php-namespace-5-3-and-wordpress-widget/5247436#5247436</a>)
</p><p>That's all. You will automatically get a multi-widget. No special tweaks needed any longer for that.
</p><p>More information is available in the <a href="https://codex.wordpress.org/Version_2.8#New_Widgets_API" title="Version 2.8">version 2.8 information</a>.
</p>
<h2><span class="mw-headline" id="Displaying_Widgets_and_Widget_Areas">Displaying Widgets and Widget Areas</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Widgets_API&amp;action=edit&amp;section=7" title="Edit section: Displaying Widgets and Widget Areas">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>There are at least 3 ways that Widgets can be displayed:
</p>
<h3><span class="mw-headline" id="Widget_Areas">Widget Areas</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Widgets_API&amp;action=edit&amp;section=8" title="Edit section: Widget Areas">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The first, and most common, is by adding the desired <a href="https://codex.wordpress.org/Glossary#Widget" title="Glossary"> Widget</a> to a <a href="https://codex.wordpress.org/Widgetizing_Themes#How_to_Register_a_Widget_Area" title="Widgetizing Themes"> Widget Area</a> via the <a href="https://codex.wordpress.org/Appearance_Widgets_Screen" title="Appearance Widgets Screen"> Appearance -&gt; Widgets menu</a> in the Administration Screens.
</p><p>WordPress comes with some predefined Widget Areas that each have unique identifiers (view the source of the Widgets page to see them) that you'll need to know in order to display the Widget Area. If the predefined Widget Areas are insufficient for your needs you may <a href="https://codex.wordpress.org/Glossary#register" title="Glossary"> register</a> a <a href="https://codex.wordpress.org/Widgetizing_Themes#How_to_Register_a_Widget_Area" title="Widgetizing Themes"> custom Widget Areas</a>.
</p><p>When you're ready you can display that Widget Area by inserting the following code into whichever Theme file you desire:
</p>
<pre id="how-to-display-a-widget-area">&lt;?php if ( dynamic_sidebar('example_widget_area_name') )&#160;: else&#160;: endif;&#160;?&gt;</pre>
<p>That code displays all of the Widgets added to that Widget Area.
</p>
<h2><span class="mw-headline" id="Display_Widget_Area_Only_If_Active">Display Widget Area Only If Active</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Widgets_API&amp;action=edit&amp;section=9" title="Edit section: Display Widget Area Only If Active">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Here's the code used in the sidebar.php file of the <a href="https://codex.wordpress.org/Twenty_Fourteen" title="Twenty Fourteen">Twenty Fourteen</a> Theme.
</p>
<pre>
&lt;?php if ( is_active_sidebar( 'sidebar-1' ) )&#160;:&#160;?&gt;
	&lt;div id="primary-sidebar" class="primary-sidebar widget-area" role="complementary"&gt;
		&lt;?php dynamic_sidebar( 'sidebar-1' );&#160;?&gt;
	&lt;/div&gt;&lt;!-- #primary-sidebar --&gt;
&lt;?php endif;&#160;?&gt;
</pre>
<p>This code checks to see if the new widget area is populated otherwise doesn't execute.
</p>
<h3><span class="mw-headline" id="Independent_Widgets">Independent Widgets</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Widgets_API&amp;action=edit&amp;section=10" title="Edit section: Independent Widgets">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The second, and more technical, is via <tt><a href="https://codex.wordpress.org/Function_Reference/the_widget" title="Function Reference/the widget"> the_widget()</a></tt> method.
</p><p><small><i>Tags: how do i display widgets, how do i display widget areas</i></small>
</p>
<h2><span class="mw-headline" id="Resources">Resources</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Widgets_API&amp;action=edit&amp;section=11" title="Edit section: Resources">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> <a rel="nofollow" class="external text" href="https://make.wordpress.org/core/2015/07/02/deprecating-php4-style-constructors-in-wordpress-4-3/">Deprecating PHP4 style constructors in WordPress 4.3.</a></li>
<li> <a rel="nofollow" class="external text" href="https://w3guy.com/fix-notice-called-constructor-method-wp_widget-deprecated/">How to Fix – Notice: The called constructor method for WP_Widget is deprecated</a></li>
<li> <a rel="nofollow" class="external text" href="http://generatewp.com/sidebar/">WordPress Sidebar Generator</a></li></ul>
<h2><span class="mw-headline" id="Related">Related</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Widgets_API&amp;action=edit&amp;section=12" title="Edit section: Related">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><a href="https://codex.wordpress.org/Theme_Features" title="Theme Features"><b>Theme Support</b></a>: 
<a href="https://codex.wordpress.org/Function_Reference/add_theme_support" title="Function Reference/add theme support"> add_theme_support()</a>,
<a href="https://codex.wordpress.org/Function_Reference/remove_theme_support" title="Function Reference/remove theme support"> remove_theme_support()</a>,
<a href="https://codex.wordpress.org/Function_Reference/current_theme_supports" title="Function Reference/current theme supports"> current_theme_supports()</a>
<br />
<a href="https://codex.wordpress.org/Theme_Features" title="Theme Features"><b>Theme Features</b></a>: 
<a href="https://codex.wordpress.org/Sidebars" title="Sidebars">sidebar</a>, 
<a href="https://codex.wordpress.org/Navigation_Menus" title="Navigation Menus">menus</a>, 
<a href="https://codex.wordpress.org/Post_Formats" title="Post Formats">post-formats</a>, 
<a href="https://codex.wordpress.org/Title_Tag" title="Title Tag">title-tag</a>, 
<a href="https://codex.wordpress.org/Custom_Backgrounds" title="Custom Backgrounds">custom-background</a>, 
<a href="https://codex.wordpress.org/Custom_Headers" title="Custom Headers">custom-header</a>, 
<a href="https://codex.wordpress.org/Theme_Logo" title="Theme Logo">custom-logo</a>, 
<a href="https://codex.wordpress.org/Post_Thumbnails" title="Post Thumbnails">post-thumbnails</a>, 
<a href="https://codex.wordpress.org/Automatic_Feed_Links" title="Automatic Feed Links">automatic-feed-links</a>, 
<a href="https://codex.wordpress.org/Theme_Markup" title="Theme Markup">html5</a>, 
<a href="https://codex.wordpress.org/Editor_Style" title="Editor Style">editor-style</a>, 
<a href="https://codex.wordpress.org/Content_Width" title="Content Width">content_width</a>
</p>

