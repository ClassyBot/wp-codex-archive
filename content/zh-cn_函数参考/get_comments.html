<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<a href="https://codex.wordpress.org/Function_Reference/get_comments" title="Function Reference/get comments">English</a> • 
<strong class="selflink">中文(简体)</strong> • 
 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div style="background-color:#FAEBD7; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">本文已被<a href="https://codex.wordpress.org/Category:zh-cn:Stubs" title="Category:zh-cn:Stubs">标记</a>为未完成状态。您可以将其<b><a rel="nofollow" class="external text" href="https://codex.wordpress.org/index.php?title=zh-cn:%E5%87%BD%E6%95%B0%E5%8F%82%E8%80%83/get_comments&amp;action=edit">补充或翻译完整</a></b>，以此<a href="https://codex.wordpress.org/Codex:Contributing" title="Codex:Contributing">帮助</a>完善 Codex。</div> 
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.E8.AF.B4.E6.98.8E"><span class="tocnumber">1</span> <span class="toctext">说明</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.E7.94.A8.E6.B3.95"><span class="tocnumber">2</span> <span class="toctext">用法</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#.E9.BB.98.E8.AE.A4.E7.94.A8.E6.B3.95"><span class="tocnumber">2.1</span> <span class="toctext">默认用法</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#.E5.8F.82.E6.95.B0"><span class="tocnumber">3</span> <span class="toctext">参数</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#.E8.BF.94.E5.9B.9E"><span class="tocnumber">4</span> <span class="toctext">返回</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#.E7.A4.BA.E4.BE.8B"><span class="tocnumber">5</span> <span class="toctext">示例</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#.E6.BA.90.E6.96.87.E4.BB.B6"><span class="tocnumber">6</span> <span class="toctext">源文件</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#.E7.9B.B8.E5.85.B3"><span class="tocnumber">7</span> <span class="toctext">相关</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id=".E8.AF.B4.E6.98.8E">说明</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E5%87%BD%E6%95%B0%E5%8F%82%E8%80%83/get_comments&amp;action=edit&amp;section=1" title="Edit section: 说明">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Retrieve a list of comments.
</p>
<h2><span class="mw-headline" id=".E7.94.A8.E6.B3.95">用法</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E5%87%BD%E6%95%B0%E5%8F%82%E8%80%83/get_comments&amp;action=edit&amp;section=2" title="Edit section: 用法">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php&#160;get_comments</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$args&#160;</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
</p>
<h3><span class="mw-headline" id=".E9.BB.98.E8.AE.A4.E7.94.A8.E6.B3.95">默认用法</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E5%87%BD%E6%95%B0%E5%8F%82%E8%80%83/get_comments&amp;action=edit&amp;section=3" title="Edit section: 默认用法">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<pre>
&lt;?php $defaults = array(
	'author_email' =&gt; '',
	'ID' =&gt; '',
	'karma' =&gt; '',
	'number' =&gt; '',
	'offset' =&gt; '',
	'orderby' =&gt; '',
	'order' =&gt; 'DESC',
	'parent' =&gt; '',
	'post_id' =&gt; '',
	'post_author' =&gt; '',
	'post_name' =&gt; '',
	'post_parent' =&gt; '',
	'post_status' =&gt; '',
	'post_type' =&gt; '',
	'status' =&gt; '',
	'type' =&gt; '',
	'user_id' =&gt; '',
	'search' =&gt; '',
	'count' =&gt; false
);&#160;?&gt;
</pre>
<h2><span class="mw-headline" id=".E5.8F.82.E6.95.B0">参数</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E5%87%BD%E6%95%B0%E5%8F%82%E8%80%83/get_comments&amp;action=edit&amp;section=4" title="Edit section: 参数">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<dl><dt> <tt>$status</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#String" title="How to Pass Tag Parameters"><i>string</i></a>) (<i>optional</i>) Only return comments with this status.<ul><li><tt>'hold'</tt> - unapproved comments</li><li><tt>'approve'</tt> - approved comments</li><li><tt>'spam'</tt> - spam comments</li><li><tt>'trash'</tt> - trash comments</li></ul>
<dl><dd> Default: <i>None</i></dd></dl></dd></dl>
<dl><dt> <tt>$orderby</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#String" title="How to Pass Tag Parameters"><i>string</i></a>) (<i>optional</i>) Set the field used to sort comments.
<dl><dd> Default: comment_date_gmt</dd></dl></dd></dl>
<dl><dt> <tt>$order</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#String" title="How to Pass Tag Parameters"><i>string</i></a>) (<i>optional</i>) How to sort <tt>$orderby</tt>. Valid values:<ul><li><tt>'ASC'</tt> - Ascending (lowest to highest).</li><li><tt>'DESC'</tt> - Descending (highest to lowest).</li></ul>
<dl><dd> Default: DESC</dd></dl></dd></dl>
<dl><dt> <tt>$number</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#Integer" title="How to Pass Tag Parameters"><i>integer</i></a>) (<i>optional</i>) Number of comments to return. Leave blank to return all comments.
<dl><dd> Default: unlimited</dd></dl></dd></dl>
<dl><dt> <tt>$offset</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#Integer" title="How to Pass Tag Parameters"><i>integer</i></a>) (<i>optional</i>) Offset from latest comment. You must include $number along with this.
<dl><dd> Default: 0</dd></dl></dd></dl>
<dl><dt> <tt>$post_id</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#Integer" title="How to Pass Tag Parameters"><i>integer</i></a>) (<i>optional</i>) Only return comments for a particular post or page.
<dl><dd> Default: <i>None</i></dd></dl></dd></dl>
<dl><dt> <tt>$user_id</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#Integer" title="How to Pass Tag Parameters"><i>integer</i></a>) (<i>optional</i>) Only return comments for a particular user.
<dl><dd> Default: <i>None</i></dd></dl></dd></dl>
<dl><dt> <tt>$count</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#Integer" title="How to Pass Tag Parameters"><i>integer</i></a>) (<i>optional</i>) Only return the total count of comments.
<dl><dd> Default: <i>None</i></dd></dl></dd></dl>
<h2><span class="mw-headline" id=".E8.BF.94.E5.9B.9E">返回</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E5%87%BD%E6%95%B0%E5%8F%82%E8%80%83/get_comments&amp;action=edit&amp;section=5" title="Edit section: 返回">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<dl><dt> (Array)&#160;</dt>
<dd> Comment fields with the following index keys (or an empty array if there are no comments):</dd></dl>
<dl><dt> <tt>comment_ID</tt>&#160;</dt>
<dd> (<i>integer</i>) The comment ID</dd>
<dt> <tt>comment_post_ID</tt>&#160;</dt>
<dd> (<i>integer</i>) The ID of the post/page that this  comment responds to</dd>
<dt> <tt>comment_author</tt>&#160;</dt>
<dd> (<i>string</i>) The comment author's name</dd>
<dt> <tt>comment_author_email</tt>&#160;</dt>
<dd> (<i>string</i>) The comment author's email</dd>
<dt> <tt>comment_author_url</tt>&#160;</dt>
<dd> (<i>string</i>) The comment author's webpage</dd>
<dt> <tt>comment_author_IP</tt>&#160;</dt>
<dd> (<i>string</i>) The comment author's IP</dd>
<dt> <tt>comment_date</tt>&#160;</dt>
<dd> (<i>string</i>) The datetime of the comment (<tt>YYYY-MM-DD HH:MM:SS</tt>)</dd>
<dt> <tt>comment_date_gmt</tt>&#160;</dt>
<dd> (<i>string</i>) The GMT datetime of the comment (<tt>YYYY-MM-DD HH:MM:SS</tt>)</dd>
<dt> <tt>comment_content</tt>&#160;</dt>
<dd> (<i>string</i>) The comment's content</dd>
<dt> <tt>comment_karma</tt>&#160;</dt>
<dd> (<i>integer</i>) The comment's karma</dd>
<dt> <tt>comment_approved</tt>&#160;</dt>
<dd> (<i>string</i>) The comment approval level (0, 1 or "spam")</dd>
<dt> <tt>comment_agent</tt>&#160;</dt>
<dd> (<i>string</i>) The commenter's user agent (browser, operating system, etc.)</dd>
<dt> <tt>comment_type</tt>&#160;</dt>
<dd> (<i>string</i>) The comment's type if meaningfull (<tt>pingback|trackback</tt>), empty for normal comments</dd>
<dt> <tt>comment_parent</tt>&#160;</dt>
<dd> (<i>string</i>) The parent comment's ID for nested comments (0 for top level)</dd>
<dt> <tt>user_id</tt>&#160;</dt>
<dd> (<i>integer</i>) The comment author's ID if s/he is registered (0 otherwise)</dd></dl>
<h2><span class="mw-headline" id=".E7.A4.BA.E4.BE.8B">示例</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E5%87%BD%E6%95%B0%E5%8F%82%E8%80%83/get_comments&amp;action=edit&amp;section=6" title="Edit section: 示例">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre>&lt;?php 
$comments = get_comments('post_id=15');
foreach($comments as $comment)&#160;:
	echo($comment-&gt;comment_author);
endforeach;
?&gt;</pre>
<p>Show last 5 unapproved comments:
</p>
<pre>&lt;?php
$args = array(
	'status' =&gt; 'hold',
	'number' =&gt; '5',
	'post_id' =&gt; 1, // use post_id, not post_ID
);
$comments = get_comments($args);
foreach($comments as $comment)&#160;:
	echo($comment-&gt;comment_author . '&lt;br /&gt;' . $comment-&gt;comment_content);
endforeach;
?&gt;</pre>
<p>Show comment counts of a post:
</p>
<pre>&lt;?php
$args = array(
	'post_id' =&gt; 1, // use post_id, not post_ID
        'count' =&gt; true //return only the count
);
$comments = get_comments($args);
echo $comments

?&gt;</pre>
<p><br />
Show comment counts of a user:
</p>
<pre>&lt;?php
$args = array(
	'user_id' =&gt; 1, // use user_id
        'count' =&gt; true //return only the count
);
$comments = get_comments($args);
echo $comments

?&gt;</pre>
<p>Show comments of a user:
</p>
<pre>&lt;?php
$args = array(
	'user_id' =&gt; 1, // use user_id

);
$comments = get_comments($args);
foreach($comments as $comment)&#160;:
	echo($comment-&gt;comment_author . '&lt;br /&gt;' . $comment-&gt;comment_content);
endforeach;

?&gt;</pre>
<h2><span class="mw-headline" id=".E6.BA.90.E6.96.87.E4.BB.B6">源文件</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E5%87%BD%E6%95%B0%E5%8F%82%E8%80%83/get_comments&amp;action=edit&amp;section=7" title="Edit section: 源文件">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><tt>get_comments()</tt> is located in <code><a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/tags/5.0.3/src/wp-includes/comment.php#L0">wp-includes/comment.php</a></code>.
</p>
<h2><span class="mw-headline" id=".E7.9B.B8.E5.85.B3">相关</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E5%87%BD%E6%95%B0%E5%8F%82%E8%80%83/get_comments&amp;action=edit&amp;section=8" title="Edit section: 相关">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> <a href="https://codex.wordpress.org/Function_Reference/comments_template" title="Function Reference/comments template"> comments_template()</a></li>
<li> <a href="https://codex.wordpress.org/Function_Reference/get_comment" title="Function Reference/get comment"> get_comment()</a></li></ul>
<div style="background-color:#F7F7F7; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">See also index of <a href="https://codex.wordpress.org/Function_Reference" title="Function Reference">Function Reference</a> and index of <a href="https://codex.wordpress.org/Template_Tags" title="Template Tags">Template Tags</a>.</div>

<!-- 
NewPP limit report
Cached time: 20190211004548
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.028 seconds
Real time usage: 0.034 seconds
Preprocessor visited node count: 286/1000000
Preprocessor generated node count: 997/1000000
Post‐expand include size: 3895/2097152 bytes
Template argument size: 1579/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   17.251      1 - -total
 27.60%    4.762      1 - Template:Languages
 19.67%    3.393      8 - Template:Parameter
 18.89%    3.259      1 - Template:zh-cn:Stub
 15.80%    2.725      1 - Template:Trac
 11.29%    1.947      2 - Template:Message
  8.60%    1.483      1 - Template:zh-cn
  8.34%    1.439      1 - Template:Tag_Footer
  8.21%    1.417      1 - Template:en
  6.36%    1.097      1 - Template:CurrentVersion
-->
