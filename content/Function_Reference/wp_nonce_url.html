<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<strong class="selflink">English</strong> • 
<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/関数リファレンス/wp_nonce_url">日本語</a> 
 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Description"><span class="tocnumber">1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Usage"><span class="tocnumber">2</span> <span class="toctext">Usage</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Parameters"><span class="tocnumber">3</span> <span class="toctext">Parameters</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Return_Values"><span class="tocnumber">4</span> <span class="toctext">Return Values</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Examples"><span class="tocnumber">5</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Notes"><span class="tocnumber">6</span> <span class="toctext">Notes</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Change_Log"><span class="tocnumber">7</span> <span class="toctext">Change Log</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Source_File"><span class="tocnumber">8</span> <span class="toctext">Source File</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Related"><span class="tocnumber">9</span> <span class="toctext">Related</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#See_also"><span class="tocnumber">10</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#External_Resources"><span class="tocnumber">11</span> <span class="toctext">External Resources</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Description">Description</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/wp_nonce_url&amp;action=edit&amp;section=1" title="Edit section: Description">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Retrieve URL with <a href="https://codex.wordpress.org/Wordpress_Nonce_Implementation" title="Wordpress Nonce Implementation" class="mw-redirect">nonce</a> added to URL query.
</p><p>The returned result is escaped for display.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/wp_nonce_url&amp;action=edit&amp;section=2" title="Edit section: Usage">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php&#160;wp_nonce_url</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$actionurl</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$action</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$name&#160;</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
</p>
<h2><span class="mw-headline" id="Parameters">Parameters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/wp_nonce_url&amp;action=edit&amp;section=3" title="Edit section: Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<dl><dt> <tt>$actionurl</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#String" title="How to Pass Tag Parameters"><i>string</i></a>) (<i>required</i>) URL to add nonce action
<dl><dd> Default: <i>None</i></dd></dl></dd></dl>
<dl><dt> <tt>$action</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#String" title="How to Pass Tag Parameters"><i>string</i></a>) (<i>optional</i>) nonce action name
<dl><dd> Default: -1</dd></dl></dd></dl>
<dl><dt> <tt>$name</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#String" title="How to Pass Tag Parameters"><i>string</i></a>) (<i>optional, since 3.6</i>) nonce name
<dl><dd> Default: _wpnonce</dd></dl></dd></dl>
<h2><span class="mw-headline" id="Return_Values">Return Values</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/wp_nonce_url&amp;action=edit&amp;section=4" title="Edit section: Return Values">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<dl><dt> (string)&#160;</dt>
<dd> URL with nonce action added.</dd></dl>
<h2><span class="mw-headline" id="Examples">Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/wp_nonce_url&amp;action=edit&amp;section=5" title="Edit section: Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Plugin authors can safely add links that perform tasks using a combination of <code>wp_nonce_url()</code> and <code><a href="https://codex.wordpress.org/Function_Reference/admin_url" title="Function Reference/admin url">admin_url()</a></code>.
</p><p>For instance, start by creating the link users can click to do something interesting:
</p>
<pre class="php">function my_plugin_do_something () {
?&gt;
&lt;h2&gt;&lt;?php esc_html_e('My Plugin Admin Screen', 'my-plugin-textdomain');?&gt;&lt;/h2&gt;
&lt;p&gt;
    &lt;a href="&lt;?php print wp_nonce_url(admin_url('options.php?page=my_plugin_settings'), 'doing_something', 'my_nonce');?&gt;"
        class="button button-primary"&gt;&lt;?php esc_html_e('Do Something!', 'my-plugin-textdomain');?&gt;&lt;/a&gt;
    &lt;span class="description"&gt;&lt;?php esc_html_e('This button does something interesting.', 'my-plugin-textdomain');?&gt;&lt;/span&gt;
&lt;/p&gt;
&lt;?php
}
</pre>
<p>Then, to detect when the user clicks the link, check the nonce validity using <code><a href="https://codex.wordpress.org/Function_Reference/wp_verify_nonce" title="Function Reference/wp verify nonce">wp_verify_nonce()</a></code> in the function you defined when you called <a href="https://codex.wordpress.org/Function_Reference/add_menu_page" title="Function Reference/add menu page">add_menu_page()</a> or one of its <a href="https://codex.wordpress.org/Administration_Menus" title="Administration Menus">Administration Menus</a> wrappers. If the nonce isn't valid, the link wasn't clicked, so display the link. Otherwise, do "something interesting."
</p>
<pre class="php">add_action('admin_menu', 'add_my_plugin_admin_screen');
function add_my_plugin_admin_screen () {
    add_options_page(
        __('My Plugin Settings', 'my-plugin-textdomain'),
        __('My Plugin', 'my-plugin-textdomain'),
        'manage_options',
        'my_plugin_settings',
        'my_plugin_do_something'
    );
}

function my_plugin_do_something () {
    if (!isset($_GET['my_nonce']) ||&#160;!wp_verify_nonce($_GET['my_nonce'], 'doing_something')) {
?&gt;
&lt;h2&gt;&lt;?php esc_html_e('My Plugin Admin Screen', 'my-plugin-textdomain');?&gt;&lt;/h2&gt;
&lt;p&gt;
    &lt;a href="&lt;?php print wp_nonce_url(admin_url('options.php?page=my_plugin_settings'), 'doing_something', 'my_nonce');?&gt;"
        class="button button-primary"&gt;&lt;?php esc_html_e('Do Something!', 'my-plugin-textdomain');?&gt;&lt;/a&gt;
    &lt;span class="description"&gt;&lt;?php esc_html_e('This button does something interesting.', 'my-plugin-textdomain');?&gt;&lt;/span&gt;
&lt;/p&gt;
&lt;?php
    } else {
        // User pressed "Do Something!" button, so
        // do something interesting.
    }
}
</pre>
<p>Note that the recommended "context" parameter of the nonce is used to disambiguate which button was pressed. If you make more than one button users can press, make sure each button has a different nonce name and/or context.
</p>
<h2><span class="mw-headline" id="Notes">Notes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/wp_nonce_url&amp;action=edit&amp;section=6" title="Edit section: Notes">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h2><span class="mw-headline" id="Change_Log">Change Log</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/wp_nonce_url&amp;action=edit&amp;section=7" title="Edit section: Change Log">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Since: 2.0.4
</p>
<h2><span class="mw-headline" id="Source_File">Source File</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/wp_nonce_url&amp;action=edit&amp;section=8" title="Edit section: Source File">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><tt>wp_nonce_url()</tt> is located in <code><a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/tags/5.2.3/src/wp-includes/functions.php#L0">wp-includes/functions.php</a></code>.
</p>
<h2><span class="mw-headline" id="Related">Related</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/wp_nonce_url&amp;action=edit&amp;section=9" title="Edit section: Related">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><a href="https://codex.wordpress.org/WordPress_Nonces" title="WordPress Nonces"><b>Nonce functions</b></a>: 
<a href="https://codex.wordpress.org/Function_Reference/wp_nonce_ays" title="Function Reference/wp nonce ays">wp_nonce_ays()</a>,
<a href="https://codex.wordpress.org/Function_Reference/wp_nonce_field" title="Function Reference/wp nonce field">wp_nonce_field()</a>,
<strong class="selflink">wp_nonce_url()</strong>,
<a href="https://codex.wordpress.org/Function_Reference/wp_verify_nonce" title="Function Reference/wp verify nonce">wp_verify_nonce()</a>,
<a href="https://codex.wordpress.org/Function_Reference/wp_create_nonce" title="Function Reference/wp create nonce">wp_create_nonce()</a>,
<a href="https://codex.wordpress.org/Function_Reference/check_admin_referer" title="Function Reference/check admin referer">check_admin_referer()</a>,
<a href="https://codex.wordpress.org/Function_Reference/check_ajax_referer" title="Function Reference/check ajax referer">check_ajax_referer()</a>,
<a href="https://codex.wordpress.org/Function_Reference/wp_referer_field" title="Function Reference/wp referer field">wp_referer_field()</a> 
</p>
<h2><span class="mw-headline" id="See_also">See also</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/wp_nonce_url&amp;action=edit&amp;section=10" title="Edit section: See also">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> <a href="https://codex.wordpress.org/WordPress_Nonces" title="WordPress Nonces">WordPress Nonces</a></li></ul>
<h2><span class="mw-headline" id="External_Resources">External Resources</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/wp_nonce_url&amp;action=edit&amp;section=11" title="Edit section: External Resources">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> <a rel="nofollow" class="external text" href="http://markjaquith.wordpress.com/2006/06/02/wordpress-203-nonces/">Mark Jaquith - WordPress Nonces</a></li>
<li> <a rel="nofollow" class="external text" href="http://www.prelovac.com/vladimir/improving-security-in-wordpress-plugins-using-nonces">Vladimir Prelovac - Using Nonces in WordPress Plugins</a></li>
<li> Wikipedia: <a href="http://en.wikipedia.org/wiki/Cryptographic_nonce" class="extiw" title="wikipedia:Cryptographic nonce">Cryptographic Nonce</a></li>
<li> Nicolas Sebastiani: <a rel="nofollow" class="external text" href="https://www.bynicolas.com/code/wordpress-nonce/">https://www.bynicolas.com/code/wordpress-nonce/ </a></li></ul>
<p><br />
</p>
<div style="background-color:#F7F7F7; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">See also index of <a href="https://codex.wordpress.org/Function_Reference" title="Function Reference">Function Reference</a> and index of <a href="https://codex.wordpress.org/Template_Tags" title="Template Tags">Template Tags</a>.</div>


