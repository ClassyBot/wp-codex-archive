<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<strong class="selflink">English</strong> • 
<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/関数リファレンス/register_deactivation_hook">日本語</a> 
 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Description"><span class="tocnumber">1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Usage"><span class="tocnumber">2</span> <span class="toctext">Usage</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Parameters"><span class="tocnumber">3</span> <span class="toctext">Parameters</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Examples"><span class="tocnumber">4</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Discussions"><span class="tocnumber">5</span> <span class="toctext">Discussions</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Related"><span class="tocnumber">6</span> <span class="toctext">Related</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Description">Description</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/register_deactivation_hook&amp;action=edit&amp;section=1" title="Edit section: Description">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The function <b>register_deactivation_hook</b> (introduced in WordPress 2.0) registers a plugin function to be run when the plugin is deactivated.
</p><p>When a plugin is deactivated, the action 'deactivate_PLUGINNAME' hook is called. In the name of this hook, PLUGINNAME is replaced with the name of the plugin, including the optional subdirectory. For example, when the plugin is located in wp-content/plugin/sampleplugin/sample.php, then the name of this hook will become 'deactivate_sampleplugin/sample.php'. When the plugin consists of only one file and is (as by default) located at wp-content/plugin/sample.php the name of this hook will be 'deactivate_sample.php'.
</p><p>This function is a wrapper for the 'deactivate_PLUGINNAME' action, and is easier to use.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/register_deactivation_hook&amp;action=edit&amp;section=2" title="Edit section: Usage">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;register_deactivation_hook</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$function</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<h2><span class="mw-headline" id="Parameters">Parameters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/register_deactivation_hook&amp;action=edit&amp;section=3" title="Edit section: Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<dl><dt> <tt>$file</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#String" title="How to Pass Tag Parameters"><i>string</i></a>) (<i>required</i>) Path to the <a href="https://codex.wordpress.org/Writing_a_Plugin#Plugin_Files" title="Writing a Plugin">main plugin file</a> inside the <tt>wp-content/plugins</tt> directory. A full path will work.
<dl><dd> Default: <i>None</i></dd></dl></dd></dl>
<dl><dt> <tt>$function</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#Callback" title="How to Pass Tag Parameters"><i>callback</i></a>) (<i>required</i>) The function to be run when the plugin is deactivated. Any of <a rel="nofollow" class="external text" href="http://us2.php.net/manual/en/language.pseudo-types.php#language.types.callback">PHP's callback pseudo-types</a> will work.
<dl><dd> Default: <i>None</i></dd></dl></dd></dl>
<h2><span class="mw-headline" id="Examples">Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/register_deactivation_hook&amp;action=edit&amp;section=4" title="Edit section: Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>If you have a function called <tt>myplugin_deactivate()</tt> in the <a href="https://codex.wordpress.org/Writing_a_Plugin#Plugin_Files" title="Writing a Plugin">main plugin file</a> at either 
</p>
<ul><li>	<tt>wp-content/plugins/<var>myplugin</var>.php</tt> or</li>
<li>	<tt>wp-content/plugins/<var>myplugin</var>/<var>myplugin</var>.php</tt></li></ul>
<p>use this code:
</p>
<pre>register_deactivation_hook( __FILE__, 'myplugin_deactivate' );
</pre>
<p>This will call the <tt>myplugin_deactivate()</tt> function on deactivation of the plugin. 
</p>
<h2><span class="mw-headline" id="Discussions">Discussions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/register_deactivation_hook&amp;action=edit&amp;section=5" title="Edit section: Discussions">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>A good example for a basic activation/deactivation/uninstall class by "kaiser" can be found here on WPSE: <a rel="nofollow" class="external free" href="http://wordpress.stackexchange.com/questions/25910/uninstall-a-plugin-method-typical-features-how-to/25979#25979">http://wordpress.stackexchange.com/questions/25910/uninstall-a-plugin-method-typical-features-how-to/25979#25979</a>
</p>
<h2><span class="mw-headline" id="Related">Related</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/register_deactivation_hook&amp;action=edit&amp;section=6" title="Edit section: Related">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> See also <a href="https://codex.wordpress.org/Function_Reference/register_activation_hook" title="Function Reference/register activation hook">register_activation_hook</a>, <a href="https://codex.wordpress.org/Function_Reference/register_uninstall_hook" title="Function Reference/register uninstall hook">register_uninstall_hook()</a></li></ul>
<div style="background-color:#F7F7F7; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">See also index of <a href="https://codex.wordpress.org/Function_Reference" title="Function Reference">Function Reference</a> and index of <a href="https://codex.wordpress.org/Template_Tags" title="Template Tags">Template Tags</a>.</div>

<!-- 
NewPP limit report
Cached time: 20190211003922
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.016 seconds
Real time usage: 0.195 seconds
Preprocessor visited node count: 95/1000000
Preprocessor generated node count: 388/1000000
Post‐expand include size: 1699/2097152 bytes
Template argument size: 732/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   64.029      1 - -total
 84.79%   54.290      1 - Template:Tag_Footer
 34.70%   22.221      1 - Template:Message
 11.84%    7.581      1 - Template:Languages
  7.56%    4.841      1 - Template:ja
  2.85%    1.825      2 - Template:Parameter
  1.91%    1.220      1 - Template:en
-->
