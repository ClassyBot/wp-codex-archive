<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<strong class="selflink">English</strong> • 
<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/関数リファレンス/post">meta Function Examples 日本語</a> 
 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Description"><span class="tocnumber">1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Example"><span class="tocnumber">2</span> <span class="toctext">Example</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Resources"><span class="tocnumber">3</span> <span class="toctext">Resources</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Related"><span class="tocnumber">4</span> <span class="toctext">Related</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Description">Description</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/post_meta_Function_Examples&amp;action=edit&amp;section=1" title="Edit section: Description">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The following is a detailed example for the usage of the <a href="https://codex.wordpress.org/Function_Reference/add_post_meta" title="Function Reference/add post meta">add_post_meta</a>, <a href="https://codex.wordpress.org/Function_Reference/delete_post_meta" title="Function Reference/delete post meta">delete_post_meta</a>, <a href="https://codex.wordpress.org/Function_Reference/update_post_meta" title="Function Reference/update post meta">update_post_meta</a>, and <a href="https://codex.wordpress.org/Function_Reference/get_post_meta" title="Function Reference/get post meta">get_post_meta</a> functions.
</p>
<h2><span class="mw-headline" id="Example">Example</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/post_meta_Function_Examples&amp;action=edit&amp;section=2" title="Edit section: Example">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div style="padding: 1em; border: 1px dashed #2f6fab; color: Black; background-color: #fafafa; line-height: 1.1em">
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php&#160;<br /></span><span style="color: #FF8000">/*******************<br />This&#160;function&#160;handles&#160;the&#160;mood&#160;and&#160;listening_to&#160;meta&#160;tags.<br />It&#160;can&#160;be&#160;called&#160;with&#160;an&#160;action&#160;of&#160;update,&#160;delete,&#160;and&#160;get&#160;(default)<br />When&#160;called&#160;with&#160;an&#160;action&#160;of&#160;update,&#160;either&#160;$mood&#160;or&#160;$listening_to&#160;must&#160;be&#160;provided.<br />i.e.&#160;mood_music(&#160;$post-&gt;ID,&#160;'update',&#160;'Happy',&#160;'Bon&#160;Jovi&#160;-&#160;It's&#160;My&#160;Life'&#160;);<br />*******************/<br /></span><span style="color: #007700">function&#160;</span><span style="color: #0000BB">mood_music</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$post_id</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$action&#160;</span><span style="color: #007700">=&#160;</span><span style="color: #DD0000">'get'</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$mood&#160;</span><span style="color: #007700">=&#160;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$listening_to&#160;</span><span style="color: #007700">=&#160;</span><span style="color: #0000BB">0&#160;</span><span style="color: #007700">)&#160;{<br />&#160;&#160;<br />&#160;&#160;</span><span style="color: #FF8000">//Let's&#160;make&#160;a&#160;switch&#160;to&#160;handle&#160;the&#160;three&#160;cases&#160;of&#160;'Action'<br />&#160;&#160;</span><span style="color: #007700">switch&#160;(</span><span style="color: #0000BB">$action</span><span style="color: #007700">)&#160;{<br />&#160;&#160;&#160;&#160;case&#160;</span><span style="color: #DD0000">'update'&#160;</span><span style="color: #007700">:<br />&#160;&#160;&#160;&#160;&#160;&#160;if(&#160;!&#160;</span><span style="color: #0000BB">$mood&#160;</span><span style="color: #007700">&amp;&amp;&#160;!&#160;</span><span style="color: #0000BB">$listening_to&#160;</span><span style="color: #007700">)<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #FF8000">//If&#160;nothing&#160;is&#160;given&#160;to&#160;update,&#160;end&#160;here<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #007700">return&#160;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br />&#160;&#160;&#160;&#160;&#160;&#160;<br />&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #FF8000">//add_post_meta&#160;usage:<br />&#160;&#160;&#160;&#160;&#160;&#160;//add_post_meta(&#160;$post_id,&#160;$meta_key,&#160;$meta_value,&#160;$unique&#160;=&#160;false&#160;)<br />&#160;&#160;&#160;&#160;&#160;&#160;<br />&#160;&#160;&#160;&#160;&#160;&#160;//If&#160;the&#160;$mood&#160;variable&#160;is&#160;supplied,<br />&#160;&#160;&#160;&#160;&#160;&#160;//add&#160;a&#160;new&#160;key&#160;named&#160;'mood',&#160;containing&#160;that&#160;value.<br />&#160;&#160;&#160;&#160;&#160;&#160;//If&#160;the&#160;'mood'&#160;key&#160;already&#160;exists&#160;on&#160;this&#160;post,<br />&#160;&#160;&#160;&#160;&#160;&#160;//this&#160;command&#160;will&#160;simply&#160;add&#160;another&#160;one.<br />&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #007700">if(&#160;</span><span style="color: #0000BB">$mood&#160;</span><span style="color: #007700">)&#160;{<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #0000BB">add_post_meta</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$post_id</span><span style="color: #007700">,&#160;</span><span style="color: #DD0000">'mood'</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$mood&#160;</span><span style="color: #007700">);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return&#160;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}<br />&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #FF8000">//update_post_meta&#160;usage:<br />&#160;&#160;&#160;&#160;&#160;&#160;//update_post_meta(&#160;$post_id,&#160;$meta_key,&#160;$meta_value&#160;)<br />&#160;&#160;&#160;&#160;&#160;&#160;<br />&#160;&#160;&#160;&#160;&#160;&#160;//If&#160;the&#160;$listening_to&#160;variable&#160;is&#160;supplied,<br />&#160;&#160;&#160;&#160;&#160;&#160;//add&#160;a&#160;new&#160;key&#160;named&#160;'listening_to',&#160;containing&#160;that&#160;value.<br />&#160;&#160;&#160;&#160;&#160;&#160;//If&#160;the&#160;'listening_to'&#160;key&#160;already&#160;exists&#160;on&#160;this&#160;post,<br />&#160;&#160;&#160;&#160;&#160;&#160;//this&#160;command&#160;will&#160;update&#160;it&#160;to&#160;the&#160;new&#160;value<br />&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #007700">if(&#160;</span><span style="color: #0000BB">$listening_to&#160;</span><span style="color: #007700">)&#160;{<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #0000BB">add_post_meta</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$post_id</span><span style="color: #007700">,&#160;</span><span style="color: #DD0000">'listening_to'</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$listening_to</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">true&#160;</span><span style="color: #007700">)&#160;or<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #0000BB">update_post_meta</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$post_id</span><span style="color: #007700">,&#160;</span><span style="color: #DD0000">'listening_to'</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$listening_to&#160;</span><span style="color: #007700">);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return&#160;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />&#160;&#160;&#160;&#160;&#160;&#160;}<br />&#160;&#160;&#160;&#160;case&#160;</span><span style="color: #DD0000">'delete'&#160;</span><span style="color: #007700">:<br />&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #FF8000">//delete_post_meta&#160;usage:<br />&#160;&#160;&#160;&#160;&#160;&#160;//delete_post_meta(&#160;$post_id,&#160;$meta_key,&#160;$prev_value&#160;=&#160;'&#160;'&#160;)<br />&#160;&#160;&#160;&#160;<br />&#160;&#160;&#160;&#160;&#160;&#160;//This&#160;will&#160;delete&#160;all&#160;instances&#160;of&#160;the&#160;following&#160;keys&#160;from&#160;the&#160;given&#160;post<br />&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #0000BB">delete_post_meta</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$post_id</span><span style="color: #007700">,&#160;</span><span style="color: #DD0000">'mood'&#160;</span><span style="color: #007700">);<br />&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #0000BB">delete_post_meta</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$post_id</span><span style="color: #007700">,&#160;</span><span style="color: #DD0000">'listening_to'&#160;</span><span style="color: #007700">);<br />&#160;&#160;&#160;&#160;&#160;&#160;<br />&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #FF8000">//To&#160;only&#160;delete&#160;'mood'&#160;if&#160;it's&#160;value&#160;is&#160;'sad':<br />&#160;&#160;&#160;&#160;&#160;&#160;//delete_post_meta(&#160;$post_id,&#160;'mood',&#160;'sad'&#160;);<br />&#160;&#160;&#160;&#160;</span><span style="color: #007700">break;<br />&#160;&#160;&#160;&#160;case&#160;</span><span style="color: #DD0000">'get'&#160;</span><span style="color: #007700">:<br />&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #FF8000">//get_post_custom&#160;usage:<br />&#160;&#160;&#160;&#160;&#160;&#160;//get_post_meta(&#160;$post_id,&#160;$meta_key,&#160;$single&#160;value&#160;=&#160;false&#160;)<br />&#160;&#160;<br />&#160;&#160;&#160;&#160;&#160;&#160;//$stored_moods&#160;will&#160;be&#160;an&#160;array&#160;containing&#160;all&#160;values&#160;of&#160;the&#160;meta&#160;key&#160;'mood'<br />&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #0000BB">$stored_moods&#160;</span><span style="color: #007700">=&#160;</span><span style="color: #0000BB">get_post_meta</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$post_id</span><span style="color: #007700">,&#160;</span><span style="color: #DD0000">'mood'&#160;</span><span style="color: #007700">);<br />&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #FF8000">//$stored_listening_to&#160;will&#160;be&#160;the&#160;first&#160;value&#160;of&#160;the&#160;key&#160;'listening_to'<br />&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #0000BB">$stored_listening_to&#160;</span><span style="color: #007700">=&#160;</span><span style="color: #0000BB">get_post_meta</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$post_id</span><span style="color: #007700">,&#160;</span><span style="color: #DD0000">'listening_to'</span><span style="color: #007700">,&#160;</span><span style="color: #DD0000">'true'&#160;</span><span style="color: #007700">);<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #FF8000">//Now&#160;we&#160;need&#160;a&#160;nice&#160;ouput&#160;format,&#160;so&#160;that<br />&#160;&#160;&#160;&#160;&#160;&#160;//the&#160;user&#160;can&#160;implement&#160;it&#160;how&#160;he/she&#160;wants:<br />&#160;&#160;&#160;&#160;&#160;&#160;//ie.&#160;echo&#160;mood_music(&#160;$post-&gt;ID,&#160;'get'&#160;);<br />&#160;&#160;&#160;&#160;&#160;&#160;<br />&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #0000BB">$return&#160;</span><span style="color: #007700">=&#160;</span><span style="color: #DD0000">'&lt;div&#160;class='</span><span style="color: #0000BB">mood</span><span style="color: #007700">-</span><span style="color: #0000BB">music</span><span style="color: #DD0000">'&gt;'</span><span style="color: #007700">;<br />&#160;&#160;&#160;&#160;&#160;&#160;if&#160;(&#160;!&#160;empty(&#160;</span><span style="color: #0000BB">$stored_moods&#160;</span><span style="color: #007700">)&#160;)<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #0000BB">$return&#160;</span><span style="color: #007700">.=&#160;</span><span style="color: #DD0000">'&lt;strong&gt;Current&#160;Mood&lt;/strong&gt;:&#160;'</span><span style="color: #007700">;<br />&#160;&#160;&#160;&#160;&#160;&#160;foreach(&#160;</span><span style="color: #0000BB">$stored_moods&#160;</span><span style="color: #007700">as&#160;</span><span style="color: #0000BB">$mood&#160;</span><span style="color: #007700">)<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #0000BB">$return&#160;</span><span style="color: #007700">.=&#160;</span><span style="color: #0000BB">$mood&#160;</span><span style="color: #007700">.&#160;</span><span style="color: #DD0000">',&#160;'</span><span style="color: #007700">;<br />&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #0000BB">$return&#160;</span><span style="color: #007700">.=&#160;</span><span style="color: #DD0000">'&lt;br/&gt;'</span><span style="color: #007700">;<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;if&#160;(&#160;!&#160;empty(&#160;</span><span style="color: #0000BB">$stored_listening_to&#160;</span><span style="color: #007700">)&#160;)&#160;{<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #0000BB">$return&#160;</span><span style="color: #007700">.=&#160;</span><span style="color: #DD0000">'&lt;strong&gt;Currently&#160;Listening&#160;To&lt;/strong&gt;:&#160;'</span><span style="color: #007700">;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #0000BB">$return&#160;</span><span style="color: #007700">.=&#160;</span><span style="color: #0000BB">$stored_listening_to</span><span style="color: #007700">;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}<br />&#160;&#160;&#160;&#160;&#160;&#160;</span><span style="color: #0000BB">$return&#160;</span><span style="color: #007700">.=&#160;</span><span style="color: #DD0000">'&lt;/div&gt;'</span><span style="color: #007700">;<br />&#160;&#160;&#160;&#160;&#160;&#160;<br />&#160;&#160;&#160;&#160;&#160;&#160;return&#160;</span><span style="color: #0000BB">$return</span><span style="color: #007700">;<br />&#160;&#160;&#160;&#160;default&#160;:<br />&#160;&#160;&#160;&#160;&#160;&#160;return&#160;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br />&#160;&#160;&#160;&#160;break;<br />&#160;&#160;}&#160;</span><span style="color: #FF8000">//end&#160;switch<br /></span><span style="color: #007700">}&#160;</span><span style="color: #FF8000">//end&#160;function<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</p>
</code></div>
<h2><span class="mw-headline" id="Resources">Resources</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/post_meta_Function_Examples&amp;action=edit&amp;section=3" title="Edit section: Resources">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li></li></ul>
<h2><span class="mw-headline" id="Related">Related</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/post_meta_Function_Examples&amp;action=edit&amp;section=4" title="Edit section: Related">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><a href="https://codex.wordpress.org/Custom_Fields" title="Custom Fields"><b>Custom Fields</b></a>: 
<a href="https://codex.wordpress.org/Function_Reference/the_meta" title="Function Reference/the meta"> the_meta()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/get_post_meta" title="Function Reference/get post meta"> get_post_meta()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/add_post_meta" title="Function Reference/add post meta"> add_post_meta()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/update_post_meta" title="Function Reference/update post meta"> update_post_meta()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/delete_post_meta" title="Function Reference/delete post meta"> delete_post_meta()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/get_post_custom" title="Function Reference/get post custom"> get_post_custom()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/get_post_custom_values" title="Function Reference/get post custom values"> get_post_custom_values()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/get_post_custom_keys" title="Function Reference/get post custom keys"> get_post_custom_keys()</a> 
(See Also: <strong class="selflink"> post_meta Function Examples</strong>)
</p>
<div style="background-color:#F7F7F7; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">See also index of <a href="https://codex.wordpress.org/Function_Reference" title="Function Reference">Function Reference</a> and index of <a href="https://codex.wordpress.org/Template_Tags" title="Template Tags">Template Tags</a>.</div>


