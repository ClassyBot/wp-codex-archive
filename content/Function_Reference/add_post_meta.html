<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<strong class="selflink">English</strong> • 
<a href="https://codex.wordpress.org/zh-cn:%E5%87%BD%E6%95%B0%E5%8F%82%E8%80%83/add_post_meta" title="zh-cn:函数参考/add post meta">中文(简体)</a> • 
<a href="https://codex.wordpress.org/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/add_post_meta" title="Справочник по функциям/add post meta">Русский</a> • 

<a href="https://codex.wordpress.org/es:Referencia_de_Funciones/add_post_meta" title="es:Referencia de Funciones/add post meta">Español</a> • 

<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/関数リファレンス/add_post_meta">日本語</a> 
<a href="https://codex.wordpress.org/pt-br:Fun%C3%A7%C3%B5es_e_Refer%C3%AAncias/add_post_meta" title="pt-br:Funções e Referências/add post meta" class="mw-redirect">Português do Brasil</a> • 

<a href="https://codex.wordpress.org/ko:%ED%95%A8%EC%88%98_%EB%A0%88%ED%8D%BC%EB%9F%B0%EC%8A%A4/add_post_meta" title="ko:함수 레퍼런스/add post meta">한국어</a> • 
 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Description"><span class="tocnumber">1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Usage"><span class="tocnumber">2</span> <span class="toctext">Usage</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Parameters"><span class="tocnumber">3</span> <span class="toctext">Parameters</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Return"><span class="tocnumber">4</span> <span class="toctext">Return</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Examples"><span class="tocnumber">5</span> <span class="toctext">Examples</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Default_Usage"><span class="tocnumber">5.1</span> <span class="toctext">Default Usage</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Adding_or_Updating_a_Unique_Custom_Field"><span class="tocnumber">5.2</span> <span class="toctext">Adding or Updating a Unique Custom Field</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Other_Examples"><span class="tocnumber">5.3</span> <span class="toctext">Other Examples</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Hidden_Custom_Fields"><span class="tocnumber">5.4</span> <span class="toctext">Hidden Custom Fields</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#Hidden_Arrays"><span class="tocnumber">5.4.1</span> <span class="toctext">Hidden Arrays</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Protected_Custom_Fields"><span class="tocnumber">5.4.2</span> <span class="toctext">Protected Custom Fields</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Notes"><span class="tocnumber">6</span> <span class="toctext">Notes</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#Character_Escaping"><span class="tocnumber">6.1</span> <span class="toctext">Character Escaping</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#Source_Code"><span class="tocnumber">7</span> <span class="toctext">Source Code</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="#Change_Log"><span class="tocnumber">8</span> <span class="toctext">Change Log</span></a></li>
<li class="toclevel-1 tocsection-16"><a href="#Related"><span class="tocnumber">9</span> <span class="toctext">Related</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Description">Description</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/add_post_meta&amp;action=edit&amp;section=1" title="Edit section: Description">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Adds a <a href="https://codex.wordpress.org/Custom_Fields" title="Custom Fields">custom field</a> (also called <i>meta-data</i>) to a specified post which could be of any <a href="https://codex.wordpress.org/Post_Types" title="Post Types">post type</a>. A custom field is effectively a key–value pair.
</p><p>Note that if the given key already exists among custom fields of the specified post, another custom field with the same key is added unless the  <tt>$unique</tt> argument is set to <tt>true</tt>, in which case, no changes are made. If you want to update the value of an existing key, use the <tt><a href="https://codex.wordpress.org/Function_Reference/update_post_meta" title="Function Reference/update post meta">update_post_meta()</a></tt> function instead.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/add_post_meta&amp;action=edit&amp;section=2" title="Edit section: Usage">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;add_post_meta</span><span style="color: #007700">(</span><span style="color: #0000BB">$post_id</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$meta_key</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$meta_value</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$unique</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<h2><span class="mw-headline" id="Parameters">Parameters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/add_post_meta&amp;action=edit&amp;section=3" title="Edit section: Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<dl><dt> <tt>$post_id</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#Integer" title="How to Pass Tag Parameters"><i>integer</i></a>) (<i>required</i>) The ID of the post to which a custom field should be added.
<dl><dd> Default: <i>None</i></dd></dl></dd></dl>
<dl><dt> <tt>$meta_key</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#String" title="How to Pass Tag Parameters"><i>string</i></a>) (<i>required</i>) The key of the custom field which should be added.
<dl><dd> Default: <i>None</i></dd></dl></dd></dl>
<dl><dt> <tt>$meta_value</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#Mixed" title="How to Pass Tag Parameters"><i>mixed</i></a>) (<i>required</i>) The value of the custom field which should be added. If an array is given, it will be serialized into a string.
<dl><dd> Default: <i>None</i></dd></dl></dd></dl>
<dl><dt> <tt>$unique</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#Boolean" title="How to Pass Tag Parameters"><i>boolean</i></a>) (<i>optional</i>) Whether or not you want the key to stay unique. When set to <tt>true</tt>, the custom field will not be added if the given key already exists among custom fields of the specified post.
<dl><dd> Default: false</dd></dl></dd></dl>
<h2><span class="mw-headline" id="Return">Return</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/add_post_meta&amp;action=edit&amp;section=4" title="Edit section: Return">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<dl><dt> <tt></tt> <tt style="color:gray">(<a href="https://codex.wordpress.org/Glossary#Boolean.7Cinteger" title="Glossary"><i>boolean&#124;integer</i></a>)</tt>&#160;</dt>
<dd> On success, returns the ID of the inserted row, which validates to  <tt>true</tt>. If the <tt>$unique</tt> argument was set to <tt>true</tt> and a custom field with the given key already exists, <tt>false</tt> is returned.</dd></dl>
<h2><span class="mw-headline" id="Examples">Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/add_post_meta&amp;action=edit&amp;section=5" title="Edit section: Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Default_Usage">Default Usage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/add_post_meta&amp;action=edit&amp;section=6" title="Edit section: Default Usage">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<pre>&lt;?php add_post_meta( 68, 'my_key', 47 );&#160;?&gt;
</pre>
<h3><span class="mw-headline" id="Adding_or_Updating_a_Unique_Custom_Field">Adding or Updating a Unique Custom Field</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/add_post_meta&amp;action=edit&amp;section=7" title="Edit section: Adding or Updating a Unique Custom Field">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Add a new custom field if the key does not already exist, or updates the value of the custom field with that key otherwise.
</p>
<pre>
&lt;?php
if (&#160;! add_post_meta( 7, 'fruit', 'banana', true ) ) { 
   update_post_meta( 7, 'fruit', 'banana' );
}
</pre>
<h3><span class="mw-headline" id="Other_Examples">Other Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/add_post_meta&amp;action=edit&amp;section=8" title="Edit section: Other Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Adds a new custom field only if a custom field with the given key does not already exist:
</p>
<pre>&lt;?php add_post_meta( 68, 'my_key', '47', true );&#160;?&gt;
</pre>
<p>Adds several custom fields with different values but with the same key <tt>'my_key'</tt>:
</p>
<pre>
&lt;?php add_post_meta( 68, 'my_key', '47' );&#160;?&gt;
&lt;?php add_post_meta( 68, 'my_key', '682' );&#160;?&gt;
&lt;?php add_post_meta( 68, 'my_key', 'The quick, brown fox jumped over the lazy dog.' );&#160;?&gt;
...</pre>
<p>For a more detailed example, see the <a href="https://codex.wordpress.org/Function_Reference/post_meta_Function_Examples" title="Function Reference/post meta Function Examples">post_meta Functions Examples</a> page.
</p>
<h3><span class="mw-headline" id="Hidden_Custom_Fields">Hidden Custom Fields</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/add_post_meta&amp;action=edit&amp;section=9" title="Edit section: Hidden Custom Fields">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>If you are a plugin or theme developer and you are planning to use custom fields to store parameters related to your plugin or template, it is interesting to note that WordPress will not show custom fields which have keys starting with an <tt>"_"</tt> (underscore) in the custom fields list on the <a href="https://codex.wordpress.org/Writing_Posts" title="Writing Posts"> post edit</a> screen or when using the <tt><a href="https://codex.wordpress.org/Function_Reference/the_meta" title="Function Reference/the meta"> the_meta()</a></tt> template function. This can be for example used to show these custom fields in an unusual way by using the <tt><a href="https://codex.wordpress.org/Function_Reference/add_meta_box" title="Function Reference/add meta box"> add_meta_box()</a></tt> function.
</p><p>The following example:
</p>
<pre>&lt;?php add_post_meta( 68, '_color', 'red', true );&#160;?&gt;
</pre>
<p>will add a unique custom field with the key name <tt>'_color'</tt> and the value <tt>'red'</tt> but this custom field will not display in the post edit screen.
</p>
<h4><span class="mw-headline" id="Hidden_Arrays">Hidden Arrays</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/add_post_meta&amp;action=edit&amp;section=10" title="Edit section: Hidden Arrays">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>In addition, if the <tt>$meta_value</tt> argument is an array, it will <strong>not</strong> be displayed on the page edit screen, even if you don't prefix the key name with an underscore.
</p>
<h4><span class="mw-headline" id="Protected_Custom_Fields">Protected Custom Fields</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/add_post_meta&amp;action=edit&amp;section=11" title="Edit section: Protected Custom Fields">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>An alternative to the use of an <tt>"_"</tt> (underscore) is to use the filter <tt><a rel="nofollow" class="external text" href="https://developer.wordpress.org/reference/hooks/is_protected_meta/">is_protected_meta</a></tt>.
</p>
<h2><span class="mw-headline" id="Notes">Notes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/add_post_meta&amp;action=edit&amp;section=12" title="Edit section: Notes">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> Uses <tt><a href="https://codex.wordpress.org/Function_Reference/add_metadata" title="Function Reference/add metadata"> add_metadata()</a></tt>.</li></ul>
<h3><span class="mw-headline" id="Character_Escaping">Character Escaping</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/add_post_meta&amp;action=edit&amp;section=13" title="Edit section: Character Escaping">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Because meta values are passed through the <tt><a rel="nofollow" class="external text" href="http://php.net/stripslashes">stripslashes()</a></tt> function, you need to be careful about content escaped with <tt>\</tt> characters. You can read more about the behavior, and a workaround example, in the <tt><a href="https://codex.wordpress.org/Function_Reference/update_post_meta#Character_Escaping" title="Function Reference/update post meta"> update_post_meta()</a></tt> documentation.
</p>
<h2><span class="mw-headline" id="Source_Code">Source Code</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/add_post_meta&amp;action=edit&amp;section=14" title="Edit section: Source Code">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><tt>add_post_meta()</tt> is located in <code><a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/tags/5.2.3/src/wp-includes/post.php#L0">wp-includes/post.php</a></code>
</p>
<h2><span class="mw-headline" id="Change_Log">Change Log</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/add_post_meta&amp;action=edit&amp;section=15" title="Edit section: Change Log">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Since <a href="https://codex.wordpress.org/Version_1.5" title="Version 1.5">1.5.0</a>
</p>
<h2><span class="mw-headline" id="Related">Related</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Function_Reference/add_post_meta&amp;action=edit&amp;section=16" title="Edit section: Related">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><a href="https://codex.wordpress.org/Custom_Fields" title="Custom Fields"><b>Custom Fields</b></a>: 
<a href="https://codex.wordpress.org/Function_Reference/the_meta" title="Function Reference/the meta"> the_meta()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/get_post_meta" title="Function Reference/get post meta"> get_post_meta()</a>, 
<strong class="selflink"> add_post_meta()</strong>, 
<a href="https://codex.wordpress.org/Function_Reference/update_post_meta" title="Function Reference/update post meta"> update_post_meta()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/delete_post_meta" title="Function Reference/delete post meta"> delete_post_meta()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/get_post_custom" title="Function Reference/get post custom"> get_post_custom()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/get_post_custom_values" title="Function Reference/get post custom values"> get_post_custom_values()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/get_post_custom_keys" title="Function Reference/get post custom keys"> get_post_custom_keys()</a> 
(See Also: <a href="https://codex.wordpress.org/Function_Reference/post_meta_Function_Examples" title="Function Reference/post meta Function Examples"> post_meta Function Examples</a>)
</p>
<div style="background-color:#F7F7F7; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">See also index of <a href="https://codex.wordpress.org/Function_Reference" title="Function Reference">Function Reference</a> and index of <a href="https://codex.wordpress.org/Template_Tags" title="Template Tags">Template Tags</a>.</div>


