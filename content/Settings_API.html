<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<strong class="selflink">English</strong> • 
<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/">Settings API 日本語</a> 
<a href="https://codex.wordpress.org/pt-br:_Configura%C3%A7%C3%B5es_API" title="pt-br: Configurações API" class="mw-redirect">Português do Brasil</a> • 

<a href="https://codex.wordpress.org/zh-cn:%E8%AE%BE%E7%BD%AE_API" title="zh-cn:设置 API">中文(简体)</a> • 
 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Function_Reference"><span class="tocnumber">2</span> <span class="toctext">Function Reference</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Adding_Setting_Fields"><span class="tocnumber">3</span> <span class="toctext">Adding Setting Fields</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Adding_Settings_Sections"><span class="tocnumber">4</span> <span class="toctext">Adding Settings Sections</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Registering_Settings"><span class="tocnumber">5</span> <span class="toctext">Registering Settings</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Options_Form_Rendering"><span class="tocnumber">6</span> <span class="toctext">Options Form Rendering</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Examples"><span class="tocnumber">7</span> <span class="toctext">Examples</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Adding_a_settings_section_with_a_new_field_in_it"><span class="tocnumber">7.1</span> <span class="toctext">Adding a settings section with a new field in it</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#Graphical_Representation_of_where_all_those_code_should_go:"><span class="tocnumber">7.1.1</span> <span class="toctext">Graphical Representation of where all those code should go:</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#External_References"><span class="tocnumber">8</span> <span class="toctext">External References</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Generators"><span class="tocnumber">9</span> <span class="toctext">Generators</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#PHP_Class"><span class="tocnumber">10</span> <span class="toctext">PHP Class</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Overview">Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Settings_API&amp;action=edit&amp;section=1" title="Edit section: Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The <b>Settings API</b>, added in <a href="https://codex.wordpress.org/Version_2.7" title="Version 2.7">WordPress 2.7</a>, allows admin pages containing settings forms to be managed semi-automatically. It lets you define settings pages, sections within those pages and fields within the sections.
</p><p>New settings pages can be registered along with sections and fields inside them. Existing settings pages can also be added to by registering new settings sections or fields inside of them.
</p><p>Organizing registration and validation of fields still requires some effort from developers using the Settings API, but avoids a lot of complex debugging of underlying options management. 
</p><p>NOTE: When using the Settings API, the form posts to wp-admin/options.php which provides fairly strict capabilities checking. Users will need 'manage_options' capability (and in MultiSite will have to be a Super Admin) to submit the form.
</p><p>The functions are found in <code><a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/tags/5.0.3/src/wp-admin/includes/plugin.php#L0">wp-admin/includes/plugin.php</a></code> and <code><a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/tags/5.0.3/src/wp-admin/includes/template.php#L0">wp-admin/includes/template.php</a></code>
</p>
<h2><span class="mw-headline" id="Function_Reference">Function Reference</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Settings_API&amp;action=edit&amp;section=2" title="Edit section: Function Reference">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<table cellspacing="10" width="100%">

<tr valign="top">
<td width="50%">
<table class="widefat">

<tr style="background:#464646; color:#d7d7d7;">
<th> <b>Setting Register/Unregister</b>
</th></tr>
<tr>
<td>
<ul><li> <tt><a href="https://codex.wordpress.org/Function_Reference/register_setting" title="Function Reference/register setting"> register_setting()</a></tt></li>
<li> <tt><a href="https://codex.wordpress.org/Function_Reference/unregister_setting" title="Function Reference/unregister setting"> unregister_setting()</a></tt></li></ul>
</td></tr></table>
</td>
<td width="50%">
<table class="widefat">

<tr style="background:#464646; color:#d7d7d7;">
<th> <b>Add Field/Section</b>
</th></tr>
<tr>
<td>
<ul><li> <tt><a href="https://codex.wordpress.org/Function_Reference/add_settings_field" title="Function Reference/add settings field"> add_settings_field()</a></tt></li>
<li> <tt><a href="https://codex.wordpress.org/Function_Reference/add_settings_section" title="Function Reference/add settings section"> add_settings_section()</a></tt></li></ul>
</td></tr></table>
</td></tr></table>
<table cellspacing="10" width="100%">

<tr valign="top">
<td>
<table class="widefat">

<tr style="background:#464646; color:#d7d7d7;">
<th> <b>Options Form Rendering</b>
</th></tr>
<tr>
<td>
<ul><li> <tt><a href="https://codex.wordpress.org/Function_Reference/settings_fields" title="Function Reference/settings fields"> settings_fields()</a></tt></li>
<li> <tt><a href="https://codex.wordpress.org/Function_Reference/do_settings_sections" title="Function Reference/do settings sections"> do_settings_sections()</a></tt></li>
<li> <tt><a href="https://codex.wordpress.org/Function_Reference/do_settings_fields" title="Function Reference/do settings fields"> do_settings_fields()</a></tt></li></ul>
</td></tr></table>
</td>
<td width="50%">
<table class="widefat">

<tr style="background:#464646; color:#d7d7d7;">
<th> <b>Errors</b>
</th></tr>
<tr>
<td>
<ul><li> <tt><a href="https://codex.wordpress.org/Function_Reference/add_settings_error" title="Function Reference/add settings error"> add_settings_error()</a></tt></li>
<li> <tt><a href="https://codex.wordpress.org/Function_Reference/get_settings_errors" title="Function Reference/get settings errors"> get_settings_errors()</a></tt></li>
<li> <tt><a href="https://codex.wordpress.org/Function_Reference/settings_errors" title="Function Reference/settings errors"> settings_errors()</a></tt></li></ul>
</td></tr></table>
</td></tr></table>
<h2><span class="mw-headline" id="Adding_Setting_Fields">Adding Setting Fields</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Settings_API&amp;action=edit&amp;section=3" title="Edit section: Adding Setting Fields">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>You can add new settings fields (basically, an option in the wp_options database table but totally managed for you) to the existing WordPress pages using this function. Your callback function just needs to output the appropriate HTML input and fill it with the old value, the saving will be done behind the scenes. 
You can create your own sections on existing pages using <tt>add_settings_section()</tt> as described below.
</p><p><b>NOTE:</b> You MUST register any options you use with <tt>add_settings_field()</tt> or they won't be saved and updated automatically. See below for details and an example.
</p>
<pre>add_settings_field( $id, $title, $callback, $page, $section = 'default', $args = array() )
</pre>
<ul><li> <b>$id</b> - String for use in the <tt>'id'</tt> attribute of tags.</li>
<li> <b>$title</b> - Title of the field.</li>
<li> <b>$callback</b> - Function that fills the field with the desired inputs as part of the larger form. Name and id of the input should match the $id given to this function. The function should echo its output.</li>
<li> <b>$page</b> -  The type of settings page on which to show the field (general, reading, writing, ...).</li>
<li> <b>$section</b> -  The section of the settings page in which to show the box (default or a section you added with <tt>add_settings_section</tt>, look at the page in the source to see what the existing ones are.)</li>
<li> <b>$args</b> -  Extra arguments passed into the callback function</li></ul>
<h2><span class="mw-headline" id="Adding_Settings_Sections">Adding Settings Sections</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Settings_API&amp;action=edit&amp;section=4" title="Edit section: Adding Settings Sections">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Settings Sections are the groups of settings you see on WordPress settings pages with a shared heading. In your plugin you can add new sections to existing settings pages rather than creating a whole new page. This makes your plugin simpler to maintain and creates fewer new pages for users to learn. You just tell them to change your setting on the relevant existing page. 
</p>
<pre>add_settings_section( $id, $title, $callback, $page )
</pre>
<ul><li> <b>$id</b> - String for use in the 'id' attribute of tags.</li>
<li> <b>$title</b> -  Title of the section.</li>
<li> <b>$callback</b> -  Function that fills the section with the desired content. The function should echo its output.</li>
<li> <b>$page</b> - The type of settings page on which to show the section (general, reading, writing, media etc.)</li></ul>
<h2><span class="mw-headline" id="Registering_Settings">Registering Settings</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Settings_API&amp;action=edit&amp;section=5" title="Edit section: Registering Settings">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre>register_setting( $option_group, $option_name, $args )
</pre>
<pre>unregister_setting( $option_group, $option_name )
</pre>
<p><b>NOTE:</b> <tt>register_setting()</tt> as well as the above mentioned <tt>add_settings_*()</tt> functions should all be called from a <tt>'admin_init'</tt> action hook callback function. Refer to the <a href="#Examples">example</a> below.
</p>
<h2><span class="mw-headline" id="Options_Form_Rendering">Options Form Rendering</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Settings_API&amp;action=edit&amp;section=6" title="Edit section: Options Form Rendering">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>When using the API to add settings to existing options pages, you do not need to be concerned about the form itself, as it has already been defined for the page. When you define a new page from scratch, you need to output a minimal form structure that contains a few tags that in turn output the actual sections and settings for the page.
</p><p>To display the hidden fields and handle security of your options form, the Settings API provides the <tt><a href="https://codex.wordpress.org/Function_Reference/settings_fields" title="Function Reference/settings fields">settings_fields()</a></tt> function.
<code><span style="color: #000000">
settings_fields(&#160;$option_group&#160;);</span>
</code>
</p>
<dl><dt> <tt>$option_group</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#String" title="How to Pass Tag Parameters"><i>string</i></a>) (<i>required</i>) A settings group name. This must match the group name used in <a href="https://codex.wordpress.org/Function_Reference/register_setting" title="Function Reference/register setting"><tt>register_setting()</tt></a>, which is the page slug name on which the form is to appear.
<dl><dd> Default: <i>None</i></dd></dl></dd></dl>
<p>To display the sections assigned to the page and the settings contained within, the Settings API provides the <tt><a href="https://codex.wordpress.org/Function_Reference/do_settings_sections" title="Function Reference/do settings sections">do_settings_sections()</a></tt> function.
<code><span style="color: #000000">
do_settings_sections(&#160;$page&#160;);</span>
</code>
</p>
<dl><dt> <tt>$page</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#String" title="How to Pass Tag Parameters"><i>string</i></a>) (<i>required</i>) The slug name of the page whose settings sections you want to output.  This should match the page name used in <a href="https://codex.wordpress.org/Function_Reference/add_settings_section" title="Function Reference/add settings section"><tt>add_settings_section()</tt></a>.
<dl><dd> Default: <i>None</i></dd></dl></dd></dl>
<p>The <tt><a href="https://codex.wordpress.org/Function_Reference/do_settings_fields" title="Function Reference/do settings fields">do_settings_fields()</a></tt> function is provided to output the fields assigned to a particular page and section. You should not call this function directly, rather use <tt>do_settings_sections()</tt> to output the Section content as well as the associated fields.
</p><p>Your options form also needs a submit button. You can use the <tt><a href="https://codex.wordpress.org/Function_Reference/submit_button" title="Function Reference/submit button">submit_button()</a></tt> function to do this.
</p><p>Finally, you need to output the HTML <tt>&lt;form&gt;</tt> tag defining the action destination of <tt>options.php</tt> and method of <tt>POST</tt>. Here is an example options form code to generate all the sections and fields added to a page who's slug name is <tt>'my-page'</tt>:
</p>
<pre>&lt;form method="POST" action="options.php"&gt;
&lt;?php settings_fields( 'my-page' );	//pass slug name of page, also referred
                                        //to in Settings API as option group name
do_settings_sections( 'my-page' ); 	//pass slug name of page
submit_button();
?&gt;
&lt;/form&gt;</pre>
<h2><span class="mw-headline" id="Examples">Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Settings_API&amp;action=edit&amp;section=7" title="Edit section: Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Adding_a_settings_section_with_a_new_field_in_it">Adding a settings section with a new field in it</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Settings_API&amp;action=edit&amp;section=8" title="Edit section: Adding a settings section with a new field in it">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<pre> &lt;?php 
 // ------------------------------------------------------------------
 // Add all your sections, fields and settings during admin_init
 // ------------------------------------------------------------------
 //
 
 function eg_settings_api_init() {
 	// Add the section to reading settings so we can add our
 	// fields to it
 	add_settings_section(
		'eg_setting_section',
		'Example settings section in reading',
		'eg_setting_section_callback_function',
		'reading'
	);
 	
 	// Add the field with the names and function to use for our new
 	// settings, put it in our new section
 	add_settings_field(
		'eg_setting_name',
		'Example setting Name',
		'eg_setting_callback_function',
		'reading',
		'eg_setting_section'
	);
 	
 	// Register our setting so that $_POST handling is done for us and
 	// our callback function just has to echo the &lt;input&gt;
 	register_setting( 'reading', 'eg_setting_name' );
 } // eg_settings_api_init()
 
 add_action( 'admin_init', 'eg_settings_api_init' );
 
  
 // ------------------------------------------------------------------
 // Settings section callback function
 // ------------------------------------------------------------------
 //
 // This function is needed if we added a new section. This function 
 // will be run at the start of our section
 //
 
 function eg_setting_section_callback_function() {
 	echo '&lt;p&gt;Intro text for our settings section&lt;/p&gt;';
 }
 
 // ------------------------------------------------------------------
 // Callback function for our example setting
 // ------------------------------------------------------------------
 //
 // creates a checkbox true/false option. Other types are surely possible
 //
 
 function eg_setting_callback_function() {
 	echo '&lt;input name="eg_setting_name" id="eg_setting_name" type="checkbox" value="1" class="code" ' . checked( 1, get_option( 'eg_setting_name' ), false ) . ' /&gt; Explanation text';
 }
</pre>
<h4><span class="mw-headline" id="Graphical_Representation_of_where_all_those_code_should_go:">Graphical Representation of where all those code should go:</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Settings_API&amp;action=edit&amp;section=9" title="Edit section: Graphical Representation of where all those code should go:">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<div class="floatleft"><a href="https://codex.wordpress.org/File:editing-settings-api-example.png" class="image"><img alt="editing-settings-api-example.png" src="/images/thumb/7/7e/editing-settings-api-example.png/770px-editing-settings-api-example.png" width="770" height="750" srcset="/images/7/7e/editing-settings-api-example.png 1.5x, /images/7/7e/editing-settings-api-example.png 2x" /></a></div>
<h2><span class="mw-headline" id="External_References">External References</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Settings_API&amp;action=edit&amp;section=10" title="Edit section: External References">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> <a rel="nofollow" class="external text" href="http://kovshenin.com/2012/the-wordpress-settings-api/">The WordPress Settings API</a> by Konstantin Kovshenin, Oct 23 2012</li>
<li> <a rel="nofollow" class="external text" href="http://www.chipbennett.net/2011/02/17/incorporating-the-settings-api-in-wordpress-themes/">Incorporating the Settings API in WordPress Themes</a> by Chip Bennett, Feb 2011</li>
<li> <a rel="nofollow" class="external text" href="http://www.presscoders.com/wordpress-settings-api-explained/">Settings API Explained</a> by David Gwyer</li>
<li> <a rel="nofollow" class="external text" href="http://ottopress.com/2009/wordpress-settings-api-tutorial/">WordPress Settings API Tutorial</a> by Otto</li>
<li> <a rel="nofollow" class="external text" href="http://planetozh.com/blog/2009/05/handling-plugins-options-in-wordpress-28-with-register_setting/">Handling Plugin Options with register_setting()</a> by Ozh</li>
<li> <a rel="nofollow" class="external text" href="http://blog.gneu.org/2010/09/intro-to-the-wordpress-settings-api/">Intro to the WordPress Settings API</a> by BobGneu</li>
<li> Using The Settings API: <a rel="nofollow" class="external text" href="http://wp.tutsplus.com/tutorials/using-the-settings-api-part-1-create-a-theme-options-page/">Part 1</a>, <a rel="nofollow" class="external text" href="http://wp.tutsplus.com/tutorials/using-the-settings-api-part-2-create-a-top-level-admin-menu/">Part 2</a> by <a rel="nofollow" class="external text" href="https://twitter.com/srhnbr/">Sarah Neuber</a></li>
<li> <a rel="nofollow" class="external text" href="https://www.yaconiello.com/blog/how-to-handle-wordpress-settings">Class Based Settings with WordPress</a> by Francis Yaconiello</li>
<li> <a rel="nofollow" class="external text" href="http://www.mendoweb.be/blog/wordpress-settings-api-multiple-sections-on-same-page/">Adding multiple sections on a single settings screen</a> by Mathieu Decaffmeyer</li>
<li> <a rel="nofollow" class="external text" href="http://www.mendoweb.be/blog/wordpress-settings-api-multiple-forms-on-same-page/">Adding multiple forms on a single settings screen</a> by Mathieu Decaffmeyer</li>
<li> <a rel="nofollow" class="external text" href="http://wp.tutsplus.com/tutorials/the-complete-guide-to-the-wordpress-settings-api-part-1/">The Complete Guide To The WordPress Settings API</a> by Tom McFarlin, Jan 31st 2012</li>
<li> <a rel="nofollow" class="external text" href="http://techblog.kjodle.net/2015/07/16/wordpress-settings-api-cheat-sheet/">WordPress Settings API Cheat Sheet</a> by Kenneth Odle, July 16th 2015</li></ul>
<h2><span class="mw-headline" id="Generators">Generators</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Settings_API&amp;action=edit&amp;section=11" title="Edit section: Generators">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> <a rel="nofollow" class="external text" href="http://wpsettingsapi.jeroensormani.com/">WordPress Settings API (options page) Generator</a></li></ul>
<h2><span class="mw-headline" id="PHP_Class">PHP Class</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Settings_API&amp;action=edit&amp;section=12" title="Edit section: PHP Class">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> <a rel="nofollow" class="external text" href="https://github.com/tareq1988/wordpress-settings-api-class/">WordPress settings API Class</a></li></ul>

<!-- 
NewPP limit report
Cached time: 20190211004116
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.032 seconds
Real time usage: 0.037 seconds
Preprocessor visited node count: 150/1000000
Preprocessor generated node count: 556/1000000
Post‐expand include size: 1540/2097152 bytes
Template argument size: 788/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   12.801      1 - -total
 58.73%    7.518      1 - Template:Languages
 25.65%    3.284      2 - Template:Trac
 12.45%    1.593      2 - Template:Parameter
 11.59%    1.484      1 - Template:zh-cn
 11.09%    1.419      1 - Template:pt-br
 10.62%    1.359      1 - Template:ja
  9.53%    1.220      1 - Template:en
  8.50%    1.088      2 - Template:CurrentVersion
-->
