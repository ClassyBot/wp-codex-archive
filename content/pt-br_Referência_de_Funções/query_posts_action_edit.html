<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<a href="https://codex.wordpress.org/Function_Reference/query_posts" title="Function Reference/query posts">English</a> • 
<a href="https://codex.wordpress.org/it:Riferimento_funzioni/query_posts" title="it:Riferimento funzioni/query posts">Italiano</a> • 

<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/テンプレートタグ/query_posts">日本語</a> 
<a href="https://codex.wordpress.org/zh-cn:%E5%87%BD%E6%95%B0%E5%8F%82%E8%80%83/query_posts" title="zh-cn:函数参考/query posts">中文(简体)</a> • 
<a href="https://codex.wordpress.org/pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts" title="pt-br:Referência de Funções/query posts">Português do Brasil</a> • 

 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Descri.C3.A7.C3.A3o"><span class="tocnumber">1</span> <span class="toctext">Descrição</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Ressalvas"><span class="tocnumber">2</span> <span class="toctext">Ressalvas</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Altera_o_loop_principal"><span class="tocnumber">2.1</span> <span class="toctext">Altera o loop principal</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Loops_secund.C3.A1rios"><span class="tocnumber">2.2</span> <span class="toctext">Loops secundários</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Pagina.C3.A7.C3.A3o"><span class="tocnumber">2.3</span> <span class="toctext">Paginação</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Queries_SQL_adicionais"><span class="tocnumber">2.4</span> <span class="toctext">Queries SQL adicionais</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Usage"><span class="tocnumber">3</span> <span class="toctext">Usage</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Preserving_Existing_Query_Parameters"><span class="tocnumber">3.1</span> <span class="toctext">Preserving Existing Query Parameters</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Combining_Parameters"><span class="tocnumber">3.2</span> <span class="toctext">Combining Parameters</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Parameters"><span class="tocnumber">4</span> <span class="toctext">Parameters</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Examples"><span class="tocnumber">5</span> <span class="toctext">Examples</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Exclude_Categories_From_Your_Home_Page"><span class="tocnumber">5.1</span> <span class="toctext">Exclude Categories From Your Home Page</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Retrieve_a_Particular_Post"><span class="tocnumber">5.2</span> <span class="toctext">Retrieve a Particular Post</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#All_Posts_in_a_Category"><span class="tocnumber">5.3</span> <span class="toctext">All Posts in a Category</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Syndication_Feeds"><span class="tocnumber">5.4</span> <span class="toctext">Syndication Feeds</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Passing_variables_to_query_posts"><span class="tocnumber">5.5</span> <span class="toctext">Passing variables to query_posts</span></a>
<ul>
<li class="toclevel-3 tocsection-17"><a href="#Example_1"><span class="tocnumber">5.5.1</span> <span class="toctext">Example 1</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Example_2"><span class="tocnumber">5.5.2</span> <span class="toctext">Example 2</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#Example_3"><span class="tocnumber">5.5.3</span> <span class="toctext">Example 3</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Example_4"><span class="tocnumber">5.5.4</span> <span class="toctext">Example 4</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="#Example_5"><span class="tocnumber">5.5.5</span> <span class="toctext">Example 5</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-22"><a href="#Change_Log"><span class="tocnumber">6</span> <span class="toctext">Change Log</span></a></li>
<li class="toclevel-1 tocsection-23"><a href="#Source_File"><span class="tocnumber">7</span> <span class="toctext">Source File</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="#Resources"><span class="tocnumber">8</span> <span class="toctext">Resources</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="#Related"><span class="tocnumber">9</span> <span class="toctext">Related</span></a>
<ul>
<li class="toclevel-2"><a href="#Articles"><span class="tocnumber">9.1</span> <span class="toctext">Articles</span></a></li>
<li class="toclevel-2"><a href="#Code_Documentation"><span class="tocnumber">9.2</span> <span class="toctext">Code Documentation</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Descri.C3.A7.C3.A3o">Descrição</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=1" title="Edit section: Descrição">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Dentre todas as formas de modificar a query principal do WordPress, <tt>query_posts()</tt> é a mais simples, mas não é a preferida, nem a mais eficiente. Ela ignora a query principal e a substitui por uma nova. Para retornar à query principal depois de uma chamada a <tt>query_posts()</tt>, use a função <tt>wp_reset_query()</tt> e ela será restaurada.
</p><p>É <b>muito preferível e recomendado</b> que ao invés de <tt>query_posts()</tt> você use a action <a href="https://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts" title="Plugin API/Action Reference/pre get posts">pre_get_posts</a>, alterando a query principal - que você pode detectar checando com <a href="https://codex.wordpress.org/Function_Reference/is_main_query" title="Function Reference/is main query">is_main_query</a>.
</p><p>Por exemplo: na página principal você normalmente verá 10 posts. Se quiser mostrar apenas 5 (e não se importar com a paginação), você pode usar <tt>query_posts()</tt> assim:
</p>
<pre>
query_posts( 'posts_per_page=5' );
</pre>
<p>Abaixo você vê a mesma funcionalidade, mas usando <a href="https://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts" title="Plugin API/Action Reference/pre get posts">pre_get_posts</a> no arquivo functions.php:
</p>
<pre>
function five_posts_on_homepage( $query ) {
    if ( $query-&gt;is_home() &amp;&amp; $query-&gt;is_main_query() ) {
        $query-&gt;set( 'posts_per_page', '5' );
    }
}
add_action( 'pre_get_posts', 'five_posts_on_homepage' );
</pre>
<h2><span class="mw-headline" id="Ressalvas">Ressalvas</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=2" title="Edit section: Ressalvas">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><tt>query_posts()</tt> é somente uma dentre várias maneiras de buscar informações no banco de dados e gerar uma lista de posts. Antes de se decidir por ela, tenha certeza que conhece as desvantagens.
</p>
<h3><span class="mw-headline" id="Altera_o_loop_principal">Altera o loop principal</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=3" title="Edit section: Altera o loop principal">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><tt>query_posts()</tt> foi criada para alterar o loop principal. Ela faz isso substituindo a query usada para gerar o conteúdo do loop principal. A cada vez que você usar <tt>query_posts()</tt>, as variáveis globais relacionadas aos posts e as <a href="https://codex.wordpress.org/Template_Tags" title="Template Tags">Template Tags</a> também serão alteradas - isso pode ou não ser o que resultado que você deseja.
</p>
<h3><span class="mw-headline" id="Loops_secund.C3.A1rios">Loops secundários</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=4" title="Edit section: Loops secundários">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Para criar listas secundárias - por exemplo, uma lista de posts relacionados no rodapé ou uma lista de links na barra lateral - experimente criar uma nova instância da classe <a href="https://codex.wordpress.org/Class_Reference/WP_Query" title="Class Reference/WP Query">WP_Query</a>, ou use <a href="https://codex.wordpress.org/Function_Reference/get_posts" title="Function Reference/get posts" class="mw-redirect">get_posts()</a>.
</p><p>Se você absolutamente necessita usar <tt>query_posts()</tt>, então certifique-se de chamar <tt>wp_reset_query()</tt> depois que usar os dados.
</p>
<h3><span class="mw-headline" id="Pagina.C3.A7.C3.A3o">Paginação</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=5" title="Edit section: Paginação">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>A paginação não vai funcionar corretamente a menos que você use o argumento 'paged' da forma correta: <a href="https://codex.wordpress.org/Pagination#Adding_the_.22paged.22_parameter_to_a_query" title="Pagination">adding the paged parameter</a>
</p>
<h3><span class="mw-headline" id="Queries_SQL_adicionais">Queries SQL adicionais</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=6" title="Edit section: Queries SQL adicionais">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>If you use <tt>query_posts</tt> within a template page, WordPress will have already executed the database query and retrieved the records by the time it gets to your template page (that's how it knew which template page to serve up!). So when you over-ride the default query with <tt>query_posts()</tt>, you're essentially throwing away the default query and its results and re-executing another query against the database.
</p><p>This is not necessarily a problem, especially if you're dealing with a smaller blog-based site. Developers of large sites with big databases and heavy visitor traffic may wish to consider alternatives, such as modifying the default request directly (before it's called). The <a href="https://codex.wordpress.org/Plugin_API/Filter_Reference/request" title="Plugin API/Filter Reference/request">request</a> filter can be used to achieve exactly this.
</p><p>The 'parse_query' and the '<a href="https://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts" title="Plugin API/Action Reference/pre get posts">pre_get_posts</a>' filters are also available to modify the internal $query object that is used to generate the SQL to query the database.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=7" title="Edit section: Usage">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&#160;The&#160;Query<br /></span><span style="color: #0000BB">query_posts</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$args&#160;</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&#160;The&#160;Loop<br /></span><span style="color: #007700">while&#160;(&#160;</span><span style="color: #0000BB">have_posts</span><span style="color: #007700">()&#160;)&#160;:&#160;</span><span style="color: #0000BB">the_post</span><span style="color: #007700">();<br />&#160;&#160;&#160;&#160;echo&#160;</span><span style="color: #DD0000">'&lt;li&gt;'</span><span style="color: #007700">;<br />&#160;&#160;&#160;&#160;</span><span style="color: #0000BB">the_title</span><span style="color: #007700">();<br />&#160;&#160;&#160;&#160;echo&#160;</span><span style="color: #DD0000">'&lt;/li&gt;'</span><span style="color: #007700">;<br />endwhile;<br /><br /></span><span style="color: #FF8000">//&#160;Reset&#160;Query<br /></span><span style="color: #0000BB">wp_reset_query</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
Place a call to <tt>query_posts()</tt> in one of your <a href="https://codex.wordpress.org/Templates" title="Templates">Template</a> files before <a href="https://codex.wordpress.org/The_Loop" title="The Loop">The Loop</a> begins. The <tt>wp_query</tt> object will generate a new SQL query using your parameters. When you do this, WordPress ignores the other parameters it receives via the URL (such as page number or category). 
</p>
<h3><span class="mw-headline" id="Preserving_Existing_Query_Parameters">Preserving Existing Query Parameters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=8" title="Edit section: Preserving Existing Query Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>If you want to preserve the original query parameter information that was used to generate the current query, and then add or over-ride some parameters, you can use the <tt>$query_string</tt> global variable in the call to <tt>query_posts()</tt>.
</p><p>For example, to set the display order of the posts without affecting the rest of the query string, you could place the following before <a href="https://codex.wordpress.org/The_Loop" title="The Loop">The Loop</a>:
</p>
<pre>
global $query_string;
query_posts( $query_string . '&amp;order=ASC' );
</pre>
<p>When using <tt>query_posts()</tt> in this way, the quoted portion of the parameter <i>must</i> begin with an ampersand (&amp;).
</p><p>Or alternatively, you can merge the original query array into your parameter array:
</p>
<pre>
global $wp_query;
$args = array_merge( $wp_query-&gt;query_vars, array( 'post_type' =&gt; 'product' ) );
query_posts( $args );
</pre>
<h3><span class="mw-headline" id="Combining_Parameters">Combining Parameters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=9" title="Edit section: Combining Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>You may have noticed from some of the examples above that you combine parameters with an ampersand (&amp;), like so: 
</p>
<pre>
query_posts( 'cat=3&amp;year=2004' );
</pre>
<p>Posts for category 13, for the current month on the main page:
</p>
<pre>
if ( is_home() ) {
	query_posts( $query_string . '&amp;cat=13&amp;monthnum=' . date( 'n', current_time( 'timestamp' ) ) );
}
</pre>
<p>At 2.3 this combination will return posts belong to both Category 1 AND 3, showing just two (2) posts, in descending order by the title:
</p>
<pre>
query_posts( array( 'category__and' =&gt; array(1,3), 'posts_per_page' =&gt; 2, 'orderby' =&gt; 'title', 'order' =&gt; 'DESC' ) );
</pre>
<p>The following returns all posts that belong to category 1 and are tagged "apples"
</p>
<pre>
query_posts( 'cat=1&amp;tag=apples' );
</pre>
<p>You can search for several tags using +
</p>
<pre>
query_posts( 'cat=1&amp;tag=apples+apples' );
</pre>
<h2><span class="mw-headline" id="Parameters">Parameters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=10" title="Edit section: Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b>Note:</b> Parameter details can be found in the <a href="https://codex.wordpress.org/Class_Reference/WP_Query#Parameters" title="Class Reference/WP Query">Parameter section of the WP_Query class article</a>.
</p><p>The examples below also work with the WP_Query object.
</p>
<h2><span class="mw-headline" id="Examples">Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=11" title="Edit section: Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Exclude_Categories_From_Your_Home_Page">Exclude Categories From Your Home Page</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=12" title="Edit section: Exclude Categories From Your Home Page">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Placing this code in <tt>index.php</tt> file will cause the home page to display posts from all categories <i>except</i> category ID 3.
</p>
<pre>
&lt;?php
if ( is_home() ) {
	query_posts( 'cat=-3' );
}
?&gt;
</pre>
<p>You can also add some more categories to the exclude-list (tested with WP 3.3.1):
</p>
<pre>
&lt;?php
if ( is_home() ) {
	query_posts( 'cat=-1,-2,-3' );
}
?&gt;
</pre>
<h3><span class="mw-headline" id="Retrieve_a_Particular_Post">Retrieve a Particular Post</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=13" title="Edit section: Retrieve a Particular Post">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>To retrieve a particular post, you could use the following:
</p>
<pre>
query_posts( 'p=5' );
</pre>
<p><b>Note:</b> If the particular post is an attachment, you have to use <i>attachment_id</i> instead of <i>p</i>:
</p>
<pre>
query_posts( 'attachment_id=5' );
</pre>
<p>If you want to use the <i>Read More</i> functionality with this query, you will need to set the global <tt>$more</tt> variable to 0.
</p>
<pre>
&lt;?php
// retrieve one post with an ID of 5
query_posts( 'p=5' );

// set $more to 0 in order to only get the first part of the post
global $more;
$more = 0;

// the Loop
while (have_posts())&#160;: the_post();
	the_content( 'Read the full post &#187;' );
endwhile;
?&gt;
</pre>
<h3><span class="mw-headline" id="All_Posts_in_a_Category">All Posts in a Category</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=14" title="Edit section: All Posts in a Category">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The "Blog pages show at most" parameter in Settings &gt; Reading can influence your results.  To overcome this, add the 'posts_per_page' parameter.  For example:
</p>
<pre>
query_posts( array ( 'category_name' =&gt; 'my-category-slug', 'posts_per_page' =&gt; -1 ) );
</pre>
<p>This will returns ALL posts from the category.
</p><p>However, for subcategories (or child categories), 'The Category Name' doesn't always work. Rather use 'category-slug' instead. See <a href="https://codex.wordpress.org/Function_Reference/is_category" title="Function Reference/is category">Function_Reference/is_category</a>.
</p>
<pre>
if (is_category('category-slug')): 

	 query_posts(array('category_name' =&gt; 'my-category-slug', 'posts_per_page' =&gt; -1 )); 

endif; 
</pre>
<h3><span class="mw-headline" id="Syndication_Feeds">Syndication Feeds</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=15" title="Edit section: Syndication Feeds">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The "Syndication feeds show the most recent" or '<tt>posts_per_rss</tt>' parameters in Settings &gt; Reading will overwrite any '<tt>posts_per_page</tt>' parameter in a query used in a feed.
</p><p>To overcome use (for example in a a custom ics feed, where all matching posts are required), use the "posts_limit" filter as follows:
</p>
<pre>
if ( isset ( $query-&gt;query_vars['feed'] ) and ( $query-&gt;query_vars['feed'] == 'ics' ) )
{
	add_filter( 'post_limits', '__return_empty' );
}
</pre>
<h3><span class="mw-headline" id="Passing_variables_to_query_posts">Passing variables to query_posts</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=16" title="Edit section: Passing variables to query posts">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>You can pass a variable to the query with two methods, depending on your needs. As with other examples, place these above your Loop:
</p>
<h4><span class="mw-headline" id="Example_1">Example 1</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=17" title="Edit section: Example 1">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>In this example, we concatenate the query before running it. First assign the variable, then concatenate and then run it. Here we're pulling in a category variable from elsewhere. 
</p>
<pre>
// assign the variable as current category
$categoryvariable = $cat;

// concatenate the query
$args = 'cat=' . $categoryvariable . '&amp;orderby=date&amp;order=ASC';

// run the query
query_posts( $args );
</pre>
<h4><span class="mw-headline" id="Example_2">Example 2</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=18" title="Edit section: Example 2">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>In this next example, the double quotes tell PHP to treat the enclosed as an expression. For this example, we are getting the current month and the current year, and telling <tt>query_posts()</tt> to bring us the posts for the current month/year, and in this case, listing in ascending order so we get the oldest post at the top of the page. 
</p>
<pre>
$current_year = date('Y');
$current_month = date('m');

query_posts( "cat=22&amp;year=$current_year&amp;monthnum=$current_month&amp;order=ASC" );
</pre>
<h4><span class="mw-headline" id="Example_3">Example 3</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=19" title="Edit section: Example 3">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>This example explains how to generate a complete list of posts, dealing with pagination. We can use the default <tt>$query_string</tt> telling <tt>query_posts()</tt> to bring us a full posts listing.  We can also modify the <tt>posts_per_page</tt> query parameter from -1 to the number of posts you want to show on each page; in this last case, you'll probably want to use <a href="https://codex.wordpress.org/Template_Tags/posts_nav_link" title="Template Tags/posts nav link" class="mw-redirect">posts_nav_link()</a> to navigate the generated archive.
</p>
<pre>
query_posts( $query_string . '&amp;posts_per_page=-1' );
</pre>
<h4><span class="mw-headline" id="Example_4">Example 4</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=20" title="Edit section: Example 4">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>If you don't need to use the <tt>$query_string</tt> variable, another method exists that is more clear and readable, in some more complex cases. This method puts the parameters into an array. The same query as in Example 2 above could be done like this:
</p>
<pre>
$args = array(
	'cat'      =&gt; 22,
	'year'     =&gt; $current_year,
	'monthnum' =&gt; $current_month,
	'order'    =&gt; 'ASC'
);
query_posts( $args );
</pre>
<p>As you can see, with this approach, every variable can be put on its own line, for easier reading.
</p>
<h4><span class="mw-headline" id="Example_5">Example 5</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=21" title="Edit section: Example 5">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>It is even possible to use the array style (Example 4) to query multiple taxonomies. Simply supply the taxonomy slug with a string of comma-separated values (each value being one term). In the example below, we will get all movie posts starring either Bruce Campbell <i>or</i> Chuck Norris.
</p>
<pre>
$args = array(
	'post_type'=&gt; 'movie',
	'actor'    =&gt; 'Bruce Campbell, Chuck Norris',
	'order'    =&gt; 'ASC'
);
query_posts( $args );
</pre>
<h2><span class="mw-headline" id="Change_Log">Change Log</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=22" title="Edit section: Change Log">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Since: <a href="https://codex.wordpress.org/Version_1.5" title="Version 1.5">1.5.0</a>
</p>
<h2><span class="mw-headline" id="Source_File">Source File</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=23" title="Edit section: Source File">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><tt>query_posts()</tt> is located in <code><a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/trunk/src/wp-includes/query.php#L89">wp-includes/query.php</a></code>.
</p>
<h2><span class="mw-headline" id="Resources">Resources</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=24" title="Edit section: Resources">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>For more in-depth discussion of how WordPress generates and handles its queries, review these articles: <a href="https://codex.wordpress.org/Query_Overview" title="Query Overview">Query Overview</a> and <a href="https://codex.wordpress.org/Custom_Queries" title="Custom Queries">Custom Queries</a></li>
<li>Customize the Default Query properly using 'pre_get_posts' - <a rel="nofollow" class="external text" href="http://www.billerickson.net/customize-the-wordpress-query/#example-category">Bill Erickson - Customize the Wordpress Query</a> or <a rel="nofollow" class="external text" href="http://developer.wordpress.com/2012/05/14/querying-posts-without-query_posts/">John James Jacoby - Querying Posts Without query_posts</a></li>
<li>You don't know Query <a rel="nofollow" class="external text" href="http://www.slideshare.net/andrewnacin/you-dont-know-query-wordcamp-netherlands-2012">- Slides from WordCamp Netherlands 2012 by Andrew Nacin</a></li></ul>
<h2><span class="mw-headline" id="Related">Related</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%B5es/query_posts%26action%3Dedit&amp;action=edit&amp;section=25" title="Edit section: Related">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Articles">Articles</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Template:Query_Tags&amp;action=edit&amp;section=T-1" title="Template:Query Tags">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> Article: <a href="https://codex.wordpress.org/The_Loop" title="The Loop">The Loop</a> - A basic overview of its use of query within the WordPress loop.</li>
<li> Article: <a href="https://codex.wordpress.org/Query_Overview" title="Query Overview">Query Overview</a> - Explanation of how to determine which queries generate WordPress.</li>
<li> Article: <a href="https://codex.wordpress.org/Custom_Queries" title="Custom Queries"> Customizing Queries via Hook</a></li>
<li> Article: <a href="https://codex.wordpress.org/Displaying_Posts_Using_a_Custom_Select_Query" title="Displaying Posts Using a Custom Select Query"> View Articles MYSQL query using custom</a></li>
<li> Article: <a href="https://codex.wordpress.org/Making_Advanced_Taxonomy_Queries" title="Making Advanced Taxonomy Queries"> Build advanced queries on Taxonomies</a></li>
<li> Article: <a href="https://codex.wordpress.org/Making_Custom_Queries_using_Offset_and_Pagination" title="Making Custom Queries using Offset and Pagination"> Build custom query using Offset and pagination</a></li></ul>
<h3><span class="mw-headline" id="Code_Documentation">Code Documentation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Template:Query_Tags&amp;action=edit&amp;section=T-2" title="Template:Query Tags">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> Class: <a href="https://codex.wordpress.org/Class_Reference/WP_Query" title="Class Reference/WP Query"> WP_Query</a> - Detailed Overview of class WP_Query</li>
<li> Class: <a href="https://codex.wordpress.org/Class_Reference/WP_Comment_Query" title="Class Reference/WP Comment Query"> WP_Comment_Query</a> - Class for comment-related queries</li>
<li> Class: <a href="https://codex.wordpress.org/Class_Reference/WP_User_Query" title="Class Reference/WP User Query"> WP_User_Query</a> - Class for user-related queries</li>
<li> Object: <a href="https://codex.wordpress.org/Class_Reference/wpdb" title="Class Reference/wpdb"> $wpdb</a> - Overview on the use of the $wpdb object</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/set_query_var" title="Function Reference/set query var"> set_query_var()</a></li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/get_query_var" title="Function Reference/get query var"> get_query_var()</a></li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/query_posts" title="Function Reference/query posts"> query_posts()</a> - Create additional custom query</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/get_post" title="Function Reference/get post"> get_post()</a> - Take an ID of an item and return the records in the database for that article</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/get_posts" title="Function Reference/get posts" class="mw-redirect"> get_posts()</a> - A specialized function that returns an array of items</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/get_pages" title="Function Reference/get pages"> get_pages()</a> - A specialized function that returns an array of pages</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/have_posts" title="Function Reference/have posts"> have_posts()</a> - A condition that determines whether the query returned an article</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/the_post" title="Function Reference/the post"> the_post()</a> - Used to automatically set the loop after a query</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/rewind_posts" title="Function Reference/rewind posts"> rewind_posts()</a> - Clears the current loop</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/setup_postdata" title="Function Reference/setup postdata"> setup_postdata()</a> - Sets the data for a single query result within a loop</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/wp_reset_postdata" title="Function Reference/wp reset postdata"> wp_reset_postdata()</a> - Restores the previous query (usually after a loop within another loop)</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/wp_reset_query" title="Function Reference/wp reset query"> wp_reset_query()</a></li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/is_main_query" title="Function Reference/is main query"> is_main_query()</a> - Ensures that the query that is being changed is only the main query</li>
<li> Action Hook: <a href="https://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts" title="Plugin API/Action Reference/pre get posts"> pre_get_posts</a> - Change WordPress queries before they are executed</li>
<li> Action Hook: <a href="https://codex.wordpress.org/Plugin_API/Action_Reference/the_post" title="Plugin API/Action Reference/the post"> the_post</a> - Modify the post object after query</li>
<li> Filter Hook: <a href="https://codex.wordpress.org/Plugin_API/Filter_Reference/found_posts" title="Plugin API/Filter Reference/found posts"> found_posts</a> - Changes the value of the object found_posts WP_Query</li></ul>
<div style="background-color:#F7F7F7; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">See also index of <a href="https://codex.wordpress.org/Function_Reference" title="Function Reference">Function Reference</a> and index of <a href="https://codex.wordpress.org/Template_Tags" title="Template Tags">Template Tags</a>.</div>


