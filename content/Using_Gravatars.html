<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<strong class="selflink">English</strong> • 
<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/Gravatar">の使い方 日本語</a> 
<a href="https://codex.wordpress.org/pt-br:Usando_o_Gravatar" title="pt-br:Usando o Gravatar">Português do Brasil</a> • 

<a href="https://codex.wordpress.org/zh-tw:%E4%BD%BF%E7%94%A8Gravatar" title="zh-tw:使用Gravatar">中文(繁體)</a> • 
 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<p>Gravatars are <b>Globally Recognized Avatars</b>.  Integrated into WordPress, Gravatars are an avatar or gravatar is an icon, or representation, of a user in a shared virtual reality, such as a forum, chat, website, or any other form of online community in which the user(s) wish to have something to distinguish themselves from other users. 
</p>
<div class="thumb tright"><div class="thumbinner" style="width:179px;"><a href="https://codex.wordpress.org/File:gravatars-in-comments.png" class="image"><img alt="" src="/images/d/dd/gravatars-in-comments.png" width="177" height="378" class="thumbimage" /></a>  <div class="thumbcaption">Gravatars in blog post comments</div></div></div>Created by Tom Werner, gravatars make it possible for a person to have one avatar across the entire web. Avatars are usually an 80px by 80px image that the user will create themselves.  
<p>A Gravatar is essentially the same thing, but they are all hosted on a single server and are called up by encrypting the users' email address via the MD5 algorithm.  So instead of having one avatar on one forum you visit, and another at a blog you visit, you could have the same avatar at both.
</p><p>Gravatars are now integrated into WordPress. The following is a historical reference for Gravatars in WordPress. For information on how to use and customize gravatars, see <a href="https://codex.wordpress.org/How_to_Use_Gravatars_in_WordPress" title="How to Use Gravatars in WordPress">How to Use Gravatars in WordPress</a>.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#How_a_Gravatar_is_Constructed"><span class="tocnumber">1</span> <span class="toctext">How a Gravatar is Constructed</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Gravatars_in_WordPress"><span class="tocnumber">2</span> <span class="toctext">Gravatars in WordPress</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Theme_Support_for_WordPress_2.5.2B"><span class="tocnumber">2.1</span> <span class="toctext">Theme Support for WordPress 2.5+</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Backwards_Compatibility"><span class="tocnumber">2.2</span> <span class="toctext">Backwards Compatibility</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#Checking_for_the_Existence_of_a_Gravatar"><span class="tocnumber">3</span> <span class="toctext">Checking for the Existence of a Gravatar</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Resources"><span class="tocnumber">4</span> <span class="toctext">Resources</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#See_Also"><span class="tocnumber">5</span> <span class="toctext">See Also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="How_a_Gravatar_is_Constructed">How a Gravatar is Constructed</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Gravatars&amp;action=edit&amp;section=1" title="Edit section: How a Gravatar is Constructed">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>A Gravatar is a dynamic image resource that is requested from a server. The request URL is presented here, broken into its segments. The URL always begins with:
</p>
<pre>http://www.gravatar.com/avatar/
</pre>
<p>The next part is a hashed version of the user's email address. The email address MUST be lower-cased first, then have all whitespace removed, before md5 hashing it.
</p>
<pre>279aa12c3326f87c460aa4f31d18a065
</pre>
<p>An optional <tt>rating</tt> (or <tt>r</tt>) parameter may follow with a value of <tt>[ G | PG | R | X ]</tt> which determines the highest rating (inclusive) that will be returned.
</p>
<pre>?r=R
</pre>
<p>An optional <tt>size</tt> (or <tt>s</tt>) parameter may follow that specifies the desired width and height of the Gravatar. Valid values are from 1 to 512 inclusive. Any size other than 80 will cause the original Gravatar image to be resampled using bicubic resampling before output.
</p>
<pre>&amp;s=120
</pre>
<p>An optional <tt>default</tt> (or <tt>d</tt>) parameter may follow that specifies the full <a href="https://codex.wordpress.org/Glossary#URL" title="Glossary">URL</a>, encoded URL, protocol included, of a GIF, JPEG, or PNG image that should be returned if either the requested email address has no associated gravatar, or that Gravatar has a rating higher than is allowed by the <tt>rating</tt> parameter. It may also contain one of the following options:
</p>
<ul><li> '404' (return a 404)</li>
<li> 'mm' (mysteryman)</li>
<li> 'identicon' (unique, generated image)</li>
<li> 'monsterid' (unique, generated image)</li>
<li> 'wavatar' (unique, generated image)</li></ul>
<pre>&amp;d=http%3A%2F%2Fwww.somesite.com%2Fsomeimage.jpg
</pre>
<h2><span class="mw-headline" id="Gravatars_in_WordPress">Gravatars in WordPress</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Gravatars&amp;action=edit&amp;section=2" title="Edit section: Gravatars in WordPress">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="thumb tright"><div class="thumbinner" style="width:182px;"><a href="https://codex.wordpress.org/File:gravatarCWE.gif" class="image"><img alt="" src="/images/9/92/gravatarCWE.gif" width="180" height="139" class="thumbimage" /></a>  <div class="thumbcaption">An example of a Gravatar</div></div></div>As of WordPress 2.5, Gravatars are built-in and require no additional Plugins for basic usage and management.
<p>WordPress 2.5 marries theme authors and casual WordPress users together with support for Gravatars in the WordPress Administration Panels. Theme authors have an option to include Gravatars in their designs, and are recommended to do so. WordPress users can easily control their Gravatar usage in the <b>Settings &gt; Discussion</b> Administration Panel.
</p><p>WordPress users can change:
</p>
<ul><li> Whether Avatars (aka, Gravatars) are displayed or not.</li>
<li> Which rating of Avatars are shown.</li></ul>
<h3><span class="mw-headline" id="Theme_Support_for_WordPress_2.5.2B">Theme Support for WordPress 2.5+</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Gravatars&amp;action=edit&amp;section=3" title="Edit section: Theme Support for WordPress 2.5+">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The function to add Gravatars to your theme is called: <code><a href="https://codex.wordpress.org/Function_Reference/get_avatar" title="Function Reference/get avatar">get_avatar</a></code>. The function returns a complete image HTML tag of the Avatar.
</p><p>The function is called as follows:
</p>
<pre>  &lt;?php 
   echo get_avatar( $id_or_email, $size = '96', $default = '&lt;path_to_url&gt;' ); 
   ?&gt;
</pre>
<p>The parameters are:
</p>
<ul><li> id_or_email <b>(required)</b>: Author’s User ID (an integer or string), an E-mail Address (a string) or the comment object from the comment loop. <i>Note: with most comment templates you can use <code>$comment</code> here, in order to display the gravatar of the commenter. In other templates within The Loop (for WordPress 2.7 and lower), you can use <code>get_the_author_id()</code> (deprecated in WordPress 2.8). For WordPress 2.8, please use <code>get_the_author_meta('user_email')</code></i>.</li>
<li> size <b>(optional)</b>: Avatar display size (max is 512).</li>
<li> default <b>(optional)</b>: Absolute location of the default avatar to use (used when the person has no email address associated with them). If this is left blank then the gravatar you see <a rel="nofollow" class="external text" href="http://www.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536">here</a> will be used as the default avatar.</li></ul>
<p>Some things to note here:
</p>
<ul><li> The default Avatar size is 96x96 if you do not set the size using the size paramater.</li>
<li> The default Avatar is Gravatar</li>
<li> The Avatars will show only if the user allows them in the WP Admin Panel (enabled by default).</li>
<li> The Avatars will only show based on the rating the user has selected in the WordPress Administration Panels.</li></ul>
<p>Code output:
</p><p>The default output is when using the above function is listed below. Various classes are applied to img element to help you with element styling.
</p>
<pre>
&lt;img alt='' src='http://gravatarurl_or_default'
class='avatar avatar-$size' height='$size' width='$size' /&gt;
</pre>
<p>If the gravatar reverts to the default image due to a lack of an e-mail address (i.e. a pingback or trackback), whether you have specified a default or not, the <code>img</code> element will also be given a CSS class of <code>avatar-default</code>.
</p>
<h3><span class="mw-headline" id="Backwards_Compatibility">Backwards Compatibility</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Gravatars&amp;action=edit&amp;section=4" title="Edit section: Backwards Compatibility">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>If you wish to develop a WordPress Theme with Avatars for 2.5 and below, add a check for the Gravatar function to the code: 
</p>
<pre>   if (function_exists('get_avatar')) {
      echo get_avatar($email);
   } else {
      //alternate gravatar code for &lt; 2.5
      $grav_url = "http://www.gravatar.com/avatar/" . 
         md5(strtolower($email)) . "?d=" . urlencode($default) . "&amp;s=" . $size;
      echo "&lt;img src='$grav_url'/&gt;";
   }
</pre>
<h2><span class="mw-headline" id="Checking_for_the_Existence_of_a_Gravatar">Checking for the Existence of a Gravatar</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Gravatars&amp;action=edit&amp;section=5" title="Edit section: Checking for the Existence of a Gravatar">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>If you request a Gravatar image and the email you request doesn't have an account in the Gravatar system it returns a default image to you. 
</p><p>In some cases this might not be what you want, instead, you might want to know whether you will get back a real gravatar or if it will just be the default.
</p><p>Example situations:
</p>
<ul><li> you want to show local avatars if the user has no gravatar</li>
<li> you want to warn users that they have no gravatar that they should sign up for one, but you don't want to bother users who are already signed up. </li></ul>
<p>WARNING: You need to understand PHP to make use of the information below.
</p><p>The trick to do this is to specify "404" as the default. In this case, the gravatar service will return a 404 error if no gravatar exists, instead of returning some default image. A real image will get a 200 code. It is best to check for 200, as some other errors might be returned as well, for other cases.
</p><p>Here is an simple example validation function using HTTP headers. You will need to modify it for your needs:
</p>
<pre>function validate_gravatar($email) {
	// Craft a potential url and test its headers
	$hash = md5(strtolower(trim($email)));
	$uri = '<a rel="nofollow" class="external free" href="http://www.gravatar.com/avatar/'">http://www.gravatar.com/avatar/'</a> . $hash . '?d=404';
	$headers = @get_headers($uri);
	if (!preg_match("|200|", $headers[0])) {
		$has_valid_avatar = FALSE;
	} else {
		$has_valid_avatar = TRUE;
	}
	return $has_valid_avatar;
}
</pre>
<p>A more full featured validation function that uses the <a href="https://codex.wordpress.org/HTTP_API" title="HTTP API">HTTP API</a> and <a href="https://codex.wordpress.org/Class_Reference/WP_Object_Cache" title="Class Reference/WP Object Cache">Object Cache</a> can be found <a rel="nofollow" class="external text" href="https://gist.github.com/justinph/5197810">here</a>.
</p>
<h2><span class="mw-headline" id="Resources">Resources</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Gravatars&amp;action=edit&amp;section=6" title="Edit section: Resources">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> <a rel="nofollow" class="external text" href="http://www.gravatar.com/">Gravatar</a></li>
<li> <a href="https://codex.wordpress.org/How_to_Use_Gravatars_in_WordPress" title="How to Use Gravatars in WordPress">How to Use Gravatars in WordPress</a></li>
<li> <a rel="nofollow" class="external text" href="http://www.gravatar.com/implement.php">Gravatars Implement Page</a></li>
<li> <a rel="nofollow" class="external text" href="http://wpsites.net/wordpress-tips/how-to-get-the-url-to-a-gravatar-image/">Get The URL To a Gravatar Image</a></li>
<li> <a rel="nofollow" class="external text" href="http://txfx.net/code/wordpress/gravatar-signup/">Gravatar Signup Plugin</a></li>
<li> <a rel="nofollow" class="external text" href="http://weblogtoolscollection.com/archives/2008/03/03/gravatars-and-wordpress-25/">Gravatars &amp; WordPress 2.5</a></li>
<li> <a rel="nofollow" class="external text" href="http://www.themelab.com/2008/05/09/add-gravatar-support-to-your-wordpress-comments/">Add Gravatar Support to Your WordPress Comments</a></li>
<li> <a rel="nofollow" class="external text" href="http://wordpress.org/support/topic/190660?replies=13">WP Forum post about checking for existence of Gravatars</a></li></ul>
<h2><span class="mw-headline" id="See_Also">See Also</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Gravatars&amp;action=edit&amp;section=7" title="Edit section: See Also">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><a href="https://codex.wordpress.org/Function_Reference/get_avatar" title="Function Reference/get avatar">get_avatar</a>
</p>

