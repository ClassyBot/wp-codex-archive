<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<a href="https://codex.wordpress.org/Custom_Fields" title="Custom Fields">English</a> • 
<a href="https://codex.wordpress.org/es:Using_Custom_Fields" title="es:Using Custom Fields">Español</a> • 

<a href="https://codex.wordpress.org/nl:Custom_Fields" title="nl:Custom Fields">Nederlands</a> • 
<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/カスタムフィールドの使い方">日本語</a> 
<a href="https://codex.wordpress.org/mk:%D0%9F%D0%BE%D1%81%D0%B5%D0%B1%D0%BD%D0%B8_%D0%9F%D0%BE%D0%BB%D0%B8%D1%9A%D0%B0" title="mk:Посебни Полиња">Македонски</a> • 
<a href="https://codex.wordpress.org/pt-br:Campos_Personalizados" title="pt-br:Campos Personalizados">Português do Brasil</a> • 

<a href="https://codex.wordpress.org/%D0%9F%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BB%D1%8F" title="Произвольные поля">Русский</a> • 

<strong class="selflink">中文(简体)</strong> • 
 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.E5.87.BD.E6.95.B0.E5.8F.82.E8.80.83"><span class="tocnumber">1</span> <span class="toctext">函数参考</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.E4.BD.BF.E7.94.A8.E6.96.B9.E6.B3.95"><span class="tocnumber">2</span> <span class="toctext">使用方法</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Displaying_Custom_Fields"><span class="tocnumber">3</span> <span class="toctext">Displaying Custom Fields</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E6.A0.8F.E7.9B.AE.E7.9A.84.E9.AB.98.E7.BA.A7.E5.BA.94.E7.94.A8"><span class="tocnumber">4</span> <span class="toctext">自定义栏目的高级应用</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Getting_Custom_Fields"><span class="tocnumber">4.1</span> <span class="toctext">Getting Custom Fields</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#Implementation_Details"><span class="tocnumber">4.1.1</span> <span class="toctext">Implementation Details</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="#PostMeta_Functions"><span class="tocnumber">4.2</span> <span class="toctext">PostMeta Functions</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#Internal_Functions"><span class="tocnumber">4.2.1</span> <span class="toctext">Internal Functions</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Template_Functions"><span class="tocnumber">4.2.2</span> <span class="toctext">Template Functions</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<p>文章作者可以在 WordPress 中为其文章指定自定义栏目。类似任意的附加信息通常叫做<b>属性</b>。这些<b>属性</b>可以是：
</p>
<ul><li> <b>心情：</b>开心</li>
<li> <b>正在阅读：</b>灰姑娘</li>
<li> <b>正在收听：</b>加价热潮</li>
<li> <b>天气：</b>闷热</li></ul>
<p>通过稍微多写的代码，还可以实现更多操作。比如使用<b>属性</b>来储存文章的到期时间。
</p><p>属性的数据结构是<b>键—值一一对应</b>（key/value pair）。<b>键</b>就是属性元素的名称；<b>值</b>是会出现在信息所属的文章的属性列表中的信息。
</p><p><b>键</b>可以在一篇文章中使用多次。比如，当您在阅读两本不同的书的时候（没准一本是上班时间阅读的技术书籍，一本是家中阅读的小说），您可以创建“正在阅读”键，然后在同一文章中使用两次。
</p><p>这是在您文章中，信息可能的展现形式：
</p>
<div style="background-color:#FAEBD7; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">本文已被<a href="https://codex.wordpress.org/Category:zh-cn:Stubs" title="Category:zh-cn:Stubs">标记</a>为未完成状态。您可以将其<b><a rel="nofollow" class="external text" href="https://codex.wordpress.org/index.php?title=zh-cn:%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%8F%E7%9B%AE&amp;action=edit">补充或翻译完整</a></b>，以此<a href="https://codex.wordpress.org/Codex:Contributing" title="Codex:Contributing">帮助</a>完善 Codex。</div>
<div style="border:1px solid blue; width:50%; margin: 20px; padding:20px"><b>Currently  Reading</b>: <i>Calvin and Hobbes</i>
<p><b>Today's Mood</b>: <i>Jolly and Happy</i>
</p>
</div>
<h2><span class="mw-headline" id=".E5.87.BD.E6.95.B0.E5.8F.82.E8.80.83">函数参考</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%8F%E7%9B%AE&amp;action=edit&amp;section=1" title="Edit section: 函数参考">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<table cellspacing="10" width="100%">

<tr valign="top">
<td width="50%">
<table class="widefat">

<tr style="background:#464646; color:#d7d7d7;">
<th> <b>添加, 更新, 删除</b>
</th></tr>
<tr>
<td>
<ul><li> <tt><a href="https://codex.wordpress.org/Function_Reference/add_post_meta" title="Function Reference/add post meta"> add_post_meta()</a></tt></li>
<li> <tt><a href="https://codex.wordpress.org/Function_Reference/update_post_meta" title="Function Reference/update post meta"> update_post_meta()</a></tt></li>
<li> <tt><a href="https://codex.wordpress.org/Function_Reference/delete_post_meta" title="Function Reference/delete post meta"> delete_post_meta()</a></tt></li></ul>
</td></tr></table>
</td>
<td width="50%">
<table class="widefat">

<tr style="background:#464646; color:#d7d7d7;">
<th> <b>自定义 值/键</b>
</th></tr>
<tr>
<td>
<ul><li> <tt><a href="https://codex.wordpress.org/Function_Reference/get_post_custom" title="Function Reference/get post custom"> get_post_custom()</a></tt></li>
<li> <tt><a href="https://codex.wordpress.org/Function_Reference/get_post_custom_values" title="Function Reference/get post custom values"> get_post_custom_values()</a></tt></li>
<li> <tt><a href="https://codex.wordpress.org/Function_Reference/get_post_custom_keys" title="Function Reference/get post custom keys"> get_post_custom_keys()</a></tt> </li></ul>
</td></tr></table>
</td></tr>
<tr valign="top">
<td colspan="2">
<table class="widefat">

<tr style="background:#464646; color:#d7d7d7;">
<th> <b>模板标签</b>
</th></tr>
<tr>
<td>
<ul><li> <tt><a href="https://codex.wordpress.org/Template_Tags/the_meta" title="Template Tags/the meta" class="mw-redirect"> the_meta()</a></tt></li>
<li> <tt><a href="https://codex.wordpress.org/Function_Reference/get_post_meta" title="Function Reference/get post meta"> get_post_meta()</a></tt></li></ul>
</td></tr></table>
</td></tr></table>
<h2><span class="mw-headline" id=".E4.BD.BF.E7.94.A8.E6.96.B9.E6.B3.95">使用方法</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%8F%E7%9B%AE&amp;action=edit&amp;section=2" title="Edit section: 使用方法">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>我们参考前面所提到的例子来操作. 我们将添加两个自定义栏目， 一个栏目称为 "正在阅读" 另一个栏目则称之为 "今天的心情". 下面我们演示如何使用自定义栏目显示信息。
</p>
<ol><li> 依照常规将您的文章书写完成, 卷动滚动条到<b>自定义栏目</b>位置.<br /><b>Note:</b> 自WordPress<a href="https://codex.wordpress.org/Version_3.1" title="Version 3.1">version 3.1</a>起,默认情况下自定义栏目已经隐藏,您可以通过管理面板写文章和页面编辑的<a href="https://codex.wordpress.org/Administration_Panels#Screen_Options" title="Administration Panels" class="mw-redirect">显示选项</a>中勾选自定义栏目打开它.</li>
<li> 创建一个名字为"正在阅读"的<b>自定义栏目</b> , 在<b>名称</b>的输入栏中输入"正在阅读"文字(不带引号).</li>
<li> 为刚刚新创建的<b>名称</b>添加一个<b>值</b>, 我们举一个正在阅读"卡尔文与霍布斯"的例子. 在<i>值</i>的输入框中键入 "卡尔文与霍布斯"(不带引号).</li>
<li> 单击<b>添加自定义栏目</b>按钮将以上内容保存到文章中.</li></ol>
<p>To add your "Today's Mood", repeat the process and add "Today's Mood" to the <b>key</b> and a description of your mood in the <b>value</b> text boxes and click <b>SAVE</b> to save this information with the post.
</p><p>On your next post, you can add a new book and mood to your meta-data.  In the <b>Custom Fields</b> section, the <b>Key</b> will now feature a pull down list with the previously entered Custom Fields. Choose "Currently Reading" and then enter the new book you are reading in the <b>value</b>.  Click <b>Add Custom Field</b> and then repeat the process to add "Today's Mood".
</p><p>You only need to create a new "KEY" <b>once</b>, after which you can assign a value to that key for every post, if you so desire. You can also assign more than one <i>Value</i> to a key, for a post. This will come in handy for people who read more than one book at a time.
</p>
<h2><span class="mw-headline" id="Displaying_Custom_Fields">Displaying Custom Fields</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%8F%E7%9B%AE&amp;action=edit&amp;section=3" title="Edit section: Displaying Custom Fields">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>With a Custom Field added to the post, it's time to display your books and mood to the world.  To display the Custom Fields for each post, use the <tt><a href="https://codex.wordpress.org/Template_Tags/the_meta" title="Template Tags/the meta" class="mw-redirect">the_meta()</tt></a> template tag. The tag must be put within <a href="https://codex.wordpress.org/The_Loop" title="The Loop">The Loop</a> in order to work.  Many people add <tt>the_meta()</tt> template tag to the end of their post or in their <a href="https://codex.wordpress.org/Post_Meta_Data_Section" title="Post Meta Data Section">Post Meta Data Section</a>. Here is a basic example of using the tag:
</p>
<pre>&lt;?php the_meta();&#160;?&gt;
</pre>
<p>It might look like this in the source code:
</p>
<pre>&lt;ul class='post-meta'&gt;
&lt;li&gt;&lt;span class='post-meta-key'&gt;Curently Reading:&lt;/span&gt; Calvin and Hobbes&lt;/li&gt;
&lt;li&gt;&lt;span class='post-meta-key'&gt;Today's Mood:&lt;/span&gt; Jolly and Happy&lt;/li&gt;
&lt;/ul&gt;</pre>
<p>The template tag automatically puts the entire meta-data into a CSS style called <tt>post-meta</tt>. The <b>key</b> is in a <tt>span</tt> called <tt>post-meta-key</tt> so you can style it in your style sheet.  All of this is showcased in an unordered list.
</p><p>To customize the look of the post-meta list, change the characteristics in your style sheet.  For instance, let's add some style to our example from the top.  The style sheet elements would look like this:
</p>
<pre>.post-meta {font-variant: small-caps; color: maroon; }
.post-meta-key {color: green; font-weight: bold; font-size: 110%; }</pre>
<div style="border:1px solid blue; width:50%; margin: 20px; padding:20px">
<ul><li> <span style="font-size:110%; color: green; font-weight:bold; font-variant: small-caps">Currently  Reading</span>: <span style="font-style:italic; color: maroon; font-variant: small-caps">Calvin and Hobbes</span></li>
<li> <span style="font-size:110%; color: green; font-weight:bold; font-variant: small-caps">Today's Mood</span>: <span style="font-style:italic; color: maroon; font-variant: small-caps">Jolly and Happy</span></li></ul>
</div>
<p>There are also many WordPress Plugins in the <a rel="nofollow" class="external text" href="http://wordpress.org/extend/plugins/">Official WordPress Plugin Directory</a> that add some nice features to the job of displaying meta tags. A search for <a rel="nofollow" class="external text" href="http://www.google.com/search?hl=en&amp;q=custom+fields+plugin+wordpress&amp;btnG=Google+Search">Custom Field plugins at Google</a> should help you find even more.
</p><p>To register support for custom fields within a custom post type, simply list it in your 'supports' $args using 'custom-fields'.
</p>
<pre>
'supports' =&gt; array('title','editor','thumbnail','custom-fields')
</pre>
<h2><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E6.A0.8F.E7.9B.AE.E7.9A.84.E9.AB.98.E7.BA.A7.E5.BA.94.E7.94.A8">自定义栏目的高级应用</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%8F%E7%9B%AE&amp;action=edit&amp;section=4" title="Edit section: 自定义栏目的高级应用">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>以下是使用更高级的方式获取自定义数据和自定义栏目的方法。
</p>
<h3><span class="mw-headline" id="Getting_Custom_Fields">Getting Custom Fields</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%8F%E7%9B%AE&amp;action=edit&amp;section=5" title="Edit section: Getting Custom Fields">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>To fetch meta values use the <tt><a href="https://codex.wordpress.org/Function_Reference/get_post_meta" title="Function Reference/get post meta">get_post_meta()</a></tt> function:
</p>
<pre> get_post_meta($post_id, $key, $single);
</pre>
<ul><li><tt>$post_id</tt> is the ID of the post you want the meta values for. Use <tt>$post-&gt;ID</tt> to get a post's ID within the $post variable scope. Use <tt><a href="https://codex.wordpress.org/Function_Reference/get_the_ID" title="Function Reference/get the ID">get_the_ID()</a></tt> to retrieve the ID of the current item in the WordPress Loop.</li>
<li><tt>$key</tt> is a string containing the name of the meta value you want.</li>
<li><tt>$single</tt> can either be <tt>true</tt> or <tt>false</tt>. If set to true then the function will return a single result, as a <b>string</b>. If false, or not set, then the function returns an <b>array</b> of the custom fields.</li></ul>
<h4><span class="mw-headline" id="Implementation_Details">Implementation Details</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%8F%E7%9B%AE&amp;action=edit&amp;section=6" title="Edit section: Implementation Details">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The PostMeta information is stored in a new table, <tt>$wpdb-&gt;postmeta</tt>. This table has four fields:
</p>
<dl><dd>'<tt>meta_id</tt>' - A unique id for each entry.</dd>
<dd>'<tt>post_id</tt>' - The ID of the post for this metadata.</dd>
<dd>'<tt>meta_key</tt>' - The name of the 'key'.</dd>
<dd>'<tt>meta_value</tt>' - The value associated with the key.</dd></dl>
<p>The values from this table are pulled into a structured multi-dimensional array called <tt>$post_meta_cache</tt>, just after the <tt>$posts</tt> array is fetched in <tt>wp-blog-header.php</tt>. This variable will only contain values for the list of posts fetched for the current page build. The structure of the array will look something like this:
</p>
<pre>[
	postid1 =&gt; [
		key1 =&gt; [ val1, val2, ... ],
		key2 =&gt; [ val1, val2, ... ],
		...
	],
	postid2 =&gt; [
		key1 =&gt; [ val1, val2, ... ],
		key2 =&gt; [ val1, val2, ... ],
		...
	],
	...
]
</pre>
<p>So, if you wanted to fetch the "reading" values from post number 256, you use this PHP code:
</p>
<pre>// Fetch an array of values for what I'm reading:
$readinglist = $post_meta_cache[256]['reading'];
</pre>
<p><b>Note:</b> Don't forget that <tt>$readinglist</tt> will be an array, not a single value.
</p>
<h3><span class="mw-headline" id="PostMeta_Functions">PostMeta Functions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%8F%E7%9B%AE&amp;action=edit&amp;section=7" title="Edit section: PostMeta Functions">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="Internal_Functions">Internal Functions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%8F%E7%9B%AE&amp;action=edit&amp;section=8" title="Edit section: Internal Functions">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>These functions are intended for use inside <a href="https://codex.wordpress.org/The_Loop" title="The Loop">The Loop</a>, and all return arrays.
</p>
<dl><dt><tt><a href="https://codex.wordpress.org/Function_Reference/get_post_custom" title="Function Reference/get post custom">get_post_custom()</a></tt></dt>
<dd> Get all key/value data for the current post.</dd>
<dt><tt><a href="https://codex.wordpress.org/Function_Reference/get_post_custom_keys" title="Function Reference/get post custom keys">get_post_custom_keys()</a></tt></dt>
<dd> Get a list of all key names for the current post.</dd>
<dt><tt><a href="https://codex.wordpress.org/Function_Reference/get_post_custom_values" title="Function Reference/get post custom values">get_post_custom_values($key)</a></tt></dt>
<dd> Get the list of values for a particular key on the current post.</dd>
<dt><tt><a href="https://codex.wordpress.org/Function_Reference/get_post_meta" title="Function Reference/get post meta">get_post_meta($post_id, $key, $single = false)</a></tt></dt>
<dd> In WP 1.5 and beyond, this function returns the meta information without cache problems. The function requires the post id, the key, and if <tt>$single</tt> is set to TRUE, it returns only the first result (NOT as an array) for PHP use.</dd></dl>
<pre>This will output the resulting meta value (notice the addition of "echo"):
&lt;?php $key="mykey"; echo get_post_meta($post-&gt;ID, $key, true);&#160;?&gt;</pre>
<h4><span class="mw-headline" id="Template_Functions">Template Functions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%8F%E7%9B%AE&amp;action=edit&amp;section=9" title="Edit section: Template Functions">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>At the time of this writing, there is only one template function.
</p>
<dl><dt><tt><a href="https://codex.wordpress.org/Template_Tags/the_meta" title="Template Tags/the meta" class="mw-redirect">the_meta()</a></tt></dt>
<dd>Echoes an unordered list containing the current post's meta-data with a class for the UL as <i>post-meta</i> and the LI as <i>post-meta-key</i>.</dd></dl>
<p>We expect that independent developers will come up with many interesting uses for post meta-data in the form of plugins. The <tt>the_meta()</tt> template function is just an extremely basic example.
</p>
<!-- 
NewPP limit report
Cached time: 20190211004556
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.028 seconds
Real time usage: 0.034 seconds
Preprocessor visited node count: 156/1000000
Preprocessor generated node count: 699/1000000
Post‐expand include size: 2187/2097152 bytes
Template argument size: 883/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   12.470      1 - -total
 78.35%    9.771      1 - Template:Languages
 20.20%    2.519      1 - Template:zh-cn:Stub
 11.27%    1.406      1 - Template:Message
  8.44%    1.053      1 - Template:ja
  8.06%    1.005      1 - Template:pt-br
  8.06%    1.005      1 - Template:es
  7.99%    0.996      1 - Template:en
  7.96%    0.993      1 - Template:ru
  7.81%    0.974      1 - Template:zh-cn
-->
