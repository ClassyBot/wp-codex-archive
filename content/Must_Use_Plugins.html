<p>Must-use plugins (a.k.a. mu-plugins) are plugins installed in a special directory inside the content folder and which are automatically enabled on all sites in the installation. Must-use plugins do not show in the default list of plugins on the <i>Plugins</i> page of wp-admin &#8211; although they do appear in a special Must-Use section &#8211;  and cannot be disabled except by removing the plugin file from the must-use directory, which is found in <b>wp-content/mu-plugins</b> by default. 
</p><p>To change the default directory manually, define <code>WPMU_PLUGIN_DIR</code> and <code>WPMU_PLUGIN_URL</code> in <a href="https://codex.wordpress.org/Editing_wp-config.php" title="Editing wp-config.php"><tt>wp-config.php</tt></a>.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Features"><span class="tocnumber">1</span> <span class="toctext">Features</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Caveats"><span class="tocnumber">2</span> <span class="toctext">Caveats</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#History_and_Naming"><span class="tocnumber">3</span> <span class="toctext">History and Naming</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Autoloader_Example"><span class="tocnumber">4</span> <span class="toctext">Autoloader Example</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Source_Code"><span class="tocnumber">5</span> <span class="toctext">Source Code</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Features">Features</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Must_Use_Plugins&amp;action=edit&amp;section=1" title="Edit section: Features">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> Always-on, no need to enable via admin and users cannot disable by accident.</li>
<li> Can be enabled simply by uploading file to the mu-plugins directory, without having to log-in.</li>
<li> Loaded by PHP, in alphabetical order, <b>before normal plugins</b> but <b>after dropin plugins</b>, meaning API hooks added in an mu-plugin apply to all other plugins even if they run hooked-functions in the global namespace.</li></ul>
<h2><span class="mw-headline" id="Caveats">Caveats</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Must_Use_Plugins&amp;action=edit&amp;section=2" title="Edit section: Caveats">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Despite its suitability for many special cases, the mu-plugins system is not always ideal and has several downsides that make it innapropriate in certain circumstances. Below are several important caveats to keep in mind:
</p>
<ul><li> Plugins in the must-use directory will not appear in the update notifications nor show their update status on the plugins page, so you are responsible for learning about and performing updates on your own.</li>
<li> <a href="https://codex.wordpress.org/Function_Reference#register_activation_hook" title="Function Reference">Activation hooks</a> are <i>not</i> executed in plugins added to the must-use plugins folder. These hooks are used by many plugins to run installation code that sets up the plugin initially and/or uninstall code that cleans up when the plugin is deleted. Plugins depending on these hooks may not function in the mu-plugins folder, and as such all plugins should be carefully tested specifically in the mu-plugins directory before being deployed to a live site.</li>
<li> WordPress only looks for PHP files right inside the mu-plugins directory, and (unlike for normal plugins) not for files in subdirectories. You may want to create a proxy PHP loader file inside the mu-plugins directory:</li></ul>
<pre>&lt;?php // mu-plugins/load.php
require WPMU_PLUGIN_DIR.'/my-plugin/my-plugin.php';
</pre>
<h2><span class="mw-headline" id="History_and_Naming">History and Naming</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Must_Use_Plugins&amp;action=edit&amp;section=3" title="Edit section: History and Naming">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The 'mu-plugins' directory was originally implemented by WPMU (Multi-User) to offer site admins an easy way to activate plugins by default on all blogs in the farm. There was a need for this feature because at the time the multi-user-specific code did not offer ways of achieving this effect using the site admin section (today the renamed "Multisite WordPress" has features to manage plugins from inside the admin). 
</p><p>The code handling /mu-plugins/ was merged into the main WordPress code on 03/07/09 with <a rel="nofollow" class="external text" href="http://core.trac.wordpress.org/changeset/10737">this changeset</a> a full 10 months before the wpmu codebase was initially merged, and all WP sites could take advantage of autoloaded plugins, whether they had MU/Multisite enabled or not. The feature is useful for all types of WP installations depending on circumstances, so this makes sense. 
</p><p>In this process the name "mu plugins"  became a misnomer because it did not apply exclusively to multisite installs and because "MU" was not even being used anymore to refer to WP installations with multiple blogs. Despite this, the name was kept and <b>re-interpreted to mean "Must-use plugins"</b>, i.e. These are plugins that must always be used, thus they are autoloaded on all sites regardless of the settings in the Plugins pane of wp-admin.
</p><p>Thus "Must-Use" is effectively a <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/Backronym">Backronym</a>, like <a href="https://codex.wordpress.org/Glossary#PHP" title="Glossary">PHP</a> (which originally meant "Personal Home Page" but was later re-interpreted as meaning "PHP Hypertext Preprocessor", which is also a <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/Recursive_acronym">Recursive Acronym</a>).
</p>
<h2><span class="mw-headline" id="Autoloader_Example">Autoloader Example</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Must_Use_Plugins&amp;action=edit&amp;section=4" title="Edit section: Autoloader Example">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Create a file mu-autoloader.php within the mu-plugins directory /mu-plugins/mu-autoloader.php and put the following contents into it:
</p>
<pre>
&lt;?php
/**
 * Plugin Name: Must Use Plugins Autoloader
 * Plugin URI: https://codex.wordpress.org/Must_Use_Plugins
 * Description: This Plugin is loading all plugins within folder in the /mu-plugins directory. For more details please have a look into your /wp-content/mu-plugins folder.
 * Author: WordPress Codex
 */

$dirs = glob(dirname(__FILE__) . '/*' , GLOB_ONLYDIR);

foreach($dirs as $dir) {
    if(file_exists($dir . DIRECTORY_SEPARATOR . basename($dir) . ".php")) {
        require($dir . DIRECTORY_SEPARATOR . basename($dir) . ".php");
    }
}
</pre>
<p>This will load all Plugins within this directory just like you would be within the normal Plugins directory. Please note the other restrictions on MU Plugins described within this article.
</p>
<h2><span class="mw-headline" id="Source_Code">Source Code</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Must_Use_Plugins&amp;action=edit&amp;section=5" title="Edit section: Source Code">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> <code>get_mu_plugins()</code> is located in <code><a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/tags/5.1.1/src/wp-admin/includes/plugin.php#L0">wp-admin/includes/plugin.php</a></code>.</li>
<li> <code>wp_get_mu_plugins()</code> is located in <code><a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/tags/5.1.1/src/wp-includes/load.php#L0">wp-includes/load.php</a></code>.</li></ul>
<div style="background-color:#FAEBD7; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">This page is <a href="https://codex.wordpress.org/Category:Stubs" title="Category:Stubs">marked</a> as incomplete. You can <a href="https://codex.wordpress.org/Codex:Contributing" title="Codex:Contributing">help</a> Codex by <b><a rel="nofollow" class="external text" href="https://codex.wordpress.org/index.php?title=Must_Use_Plugins&amp;action=edit">expanding it</a></b>.</div>


