{{Languages|
{{en|Post Formats}}
{{ja|Post Formats}}
{{ru|Форматы записей}}
{{zh-hans|文章格式}} 
}}

'''Формат записи''' — это [[Theme Features|функция темы оформления]], появившаяся в [[Version 3.1|версии 3.1]], Форматы представляют собой метаданные, которые можно использовать в темах для настройки представления записи. Основная идея в том, чтобы иметь возможность явно указать «формат» отображения записи. Это позволяет не использовать с той же целью рубрики, а главное — обеспечивает совместимость со всеми темами, которые поддерживают эти форматы.

Например, раньше для отображения '''заметок''' создавалась рубрика «Asides» и в неё помещались записи, которые затем оформлялись по-другому с помощью функции [[Template_Tags/post_class|post_class()]] или условия [[Conditional Tags|in_category('asides')]]. Новый подход позволяет теме зарегистрировать особый формат (например, [[Function_Reference/add_theme_support|add_theme_support('post-formats', array('aside'))]]), который можно будет выбрать в блоке «Опубликовать» при сохранении записи. Для определения формата можно воспользоваться функцией [[Function_Reference/get_post_format|get_post_format( $post->ID )]], а функция [[Template_Tags/post_class|post_class()]] добавит класс «format-asides», который пригодится в оформлении с помощью CSS.

==Поддерживаемые форматы==

Поддерживаются следующие форматы записей:

* '''заметка''' — обычно отображается без заголовка. Похожа на обновление статуса в Facebook.
* '''чат''' — запись чата, например:
<pre>
Иван: привет
Маша: привет
Иван: как дела?
</pre>

* '''галерея''' — галерея изображений.
* '''ссылка''' — ссылка на другой сайт. В качестве внешней ссылки будет использован первый тег <tt><a href=""></tt> в содержимом записи. Если же вся запись состоит только из URL, то этот адрес будет адресом ссылки, а заголовок записи — её текстом.
* '''изображение''' — одиночное изображение. В качестве изображения будет использован первый тег <tt><img /></tt> в записи. Если же вся запись состоит только из URL, то этот адрес будет адресом изображения, а заголовок записи — атрибутом <tt>title</tt>.
* '''цитата''' — выдержка, фрагмент. Состоит из текста цитаты и источника. Цитата должна быть записана в поле <tt>post_content</tt> в таком виде: <tt><nowiki><blockquote>цитата_с_тегами_параграфа<p><cite>источник</cite></p></blockquote></nowiki></tt>.
* '''статус''' — короткая строка, обычно до 140 символов. Похожа на обновление статуса в Twitter.
* '''видео''' — одиночное видео. В качестве видеофайла будет использован первый тег <tt><video /></tt> или внедрённый объект в содержимом записи. Если же вся запись состоит только из URL, то этот адрес будет адресом видеофайла.
* '''аудио''' — аудиофайл. Можно использовать для подкастинга.

Замечание: Надпись «Стандартный» при создании или редактировании записи означает, что её формат не указан. Кроме того, если указанный формат некорректен, будет использован стандартный.

== Справочник функций ==

{| cellspacing="10" width="100%"
|- valign="top"
| width="50%" |

{| class="widefat"
|- style="background:#464646; color:#d7d7d7;"
! '''Основные функции'''
|-
|
* <tt>[[Function_Reference/set_post_format|set_post_format()]]</tt>
* <tt>[[Function_Reference/get_post_format|get_post_format()]]</tt>
* <tt>[[Function_Reference/has_post_format|has_post_format()]]</tt>
|}

| width="50%" |

{| class="widefat"
|- style="background:#464646; color:#d7d7d7;"
! '''Другие функции'''
|-
|
* <tt>[[Function_Reference/get_post_format_link | get_post_format_link()]]</tt>
* <tt>[[Function_Reference/get_post_format_string | get_post_format_string()]]</tt>
|}
|}

== Добавление поддержки в тему ==

Чтобы сообщить WordPress о поддерживаемых форматах записей, темы должны использовать функцию [[Function_Reference/add_theme_support|add_theme_support()]] в файле functions.php, передавая массив аргументов. Например:

<pre>add_theme_support( 'post-formats', array( 'aside', 'gallery' ) );</pre>

== Использование форматов ==

В самой теме для проверки формата записи нужно использовать функцию [[Function_Reference/get_post_format|get_post_format()]] и менять представление в соответствии с результатами. Обратите внимание, что записи с форматом по умолчанию вернут значение <tt>FALSE</tt>. Также можно использовать [[Conditional Tags|условный тег]] [[Function_Reference/has_post_format|has_post_format()]]:

<pre>
if ( has_post_format( 'video' )) {
  echo 'это формат видеозаписи';
}
</pre>

== Обратная совместимость ==

Если ваш плагин или тема должны быть совместимы с более ранними версиями WordPress, нужно добавить в таксономию <tt>post_format</tt> элементы <tt>post-format-$format</tt>. Например:

<pre>
wp_insert_term('post-format-aside', 'post_format');
</pre>

Вы также должны зарегистрировать таксономию <tt>post_format</tt> с помощью функции [[Function_Reference/register_taxonomy|register_taxonomy()]].

== Исходный файл ==
* {{Trac|wp-includes/post.php}}

== Внешние ресурсы  ==


== См. также ==
{{ru:Post Formats}}

[[Category:Advanced Topics]]
[[Category:Russian Codex]]