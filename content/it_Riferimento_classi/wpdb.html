<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<a href="https://codex.wordpress.org/Class_Reference/wpdb" title="Class Reference/wpdb">English</a> • 
<strong class="selflink">Italiano</strong> • 

<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/関数リファレンス/wpdb_Class">日本語</a> 
<a href="https://codex.wordpress.org/Class_Reference/ru:wpdb_Class" title="Class Reference/ru:wpdb Class">Русский</a> • 

<a href="https://codex.wordpress.org/zh-cn:Class_Reference/wpdb" title="zh-cn:Class Reference/wpdb">中文(简体)</a> • 
<a href="https://codex.wordpress.org/zh-tw:Class_Reference/wpdb" title="zh-tw:Class Reference/wpdb">中文(繁體)</a> • 
 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Interfacciarsi_con_il_Database"><span class="tocnumber">1</span> <span class="toctext">Interfacciarsi con il Database</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Utilizzare_l.27Oggetto_.24wpdb"><span class="tocnumber">1.1</span> <span class="toctext">Utilizzare l'Oggetto $wpdb</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3"><a href="#Eseguire_una_query_generica_sul_database"><span class="tocnumber">2</span> <span class="toctext">Eseguire una query generica sul database</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Esempi"><span class="tocnumber">2.1</span> <span class="toctext">Esempi</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#SELECT_di_una_variabile"><span class="tocnumber">3</span> <span class="toctext">SELECT di una variabile</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Esempi_2"><span class="tocnumber">3.1</span> <span class="toctext">Esempi</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#SELECT_di_una_riga"><span class="tocnumber">4</span> <span class="toctext">SELECT di una riga</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Esempi_3"><span class="tocnumber">4.1</span> <span class="toctext">Esempi</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#SELECT_di_una_colonna"><span class="tocnumber">5</span> <span class="toctext">SELECT di una colonna</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Esempi_4"><span class="tocnumber">5.1</span> <span class="toctext">Esempi</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#SELECT_di_risultati_generici"><span class="tocnumber">6</span> <span class="toctext">SELECT di risultati generici</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Esempi_5"><span class="tocnumber">6.1</span> <span class="toctext">Esempi</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#INSERT_di_righe"><span class="tocnumber">7</span> <span class="toctext">INSERT di righe</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#Esempi_6"><span class="tocnumber">7.1</span> <span class="toctext">Esempi</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#UPDATE_di_riga"><span class="tocnumber">8</span> <span class="toctext">UPDATE di riga</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#Esempi_7"><span class="tocnumber">8.1</span> <span class="toctext">Esempi</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="#DELETE_di_righe"><span class="tocnumber">9</span> <span class="toctext">DELETE di righe</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#Utilizzo"><span class="tocnumber">9.1</span> <span class="toctext">Utilizzo</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Parametri"><span class="tocnumber">9.2</span> <span class="toctext">Parametri</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Esempi_8"><span class="tocnumber">9.3</span> <span class="toctext">Esempi</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-21"><a href="#Proteggere_le_query_dagli_attacchi_di_SQL_injection"><span class="tocnumber">10</span> <span class="toctext">Proteggere le query dagli attacchi di SQL injection</span></a>
<ul>
<li class="toclevel-2 tocsection-22"><a href="#Segnaposti"><span class="tocnumber">10.1</span> <span class="toctext">Segnaposti</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Esempi_9"><span class="tocnumber">10.2</span> <span class="toctext">Esempi</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="#Mostrare_o_nascondere_gli_errori_SQL"><span class="tocnumber">11</span> <span class="toctext">Mostrare o nascondere gli errori SQL</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="#Ottenere_informazioni_sulla_colonne"><span class="tocnumber">12</span> <span class="toctext">Ottenere informazioni sulla colonne</span></a></li>
<li class="toclevel-1 tocsection-26"><a href="#Pulizia_della_Cache"><span class="tocnumber">13</span> <span class="toctext">Pulizia della Cache</span></a></li>
<li class="toclevel-1 tocsection-27"><a href="#Variabili_della_Classe"><span class="tocnumber">14</span> <span class="toctext">Variabili della Classe</span></a>
<ul>
<li class="toclevel-2 tocsection-28"><a href="#Variabili_multisito"><span class="tocnumber">14.1</span> <span class="toctext">Variabili multisito</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-29"><a href="#Tabelle"><span class="tocnumber">15</span> <span class="toctext">Tabelle</span></a>
<ul>
<li class="toclevel-2 tocsection-30"><a href="#Tabelle_Multisito"><span class="tocnumber">15.1</span> <span class="toctext">Tabelle Multisito</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-31"><a href="#File_sorgente"><span class="tocnumber">16</span> <span class="toctext">File sorgente</span></a></li>
<li class="toclevel-1 tocsection-32"><a href="#Correlati"><span class="tocnumber">17</span> <span class="toctext">Correlati</span></a>
<ul>
<li class="toclevel-2"><a href="#Articles"><span class="tocnumber">17.1</span> <span class="toctext">Articles</span></a></li>
<li class="toclevel-2"><a href="#Code_Documentation"><span class="tocnumber">17.2</span> <span class="toctext">Code Documentation</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Interfacciarsi_con_il_Database">Interfacciarsi con il Database</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=1" title="Edit section: Interfacciarsi con il Database">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>WordPress fornisce una classe di funzioni per tutte le operazioni di manipolazione del database. La classe è denominata <code>wpdb</code> e si basa in parte sulla classe <a rel="nofollow" class="external text" href="http://justinvincent.com/ezsql">ezSQL</a> scritta e manutenuta da <a rel="nofollow" class="external text" href="http://www.jvmultimedia.com">Justin Vincent</a>.
</p>
<h3><span class="mw-headline" id="Utilizzare_l.27Oggetto_.24wpdb">Utilizzare l'Oggetto $wpdb</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=2" title="Edit section: Utilizzare l'Oggetto $wpdb">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><b>I metodi della classe <code>wpdb()</code> non devono mai venir richiamati direttamente.</b> 
</p><p>WordPress fornisce una variabile globale, <b><code>$wpdb</code></b>, che è una istanza della classe ed è cgià impostata per parlare con il database di WordPress.  Utilizzate sempre la variabile globale <code>$wpdb</code>.  (Ricordatevi di <a rel="nofollow" class="external text" href="http://www.php.net/manual/en/language.variables.scope.php#language.variables.scope.global">globalizzare</a> <code>$wpdb</code> prima di utilizzarla in qualsiasi funzione personalizzata.)
</p><p>L'oggetto <code>$wpdb</code> può essere utilizzato per leggere dati da <i>qualsiasi</i> tabella del database di WordPress (anche dalle tabelle personalizzate create dai plugin), e non solo le tabelle standard che WordPress ha creato. Ad esempio per fare la SELECT di alcune informazioni da una tabella di nome "mytable", potete eseguire il seguente codice.
<code>
</p>
<pre>$myrows = $wpdb-&gt;<a href="#SELECT_Generic_Results">get_results</a>( "SELECT id, name FROM mytable" );
</pre>
<p></code>
L'oggetto <code>$wpdb</code> può dialogare con qualsiasi numero di tabelle ma con un solo database: il database di WordPress. Neli rari casi in cui sia necessario collegarsi ad un altro database, dovrete istanziare un vostro oggetto dalla classe <code>wpdb</code> con gli opportuni dettagli di connessione. Per impostazioni estremamente complicate con molti database, considerate l'opportunità di utilizzare <a rel="nofollow" class="external text" href="http://wordpress.org/extend/plugins/hyperdb/">hyperdb</a>.
</p>
<h2><span class="mw-headline" id="Eseguire_una_query_generica_sul_database">Eseguire una query generica sul database</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=3" title="Edit section: Eseguire una query generica sul database">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>La funzione <code>query</code> permette di eseguire <i>qualsiasi</i> query SQL sul database di WordPress. Tuttavia è meglio utilizzare una funzione più specifica (si veda nel seguito) per le query di SELECT.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'query'</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> query&#160;</dt>
<dd> (stringa) La query SQL che si desidera eseguire.</dd></dl>
<p>La funzione restituisce un intero corrispondente al numero di righe interessate/selezionate. Se si verifica un errore MySQL, la funzione restituirà <code>FALSE</code>. (<b>Nota</b>: poichè possono venir restituiti sia 0 che FALSE, assicurarsi di utilizzare l'operatore di comparazione corretto: uguaglianza <code>==</code> verso identicità <code>===</code>).
</p><p>Nota: come per tutte le funzioni di questa classe che eseguono query SQL, dovrete effettuare l'escaping SQL di tutti gli input (e.g., <code>esc_sql($stringa_dati_immessa_da_utente)</code> oppure <code>$wpdb-&gt;prepare( 'query' , valore_parametro[, valore_parametro ... ] );</code>).  Si veda più sotto la sezione intitolata <a href="#Proteggere_le_query_dagli_attacchi_di_SQL_injection">Proteggere le query dagli attacchi di SQL injection</a>.
</p>
<h3><span class="mw-headline" id="Esempi">Esempi</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=4" title="Edit section: Esempi">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Cancellare la metakey 'chiave_test' ed ils uo valore dall'Articolo numero 13. (Aggiungeremo il metodo 'prepare' per assicurarci di non avere a che fare con operazioni illegali o caratteri non permessi):
</p>
<pre>
$wpdb-&gt;query( 
	$wpdb-&gt;prepare( 
		"
                DELETE FROM $wpdb-&gt;postmeta
		 WHERE post_id =&#160;%d
		 AND meta_key =&#160;%s
		",
	        13, 'chiave_test' 
        )
);

</pre>
<p><i>Codice eseguito in WordPress da <code><a href="https://codex.wordpress.org/Function_Reference/delete_post_meta" title="Function Reference/delete post meta">delete_post_meta()</a></code>.</i>
</p><p>Impostare la <a href="https://codex.wordpress.org/Pages" title="Pages">Pagina</a> 7 come padre della <a href="https://codex.wordpress.org/Pages" title="Pages">Pagina</a> 15.
</p>
<pre>
$wpdb-&gt;query(
	"
	UPDATE $wpdb-&gt;posts 
	SET post_parent = 7
	WHERE ID = 15 
		AND post_status = 'static'
	"
);
</pre>
<h2><span class="mw-headline" id="SELECT_di_una_variabile">SELECT di una variabile</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=5" title="Edit section: SELECT di una variabile">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>La funzione <code>get_var</code> restituisce una singola variabile dal database. TUttavia anche se viene restituita una sola variabile, l'intero risultato della query viene messo in cache per utilizzi successivi. Restituisce <tt>NULL</tt> quando non vengono trovati risultati.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_var</span><span style="color: #007700">(&#160;</span><span style="color: #DD0000">'query'</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">column_offset</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">row_offset&#160;</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> query&#160;</dt>
<dd> (stringa) La query che si desidera eseguire. Impostando questo paramentro a <code>null</code> verrà restituita la variabile indicata dai risultati presenti in cache dalal query precedente.</dd>
<dt> column_offset&#160;</dt>
<dd> (intero) la colonna desiderata (<b>0</b> per la prima).  Default a <b>0</b>.</dd>
<dt> row_offset&#160;</dt>
<dd> (intero) The desired row (<b>0</b> per la prima).  Default a <b>0</b>.</dd></dl>
<h3><span class="mw-headline" id="Esempi_2">Esempi</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=6" title="Edit section: Esempi">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Estrae e visualizza il numero di utenti.
</p>
<pre>
&lt;?php
$conteggio_utenti = $wpdb-&gt;get_var( "SELECT COUNT(*) FROM $wpdb-&gt;users" );
echo "&lt;p&gt;Il conteggio utenti è {$conteggio_utenti}&lt;/p&gt;";
?&gt;
</pre>
<p>Estrae e visualizza la somma del valore di un <a href="https://codex.wordpress.org/Custom_Fields" title="Custom Fields">Campo personalizzato</a>.
</p>
<pre>
&lt;?php
// imposta meta_key con il valore appropriato
$meta_key = 'chilometri';
$totale_chilometri= $wpdb-&gt;get_var( $wpdb-&gt;prepare( 
	"
		SELECT sum(meta_value) 
		FROM $wpdb-&gt;postmeta 
		WHERE meta_key =&#160;%s
	", 
	$meta_key
) );
echo "&lt;p&gt;Il totale chilometri è {$totale_chilometri}&lt;/p&gt;";
?&gt; 
</pre>
<h2><span class="mw-headline" id="SELECT_di_una_riga">SELECT di una riga</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=7" title="Edit section: SELECT di una riga">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Per recuperare una intera riga da una query, utilizzare <code>get_row</code>. La funzione può restituire la riga come un oggetto, un array associativo o come un array con indice numerico.  Se viene restituita più di una riga, verrà restituita solo la riga specificata dalla funzione, ma tutte le righe verranno messe in cache per utilizzi successivi. Restituisce <tt>NULL</tt> se non vengono trovati risultati, tenete presente questo quando utilizzerete il valore di ritorno come argomento di altre funzioni, si veda gli esempi successivi.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_row</span><span style="color: #007700">(</span><span style="color: #DD0000">'query'</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">output_type</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">row_offset</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> query&#160;</dt>
<dd> (stringa) La query che si desidera eseguire.</dd>
<dt> output_type&#160;</dt>
<dd> Una delle tre costanti predefinite.  Default a OBJECT.
<ul><li> OBJECT - il risultato sarà restituito come oggetto.</li>
<li> ARRAY_A - il risultato sarà restituito come un array associativo.</li>
<li> ARRAY_N - il risultato sarà restituito come un array con indice numerico.</li></ul></dd></dl>
<dl><dt> row_offset&#160;</dt>
<dd> (intero) La riga desiderata (<b>0</b> per la prima).  Default a <b>0</b>.</dd></dl>
<h3><span class="mw-headline" id="Esempi_3">Esempi</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=8" title="Edit section: Esempi">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Recuperare tutte le informazioni sul link 10.
</p>
<pre>$mylink = $wpdb-&gt;get_row("SELECT * FROM $wpdb-&gt;links WHERE link_id = 10");
</pre>
<p>Le proprietà dell'oggetto <code>$mylink</code> sono il nome delle colonne estratte dalla query SQL (in questo esempio tutte le colonne della tabella <code>$wpdb-&gt;links</code>, ma volendo potete eseguire la query solo su alcune specifiche colonne).
</p>
<pre>echo $mylink-&gt;link_id; // stampa "10"
</pre>
<p>Per contro utilizzando 
</p>
<pre>$mylink = $wpdb-&gt;get_row("SELECT * FROM $wpdb-&gt;links WHERE link_id = 10", ARRAY_A);
</pre>
<p>si otterrà un array associativo:
</p>
<pre>echo $mylink['link_id']; // stampa "10"
</pre>
<p>e
</p>
<pre>$mylink = $wpdb-&gt;get_row("SELECT * FROM $wpdb-&gt;links WHERE link_id = 10", ARRAY_N);
</pre>
<p>restiuirà un array con indice numerico:
</p>
<pre>echo $mylink[1]; // stampa "10"
</pre>
<p>Se nella tabella dei link non vi sono record con ID 10 verrà restituito <code>null</code>. Quindi il codice seguente sarà falso:
</p>
<pre>
if ($mylink&#160;!= null) {
  // fai qualche cosa con il link  
  return true;
} else {
  // nessun link trovato
  return false;
}
</pre>
<h2><span class="mw-headline" id="SELECT_di_una_colonna">SELECT di una colonna</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=9" title="Edit section: SELECT di una colonna">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Per fare la SELECT di uan colonna utilizzare code&gt;get_col&lt;/code&gt;. Questa funzione restituisce un array monodimensionale. Se la query restituisce più di una colonna, verrà restituita la colonna specificata nella funzione ma l'intero risultato verrà messo in cache per utilizzi successivi. Restituisce un array vuoto se non sono stati trovati risultati. 
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_col</span><span style="color: #007700">(&#160;</span><span style="color: #DD0000">'query'</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">column_offset&#160;</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> query&#160;</dt>
<dd> (stringa) la query che si desidera eseguire. Impostando questo parametro a <code>null</code> verrà restituita la colonna specificata presa dai risultati della query precedente presenti in cache.</dd>
<dt> column_offset&#160;</dt>
<dd> (intero) La colonna desiderata (<b>0</b> per la prima). Default a <b>0</b>.</dd></dl>
<h3><span class="mw-headline" id="Esempi_4">Esempi</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=10" title="Edit section: Esempi">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Per questo esempio supponiamo che il blog sia dedicato ad informazioni sulle automobili. Ciascun articolo descrive una singola automobile (es. Ford Mustang del 1969) e a ciascun articolo vengono assegnati tre <a href="https://codex.wordpress.org/Custom_Fields" title="Custom Fields">Campi personalizzati</a>: produttore, modello ed anno. Questo esempio visualizzerà i titoli degli articoli filtrati in base ad un particolare produttore (Ford) ed ordinati per modello ed anno.  
</p><p>Si utilizza <b>get_col</b> dalla <tt> Classe wpdb</tt> per restituire un array di tutti gli id degli articoli che corrispondono ai criteri di ricerca ed ordinati correttamente. Qiindi si utilizza un costrutto <i>foreach</i> per iterare l'array di id articoli per visualizzare il titolo di ciascun articolo. Si noti che l'SQL di questo esempio è stato creato da <a rel="nofollow" class="external text" href="http://stackoverflow.com/questions/1690762/complicated-mysql-query/1690808#1690808">Andomar</a>.
</p>
<pre>
&lt;?php 
$meta_key1		= 'modello';
$meta_key2		= 'anno';
$meta_key3		= 'produttore';
$meta_key3_value	= 'Ford';

$postids=$wpdb-&gt;get_col( $wpdb-&gt;prepare( 
	"
	SELECT      key3.post_id
	FROM        $wpdb-&gt;postmeta key3
	INNER JOIN  $wpdb-&gt;postmeta key1 
	            ON key1.post_id = key3.post_id
	            AND key1.meta_key =&#160;%s 
	INNER JOIN  $wpdb-&gt;postmeta key2
	            ON key2.post_id = key3.post_id
	            AND key2.meta_key =&#160;%s
	WHERE       key3.meta_key =&#160;%s 
	            AND key3.meta_value =&#160;%s
	ORDER BY    key1.meta_value, key2.meta_value
	",
	$meta_key1, 
	$meta_key2, 
	$meta_key3, 
	$meta_key3_value
) ); 

if ( $postids ) 
{
	echo "Elenco di {$meta_key3_value}, ordinate per {$meta_key1}, {$meta_key2}";
	foreach ( $postids as $id ) 
	{ 
		$post = get_post( intval( $id ) );
		setup_postdata( $post );
		?&gt;
		&lt;p&gt;
			&lt;a href="&lt;?php the_permalink()&#160;?&gt;" rel="bookmark" title="Permalink a  &lt;?php the_title_attribute();&#160;?&gt;"&gt;
				&lt;?php the_title();&#160;?&gt;
			&lt;/a&gt;
		&lt;/p&gt;
		&lt;?php
	} 
}
?&gt;
</pre>
<p>Questo esempio elenca tutti gli articoli che contengono un particole campo personalizzato ma ordinati in base ad un secondo campo personalizzato.
</p>
<pre>
&lt;?php
// Elenca tutti gli articoli con il campo personalizzato Colore, ordinati in base al campo personalizzato Ordine_visualizzazione
// non esclude alcun 'post_type'
// presuppone che ciascun articolo abbia un solo campo personalizzato per il Colore ed uno per Ordine_visualizzazione
$meta_key1 = 'Colore';
$meta_key2 = 'Ordine_visualizzazione';

$postids = $wpdb-&gt;get_col( $wpdb-&gt;prepare( 
	"
	SELECT      key1.post_id
	FROM        $wpdb-&gt;postmeta key1
	INNER JOIN  $wpdb-&gt;postmeta key2
	            ON key2.post_id = key1.post_id
	            AND key2.meta_key =&#160;%s
	WHERE       key1.meta_key =&#160;%s
	ORDER BY    key2.meta_value+(0) ASC
	",
        $meta_key2,
	$meta_key1
) ); 

if ( $postids ) 
{
	echo "Elenco articoli per {$meta_key1}, ordinati per {$meta_key2}";
	foreach ( $postids as $id ) 
	{
		$post = get_post( intval( $id ) );
		setup_postdata( $post );
		?&gt;
		&lt;p&gt;
			&lt;a href="&lt;?php the_permalink()&#160;?&gt;" rel="bookmark" title="Permalink a  &lt;?php the_title_attribute();&#160;?&gt;"&gt;
				&lt;?php the_title();&#160;?&gt;
			&lt;/a&gt;
		&lt;/p&gt;
		&lt;?php
	}
}
?&gt;
</pre>
<h2><span class="mw-headline" id="SELECT_di_risultati_generici">SELECT di risultati generici</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=11" title="Edit section: SELECT di risultati generici">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>RIsultati generici composti da più righe possono venir estratti dal database con il metodo <code>get_results</code>. La funzione restituisce l'intero risultato della query comein un array oppure <tt>NULL</tt> se non vi sono risultati. Ciascun elemento dell'array corrisponde ad una riga del risultato della query e, come per <code>get_row</code>, può essere un oggetto, un array associativo o un array numerico.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_results</span><span style="color: #007700">(&#160;</span><span style="color: #DD0000">'query'</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">output_type&#160;</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> query&#160;</dt>
<dd> (stringa) La query che si desidera eseguire. Impostando questo paramentro a <code>null</code> verranno restituiti i dati presenti nella cache coi risultati della query precedente.</dd>
<dt> output_type&#160;</dt>
<dd> Una della quattro costanti predefinite. Default a <tt>OBJECT</tt>. Si veda <a href="#SELECT_di_una_riga">SELECT di una riga</a> ed i relativi esempi per maggiori informazioni.
<ul><li> OBJECT - il risultato sarà restituito come un array con indice numerico di oggetti riga.</li>
<li> <tt>OBJECT_K</tt> - il risultato sarà restituito come un array associativo di oggetti riga, utilizzando i valori della prima colonna come chiavi (i duplicati verranno eliminati).</li>
<li> ARRAY_A - il risultato sarà restituito come un array con indice numerico di array associativi, utilizzando i nomi delle colonne come chiavi.</li>
<li> ARRAY_N - il risultato sarà restituito come un array con indice numerico d un insieme di array con indice numerico.</li></ul></dd></dl>
<p>Poichè questa funzione utilizza <tt>$wpdb-&gt;query()</tt> tutte le variabili della classe vengono correttamente impostate. 
IL conteggio dei risultati della query 'SELECT' verrà memorizzato in <tt>$wpdb-&gt;num_rows</tt>.
</p>
<h3><span class="mw-headline" id="Esempi_5">Esempi</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=12" title="Edit section: Esempi">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Ottenere gli ID ed i titoli di tutte le Bozze dell'utente 5 e stampare i titoli.
</p>
<pre>
$fivesdrafts = $wpdb-&gt;get_results( 
	"
	SELECT ID, post_title 
	FROM $wpdb-&gt;posts
	WHERE post_status = 'draft' 
		AND post_author = 5
	"
);

foreach ( $fivesdrafts as $fivesdraft ) 
{
	echo $fivesdraft-&gt;post_title;
}
</pre>
<p>Ottenere tutte le informazioni sulle Bozze dell'utente 5.
</p>
<pre>
&lt;?php
$fivesdrafts = $wpdb-&gt;get_results( 
	"
	SELECT * 
	FROM $wpdb-&gt;posts
	WHERE post_status = 'draft' 
		AND post_author = 5
	"
);

if ( $fivesdrafts )
{
	foreach ( $fivesdrafts as $post )
	{
		setup_postdata( $post );
		?&gt;
		&lt;h2&gt;
			&lt;a href="&lt;?php the_permalink();&#160;?&gt;" rel="bookmark" title="Permalink: &lt;?php the_title();&#160;?&gt;"&gt;
				&lt;?php the_title();&#160;?&gt;
			&lt;/a&gt;
		&lt;/h2&gt;
		&lt;?php
	}	
}
else
{
	?&gt;
	&lt;h2&gt;Non trovato&lt;/h2&gt;
	&lt;?php
}
?&gt;
</pre>
<h2><span class="mw-headline" id="INSERT_di_righe">INSERT di righe</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=13" title="Edit section: INSERT di righe">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Inserisce una riga in una tabella.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$table</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$data</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$format&#160;</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> table&#160;</dt>
<dd> (stringa) Il nome della tabella nella quale inserire i dati.</dd>
<dt> data&#160;</dt>
<dd> (array) I dati da inserire (a coppie colonna =&gt; valore). Sia i <tt>$data</tt> delle colonne che i <tt>$data</tt> dei valori devono essere "grezzi" (e non devono aver subito un escaping SQL).</dd>
<dt> format&#160;</dt>
<dd> (array|string) (opzionale) Un array di formati da mappare su ciascun valore presente in <tt>$data</tt>. Se si tratta di una stringa, questo formato sarà utilizzato per tutti i valori di <tt>$data</tt>. Se non specificato, tutti i valori di <tt>$data</tt> verranno trattati come stringhe a meno di diversa specifica di <tt>wpdb::$field_types</tt>.</dd></dl>
<p>Possibili valori di formato: <tt>%s</tt> per una stringa; <tt>%d</tt> per un numero decimale e  <tt>%f</tt> per un numero a virgola mobile. (Si veda <a href="#Segnaposti"> più sotto</a> per ulterriori informazioni.)
</p><p>Dopo l'inserimento, l'ID generato per la colonna <tt>AUTO_INCREMENT</tt> può essere recuperato con:
</p>
 <pre>$wpdb-&gt;insert_id</pre>
<p>Questa funzione restituisce <tt>false</tt> nel caso la riga non possa venir inserita.
</p>
<h3><span class="mw-headline" id="Esempi_6">Esempi</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=14" title="Edit section: Esempi">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Inserisce due colonne in una riga, il primo valore è una stringa il secondo un numero:
</p>
<pre>
$wpdb-&gt;insert( 
	'tabella', 
	array( 
		'colonna1' =&gt; 'valore1', 
		'colonna2' =&gt; 123 
	), 
	array( 
		'%s', 
		'%d' 
	) 
);
</pre>
<h2><span class="mw-headline" id="UPDATE_di_riga">UPDATE di riga</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=15" title="Edit section: UPDATE di riga">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Aggiorna una riga di una tabella. Restituisce <tt>false</tt> in caso di errore oppure in caso di successo il numero di righe interesate.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$table</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$data</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$where</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$format&#160;</span><span style="color: #007700">=&#160;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$where_format&#160;</span><span style="color: #007700">=&#160;</span><span style="color: #0000BB">null&#160;</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> table&#160;</dt>
<dd> (stringa)Il nome della tabella da aggiornare.</dd>
<dt> data&#160;</dt>
<dd> (array) I dati da aggiornare (sotto forma di coppie <tt>colonna =&gt; valore</tt> pairs). Sia i <tt>$data</tt> delle colonne che i <tt>$data</tt> dei valori devono essere "grezzi" (non devono essere stati nemmeno sottoposti ad escaping SQL). Ciò significa che se state utilizzando dati in <tt>GET</tt> o <tt>POST</tt> dovrete utilizzare <tt>striplashes()</tt> per impedire che le barre finiscano nel database.</dd>
<dt> where&#160;</dt>
<dd> (array) un array di nomi di clausole <tt>WHERE</tt> (in forma di coppie <tt>colonna =&gt; valore</tt>). Clausole multiple verranno unite con un <tt>AND</tt>. Sia le colonne di<tt>$where</tt> che i valori di <tt>$where</tt> dovrenno essere "grezzi".</dd>
<dt> format&#160;</dt>
<dd> (array|stringa) (opzionale) Un array di formati da mappare su ciascuno dei valori di <tt>$data</tt>. Se stringa, questo formato verrà usato per tutti i valori di <tt>$data</tt>.</dd>
<dt> where_format&#160;</dt>
<dd> (array|stringa) (opzionale) Un array di formati da pmappare su ciascuno dei valori di <tt>$where</tt>. Se stringa, questo formato verrà usato per tutti i valori di <tt>$where</tt>.</dd></dl>
<p><strong>I possibili valori per i formati</strong>: <tt>%s</tt> per una stringhe; <tt>%d</tt> per un numero decimale e <tt>%f</tt> per un numero in virgola mobile. (Si veda <a href="#Segnaposti"> più sotto</a> per avere altre informazioni.) Se omesso, tutti i valori di <tt>$where</tt> verranno trattati come stringhe.
</p><p>QUesta funzione restituisce il numero di righe aggiornate oppure <tt>false</tt> in caso di errore.
</p>
<h3><span class="mw-headline" id="Esempi_7">Esempi</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=16" title="Edit section: Esempi">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Aggiornauna riga, dove l'ID è 1, il valore della prima colonna è una stringa ed il valore della seconda colonna è un numero: 
</p>
<pre>
$wpdb-&gt;update( 
	'tabella', 
	array( 
		'colonna1' =&gt; 'valore1',	// stringa
		'colonna2' =&gt; 'valore2'	// intero (numero) 
	), 
	array( 'ID' =&gt; 1 ), 
	array( 
		'%s',	// valore1
		'%d'	// valore2
	), 
	array( '%d' ) 
);
</pre>
<p><strong>Attenzione:</strong> <code>%d</code> non gestisce valori con le virgole - se <em>non</em> state utilizzando numeri veri utilizzate le stringhe <tt>%s</tt>.
</p>
<h2><span class="mw-headline" id="DELETE_di_righe">DELETE di righe</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=17" title="Edit section: DELETE di righe">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>La funzione <tt>delete</tt> è stata aggiunta in WordPress <a href="https://codex.wordpress.org/Version_3.4" title="Version 3.4">3.4.0</a> è può essere utilizata per cancellare delle righe da una tabella. L'utilizzo è simile a <tt><a href="#UPDATE.3E_di_riga">update</a></tt> e a <tt><a href="#INSERT_di_righe">insert</a></tt>. Restituisce il numero di righe aggiornate e <tt>false</tt> in caso di errore.
</p>
<h3><span class="mw-headline" id="Utilizzo">Utilizzo</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=18" title="Edit section: Utilizzo">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$table</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$where</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$where_format&#160;</span><span style="color: #007700">=&#160;</span><span style="color: #0000BB">null&#160;</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
</p>
<h3><span class="mw-headline" id="Parametri">Parametri</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=19" title="Edit section: Parametri">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<dl><dt> <tt>$table</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#Stringa" title="How to Pass Tag Parameters"><i>stringa</i></a>) (<i>required</i>) Nome della tabella.
<dl><dd> Default: <i>None</i></dd></dl></dd></dl>
<p>{{Parameter|$where|array|Nome della tabella. un array di nomi di clausole <tt>WHERE</tt> (in forma di coppie colonna =&gt; valore). Clausole multiple verranno unite con un <tt>AND</tt>. Sia le colonne di $where che i valori di $where dovranno essere "grezzi".
</p>
<dl><dt> <tt>$where_format</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#Stringa.2Farray" title="How to Pass Tag Parameters"><i>stringa/array</i></a>) (<i>opzionale</i>)  Un array di formati da mappare su ciascuno dei valori di $<tt>$where</tt>. Se stringa, questo formato verrà usato per tutti i valori di <tt>$where</tt>. Un formato è uno fra <tt>'%d'</tt>, <tt>'%f'</tt>, <tt>'%s'</tt> (intero, numero in virgola mobile, stringa; si veda <a href="#Segnaposti"> più sotto</a> per avere informazioni aggiuntive). Se omesso, tutti i valori di <tt>$where</tt> verranno trattati come stringhe a meno che sia diverssamente specificato in <tt>wpdb::$field_types</tt>.
<dl><dd> Default: <tt>null</tt></dd></dl></dd></dl>
<h3><span class="mw-headline" id="Esempi_8">Esempi</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=20" title="Edit section: Esempi">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<pre>
// Utilizzo di base.
$wpdb-&gt;delete( 'tabella', array( 'ID' =&gt; 1 ) );

// Utilizzo coi formati.
$wpdb-&gt;delete( 'tabella', array( 'ID' =&gt; 1 ), array( '%d' ) );
</pre>
<h2><span class="mw-headline" id="Proteggere_le_query_dagli_attacchi_di_SQL_injection">Proteggere le query dagli attacchi di SQL injection</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=21" title="Edit section: Proteggere le query dagli attacchi di SQL injection">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Per una analisi più esaustiva dell'escaping SQL in WordPress, si veda <a href="https://codex.wordpress.org/Data_Validation#Database" title="Data Validation">database Data Validation</a>. Questo articolo sulla <a href="https://codex.wordpress.org/Data_Validation" title="Data Validation">Validazione dei dati</a> è una lettura <b>fondamentale</b> per tutti quelli che contribuiscono al core di WordPress e per gli autori dei plugin.
</p><p>In ogni caso bervemente diciamo che tutti i dati nelle query SQL devono subire un escaping SQL prima di eseguire la query per prevenire attacchi di tipo SQL injection. Ciò può essere realizzato facilmente tramite il metodo <code>prepare</code>, che supporta una sintassi stile <a rel="nofollow" class="external text" href="http://php.net/sprintf">sprintf()</a> e stile <a rel="nofollow" class="external text" href="http://php.net/vsprintf">vsprintf()</a>.
</p><p><b>Nota</b>: Dalla <a href="https://codex.wordpress.org/Version_3.5" title="Version 3.5"> versione 3.5</a>, <tt>wpdb::prepare()</tt> forza un <b>minimo di 2 argomenti</b>. [<a rel="nofollow" class="external text" href="http://make.wordpress.org/core/2012/12/12/php-warning-missing-argument-2-for-wpdb-prepare/">altre informazioni qui</a>]
</p>
<pre>
&lt;?php $sql = $wpdb-&gt;prepare( 'query' , value_parameter[, value_parameter ... ] );&#160;?&gt;
</pre>
<dl><dt> query&#160;</dt>
<dd> (stringa) La query SQL che si desidera eseguire con i <a href="#Segnaposti">aegnaposti</a> (si veda più sotto). </dd>
<dt> value_parameter&#160;</dt>
<dd> (intero|stringa|array) Il valore da sostituire al posto del segnaposto. più valori possono venir passati tramite più argomenti in stile <a rel="nofollow" class="external text" href="http://php.net/sprintf">sprintf()</a>. In alternativa il secondo argomento può essere un array contenente i valori come nella funzione PHP <a rel="nofollow" class="external text" href="http://php.net/vsprintf">vsprintf()</a>. SI ponga attenzione a far si che nons ia possibile la manipolazione diretta da parte dell'utente di questo parametro, che permetterebbe la manipolazione dell'array di qualsiasi query con segnaposti multipli. I valori non devono aver subito già l'escaping SQL.</dd></dl>
<h3><span class="mw-headline" id="Segnaposti">Segnaposti</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=22" title="Edit section: Segnaposti">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>I parametri di <tt>query</tt> di <tt>prepare</tt> accettano segnaposti in stile <a rel="nofollow" class="external text" href="http://php.net/sprintf">sprintf()</a>. Sono supportati i formati <tt>%s</tt> (stringa), <tt>%d</tt> (intero) e <tt>%f</tt> (numero a virgola mobile). (i segnaposti <tt>%s</tt> e <tt>%d</tt> sono disponibili da quando la funzione è stata introdotta nel core con <a href="https://codex.wordpress.org/Version_2.3" title="Version 2.3"> la versione 2.3</a>, <tt>%f</tt> è disponibili solo dalla <a href="https://codex.wordpress.org/Version_3.3" title="Version 3.3"> versione 3.3</a>.) Qualsiasi altro carattere <code>%</code> causerà un errore di parsing a meno che non ne venga fatto l'escaping. Tutti i caratteri <code>%</code> all'interno della stringa SQL, compresi i caratteri jolly del LIKE, devono subire un escaping tramite un doppio-% come in <code>%%</code>. Tutti i <tt>%d</tt>, <tt>%f</tt> e <tt>%s</tt> devono essere lasciati senza virgolette all'interno della stringa di query. Si noti che il segnaposto <tt>%d</tt> accetta solamente numeri interi, quindi <b>non è possibile passare valori con la virgola utilizzando<tt>%d</tt></b>. Se occorrono numeri con la virgola utilizzare <tt>%s</tt>. 
</p>
<h3><span class="mw-headline" id="Esempi_9">Esempi</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=23" title="Edit section: Esempi">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Aggiungere all'articolo 10 la coppia di meta_key =&gt; valore "Harriet's Adages" =&gt; "l'interfaccia del database di WordPress e semplice come una mattina domenicale.".
</p>
<pre>
$metakey	= "Harriet's Adages";
$metavalue	= "L'interfaccia del database di WordPress e semplice come una mattina domenicale.";

$wpdb-&gt;query( $wpdb-&gt;prepare( 
	"
		INSERT INTO $wpdb-&gt;postmeta
		( post_id, meta_key, meta_value )
		VALUES (&#160;%d,&#160;%s,&#160;%s )
	", 
        10, 
	$metakey, 
	$metavalue 
) );
</pre>
<p><i>Eseguito da WordPress in <code><a href="https://codex.wordpress.org/Function_Reference/add_meta" title="Function Reference/add meta">add_meta()</a></code>.</i>
</p><p>La stessa query utilizzando la sintassi in stile <a rel="nofollow" class="external text" href="http://php.net/vsprintf">vsprintf()</a>.
</p>
<pre>
$metakey = "Harriet's Adages";
$metavalue = "L'interfaccia del database di WordPress e semplice come una mattina domenicale.";

$wpdb-&gt;query( $wpdb-&gt;prepare( 
	"
		INSERT INTO $wpdb-&gt;postmeta
		( post_id, meta_key, meta_value )
		VALUES (&#160;%d,&#160;%s,&#160;%s )
	", 
        array(
		10, 
		$metakey, 
		$metavalue
	) 
) );
</pre>
<p><i>Si noti che in questo esempio si impacchetano i valori in un array. Ciò può essere utile quando non si conosce il numero di argomenti che si devono passare se non all'esecuzione del codice.</i>
</p><p>Si noti che non ci si deve preoccupare del quoting delle stringhe. anzichè passare le variabili direttamente alla query SQL, si utilizza un segnaposto <code>%s</code> per le stringhe, un segnaposto <code>%d</code> per gli interi ed un segnaposto <tt>%f</tt> per i numeri in virgola mobile. &#200; possibile passare quanti valori si desidera, ciwascuno come nuovo parametro del metodo <code>prepare()</code>.
</p>
<h2><span class="mw-headline" id="Mostrare_o_nascondere_gli_errori_SQL">Mostrare o nascondere gli errori SQL</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=24" title="Edit section: Mostrare o nascondere gli errori SQL">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>&#200; possibile attivare o disattivare la visualizzazione degli errori utilizzando rispettivamente <code>show_errors</code> e <code>hide_errors</code>.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">show_errors</span><span style="color: #007700">();&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;<br />&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hide_errors</span><span style="color: #007700">();&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p><p>&#200; anche possibile stampare l'errore (se presente) generato dalla query più recente tramite <code>print_error</code>.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">print_error</span><span style="color: #007700">();&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p><p><strong>Nota:</strong>  Se si esegue un WordPress Multisito, dovrete definire la costante DIEONDBERROR per gli errori del database affinchè questi vengano visualizzati tramite:
<br /><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;define</span><span style="color: #007700">(&#160;</span><span style="color: #DD0000">'DIEONDBERROR'</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">true&#160;</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<h2><span class="mw-headline" id="Ottenere_informazioni_sulla_colonne">Ottenere informazioni sulla colonne</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=25" title="Edit section: Ottenere informazioni sulla colonne">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Si possono recuperare informazioni sulle colonne dei risultati della query più recente tramite <code>get_col_info</code>. Ciò può essere utile quando una funzione restituisce un OBJECT le cui proprietà sono sconosciute. Questa funzione restituirà le informazioni desiderate per le colonne specificate oppure un array con le informazioni di <i>tutte</i> le colonne del risultato della query ove non si specifichi alcuna colonna.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_col_info</span><span style="color: #007700">(</span><span style="color: #DD0000">'type'</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">offset</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> type&#160;</dt>
<dd> (stringa) Quale informazione si desidera recuperare. I possibili valori sono una fra quelli seguenti (elenco preso dalla <a rel="nofollow" class="external text" href="http://jvmultimedia.com/docs/ezsql/ez_sql_help.htm">documentazione ezSQL</a>).  Default a <b>name</b>.
<ul><li>name - nome della colonna. Default.</li>
<li>table - nome della tabella a cui appartiene la colonna</li>
<li>max_length - lunghezza massima della colonna</li>
<li>not_null - 1 se la colonna non può essere NULL</li>
<li>primary_key - 1 se la colonna è una chiave primaria</li>
<li>unique_key - 1 se la colonna è una chiave univoca</li>
<li>multiple_key - 1 se la colonna e una chiave non-univoca</li>
<li>numeric - 1 se la colonna è numerica</li>
<li>blob - 1 se la colonna è di tipo BLOB</li>
<li>type - la tipologia della colonna</li>
<li>unsigned - 1 se la colonna e senza segno</li>
<li>zerofill - 1 se la colonna è zero-filled</li></ul></dd></dl>
<dl><dt> offset&#160;</dt>
<dd> (intero) Specifica la colonna dalla quale recuperare l'informazione (con <b>0</b> per la prima colonna).  Default a <b>-1</b>.
<ul><li>-1 - Recupera l'informazione per tutte le colonne. Restituisce un array. Default.</li>
<li>Non-negative intero - Recupera l'informazione per una specifica colonna (<b>0</b> per la prima).</li></ul></dd></dl>
<h2><span class="mw-headline" id="Pulizia_della_Cache">Pulizia della Cache</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=26" title="Edit section: Pulizia della Cache">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Tramite <code>flush</code> è possibile pulire la cache dei risultati SQL.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">flush</span><span style="color: #007700">();&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p><p>Tramite questo metodo si pulisce <code>$wpdb-&gt;last_result</code>, <code>$wpdb-&gt;last_query</code> e <code>$wpdb-&gt;col_info</code>.
</p>
<h2><span class="mw-headline" id="Variabili_della_Classe">Variabili della Classe</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=27" title="Edit section: Variabili della Classe">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<dl><dt> $show_errors&#160;</dt>
<dd> Se l'opzione di [#Show and Hide SQL Errors|effettuare l'echo ]] è attiva o meno.  Default a TRUE.</dd></dl>
<dl><dt> $num_queries&#160;</dt>
<dd> Il numero di query eseguite.</dd></dl>
<dl><dt> $last_query&#160;</dt>
<dd> La query più recente eseguita.</dd></dl>
<dl><dt> $last_error&#160;</dt>
<dd> Il testo dell'errore più recente generato da MySQL.</dd></dl>
<dl><dt> $queries&#160;</dt>
<dd> &#200; possibile salvare tutte le query eseguite sul database ed i relativi tempi di esecuzione impostando la costante <tt>SAVEQUERIES</tt> a <tt>TRUE</tt> (questa costante ha come valore predefinito <tt>FALSE</tt>). Se <tt>SAVEQUERIES</tt> è <tt>TRUE</tt>, le query verranno memorizzate in questa variabile sotto forma di array.</dd></dl>
<dl><dt> $last_result&#160;</dt>
<dd> I risultati dell'ultima query.</dd></dl>
<dl><dt> $col_info&#160;</dt>
<dd> Le informazioni sulle colonne dei risultati della query più recente.  See <a href="#Ottenere_informazioni_sulla_colonne">Ottenere informazioni sulla colonne</a>.</dd></dl>
<dl><dt> $insert_id&#160;</dt>
<dd> L'ID generato per una colonna <tt>AUTO_INCREMENT</tt> dalla più recente query di <tt>INSERT</tt>.</dd></dl>
<dl><dt> $num_rows&#160;</dt>
<dd> Il numero di righe restituite dall'ultima query.</dd></dl>
<dl><dt> $prefix&#160;</dt>
<dd> Il prefisso assegnato alle tabelle di WordPress per questo sito.</dd></dl>
<dl><dt> $base_prefix&#160;</dt>
<dd> Il prefisso originale come definito in <tt><a href="https://codex.wordpress.org/Editing_wp-config.php#table_prefix" title="Editing wp-config.php"> wp-config.php</a></tt>. Per il multisito: Utilizzarlo per ottenere il prefisso senza l'accodamento del numero del blog.</dd></dl>
<h3><span class="mw-headline" id="Variabili_multisito">Variabili multisito</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=28" title="Edit section: Variabili multisito">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Se vi trovate in un ambiente Multisito è possibile accedere alle seguenti variabili:
</p>
<dl><dt> $blogid&#160;</dt>
<dd>  L'id del sito (blog) corrente.</dd>
<dt> $siteid&#160;</dt>
<dd>  L'id del network corrente (formalmente "sito"). WordPress attualmente supporta solo un network per le installazioni multisito, ma ciò potrebbe cambiare in futuro. Si vedano i seguente articoli per maggiori informazioni:</dd></dl>
<ul><li> <a rel="nofollow" class="external text" href="http://wordpress.org/support/topic/wordpress-difference-between-site_id-and-blog_id?replies=11">WordPress: difference between site_id and blog_id?</a></li>
<li> <a rel="nofollow" class="external free" href="http://stackoverflow.com/a/4189358/1924128">http://stackoverflow.com/a/4189358/1924128</a> - Un'altra valida risposta alla medesima domanda (in inglese).</li></ul>
<h2><span class="mw-headline" id="Tabelle">Tabelle</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=29" title="Edit section: Tabelle">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Le tabelle del database di WordPress sono facilmente referenziate nelal classe <code>wpdb</code>.
</p>
<dl><dt> $posts&#160;</dt>
<dd> La tabella degli <a href="https://codex.wordpress.org/Database_Description#Table:_wp_posts" title="Database Description">Articoli</a>.</dd></dl>
<dl><dt> $postmeta&#160;</dt>
<dd> La tabella dei <a href="https://codex.wordpress.org/Database_Description#Table:_wp_postmeta" title="Database Description">Meta dati degli articoli</a> (detta anche <a href="https://codex.wordpress.org/Custom_Fields" title="Custom Fields">Campi personalizzati</a>).</dd></dl>
<dl><dt> $comments&#160;</dt>
<dd> La tabella dei <a href="https://codex.wordpress.org/Database_Description#Table:_wp_comments" title="Database Description">Cmmenti</a>.</dd></dl>
<dl><dt> $commentmeta&#160;</dt>
<dd> La tabella contenente le inforzaioni addizionali sui commenti.</dd></dl>
<dl><dt> $terms&#160;</dt>
<dd> La tabella <a href="https://codex.wordpress.org/Database_Description#Table:_wp_terms" title="Database Description">terms</a> contiene la 'descrizione' delle Categorie, della Categorie dei Link, dei Tag e dei termini di altre tassonomie eventualmente presenti.</dd></dl>
<dl><dt> $term_taxonomy&#160;</dt>
<dd> La tabella <a href="https://codex.wordpress.org/Database_Description#Table:_wp_term_taxonomy" title="Database Description">term_taxonomy</a> descrive le varie tassonomie (classi di termini). Le Categorie, le Categorie dei Link  ed i Tag sono tassonomie.</dd></dl>
<dl><dt> $term_relationships&#160;</dt>
<dd> La tabella <a href="https://codex.wordpress.org/Database_Description#Table:_wp_term_relationships" title="Database Description">term relationships</a> contiene il collegamento fra un termine e l'oggetto che utilizza tale termine, ad esempio questo file punta a ciascuna Category utilizzata in ciascun Articolo.</dd></dl>
<dl><dt> $users&#160;</dt>
<dd> La tabella degli <a href="https://codex.wordpress.org/Database_Description#Table:_wp_users" title="Database Description">Utenti</a>.</dd></dl>
<dl><dt> $usermeta&#160;</dt>
<dd> La tabella <a href="https://codex.wordpress.org/Database_Description#Table:_wp_usermeta" title="Database Description">usermeta</a> contiene le informazioni aggiuntive sugli utenti quali il nickname, descrizioni e permessi.</dd></dl>
<dl><dt> $links&#160;</dt>
<dd> La tabella dei <a href="https://codex.wordpress.org/Database_Description#Table:_wp_links" title="Database Description">Link</a>.</dd></dl>
<dl><dt> $options&#160;</dt>
<dd> La tabella delle <a href="https://codex.wordpress.org/Database_Description#Table:_wp_options" title="Database Description">Opzioni</a>.</dd></dl>
<h3><span class="mw-headline" id="Tabelle_Multisito">Tabelle Multisito</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=30" title="Edit section: Tabelle Multisito">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Questa tabelle sono utilizzate solo in installazioni multisito.
</p>
<dl><dt> $blogs&#160;</dt>
<dd> La tabella dei [Database Description#Table:_wp_blogs|Blog]] contiene una lista dei vari blog (siti) creati per il network.</dd></dl>
<dl><dt> $signups&#160;</dt>
<dd> La tabella delle <a href="https://codex.wordpress.org/Database_Description#Table:_wp_signups" title="Database Description">Registrazioni</a>.</dd></dl>
<dl><dt> $site&#160;</dt>
<dd> La tabella <a href="https://codex.wordpress.org/Database_Description#Table:_wp_site" title="Database Description">Site</a> contiene un elenco del network (precedentemente conosciuti come "siti" in WPMU) che sono stati creati durante l'installazione (solitamente esiste solo un sito elencato inq uesta tabella).</dd></dl>
<dl><dt> $sitemeta&#160;</dt>
<dd> La tabella delle <a href="https://codex.wordpress.org/Database_Description#Table:_wp_sitemeta" title="Database Description">Impostazioni del Network (metadati del sito)</a> coentiene le impostazioni applicabili all'intera installazione multisito.</dd></dl>
<dl><dt> $sitecategories&#160;</dt>
<dd> La tabella della <a href="https://codex.wordpress.org/Database_Description#Table:_wp_sitecategories" title="Database Description">Categorie del sito</a>.</dd></dl>
<dl><dt> $registration_log&#160;</dt>
<dd> La tabella del <a href="https://codex.wordpress.org/Database_Description#Table:_wp_registration_log" title="Database Description">Log delle registrazioni</a>.</dd></dl>
<dl><dt> $blog_versions&#160;</dt>
<dd> La tabella <a href="https://codex.wordpress.org/Database_Description#Table:_wp_blog_versions" title="Database Description">delle versioni del blog</a>.</dd></dl>
<h2><span class="mw-headline" id="File_sorgente">File sorgente</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=31" title="Edit section: File sorgente">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><tt>wpdb()</tt> si trova in <code><a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/tags/5.1.1/src/wp-includes/wp-db.php#L0">wp-includes/wp-db.php</a></code>.
</p>
<h2><span class="mw-headline" id="Correlati">Correlati</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Riferimento_classi/wpdb&amp;action=edit&amp;section=32" title="Edit section: Correlati">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Articles">Articles</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Template:Query_Tags&amp;action=edit&amp;section=T-1" title="Template:Query Tags">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> Article: <a href="https://codex.wordpress.org/The_Loop" title="The Loop">The Loop</a> - A basic overview of its use of query within the WordPress loop.</li>
<li> Article: <a href="https://codex.wordpress.org/Query_Overview" title="Query Overview">Query Overview</a> - Explanation of how to determine which queries generate WordPress.</li>
<li> Article: <a href="https://codex.wordpress.org/Custom_Queries" title="Custom Queries"> Customizing Queries via Hook</a></li>
<li> Article: <a href="https://codex.wordpress.org/Displaying_Posts_Using_a_Custom_Select_Query" title="Displaying Posts Using a Custom Select Query"> View Articles MYSQL query using custom</a></li>
<li> Article: <a href="https://codex.wordpress.org/Making_Advanced_Taxonomy_Queries" title="Making Advanced Taxonomy Queries"> Build advanced queries on Taxonomies</a></li>
<li> Article: <a href="https://codex.wordpress.org/Making_Custom_Queries_using_Offset_and_Pagination" title="Making Custom Queries using Offset and Pagination"> Build custom query using Offset and pagination</a></li></ul>
<h3><span class="mw-headline" id="Code_Documentation">Code Documentation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Template:Query_Tags&amp;action=edit&amp;section=T-2" title="Template:Query Tags">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> Class: <a href="https://codex.wordpress.org/Class_Reference/WP_Query" title="Class Reference/WP Query"> WP_Query</a> - Detailed Overview of class WP_Query</li>
<li> Class: <a href="https://codex.wordpress.org/Class_Reference/WP_Comment_Query" title="Class Reference/WP Comment Query"> WP_Comment_Query</a> - Class for comment-related queries</li>
<li> Class: <a href="https://codex.wordpress.org/Class_Reference/WP_User_Query" title="Class Reference/WP User Query"> WP_User_Query</a> - Class for user-related queries</li>
<li> Object: <a href="https://codex.wordpress.org/Class_Reference/wpdb" title="Class Reference/wpdb"> $wpdb</a> - Overview on the use of the $wpdb object</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/set_query_var" title="Function Reference/set query var"> set_query_var()</a></li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/get_query_var" title="Function Reference/get query var"> get_query_var()</a></li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/query_posts" title="Function Reference/query posts"> query_posts()</a> - Create additional custom query</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/get_post" title="Function Reference/get post"> get_post()</a> - Take an ID of an item and return the records in the database for that article</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/get_posts" title="Function Reference/get posts" class="mw-redirect"> get_posts()</a> - A specialized function that returns an array of items</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/get_pages" title="Function Reference/get pages"> get_pages()</a> - A specialized function that returns an array of pages</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/have_posts" title="Function Reference/have posts"> have_posts()</a> - A condition that determines whether the query returned an article</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/the_post" title="Function Reference/the post"> the_post()</a> - Used to automatically set the loop after a query</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/rewind_posts" title="Function Reference/rewind posts"> rewind_posts()</a> - Clears the current loop</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/setup_postdata" title="Function Reference/setup postdata"> setup_postdata()</a> - Sets the data for a single query result within a loop</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/wp_reset_postdata" title="Function Reference/wp reset postdata"> wp_reset_postdata()</a> - Restores the previous query (usually after a loop within another loop)</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/wp_reset_query" title="Function Reference/wp reset query"> wp_reset_query()</a></li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/is_main_query" title="Function Reference/is main query"> is_main_query()</a> - Ensures that the query that is being changed is only the main query</li>
<li> Action Hook: <a href="https://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts" title="Plugin API/Action Reference/pre get posts"> pre_get_posts</a> - Change WordPress queries before they are executed</li>
<li> Action Hook: <a href="https://codex.wordpress.org/Plugin_API/Action_Reference/the_post" title="Plugin API/Action Reference/the post"> the_post</a> - Modify the post object after query</li>
<li> Filter Hook: <a href="https://codex.wordpress.org/Plugin_API/Filter_Reference/found_posts" title="Plugin API/Filter Reference/found posts"> found_posts</a> - Changes the value of the object found_posts WP_Query</li></ul>
<div style="background-color:#DFDFDF; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">See also index of <a href="https://codex.wordpress.org/Class_Reference" title="Class Reference">Class Reference</a> and index of <a href="https://codex.wordpress.org/Function_Reference" title="Function Reference">Function Reference</a>.</div>

<!-- 
NewPP limit report
Cached time: 20190429054641
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.068 seconds
Real time usage: 0.077 seconds
Preprocessor visited node count: 517/1000000
Preprocessor generated node count: 1378/1000000
Post‐expand include size: 5136/2097152 bytes
Template argument size: 1220/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   16.675      1 - -total
 47.68%    7.951      1 - Template:Languages
 12.68%    2.114      1 - Template:Trac
 12.32%    2.055      1 - Template:Class_Footer
  9.57%    1.596      2 - Template:Parameter
  7.68%    1.281      1 - Template:Query_Tags
  6.48%    1.080      1 - Template:ja
  6.45%    1.075      1 - Template:ru
  6.35%    1.058      1 - Template:Message
  6.18%    1.031      1 - Template:en
-->
