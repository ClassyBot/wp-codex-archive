<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<strong class="selflink">English</strong> • 
<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/Class">Reference/WP User Query 日本語</a> 
 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Description"><span class="tocnumber">1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Usage"><span class="tocnumber">2</span> <span class="toctext">Usage</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Methods_and_Properties"><span class="tocnumber">3</span> <span class="toctext">Methods and Properties</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Properties"><span class="tocnumber">3.1</span> <span class="toctext">Properties</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Methods"><span class="tocnumber">3.2</span> <span class="toctext">Methods</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Parameters"><span class="tocnumber">4</span> <span class="toctext">Parameters</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#User_Role_Parameter"><span class="tocnumber">4.1</span> <span class="toctext">User Role Parameter</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Include_.26_Exclude_Parameters"><span class="tocnumber">4.2</span> <span class="toctext">Include &amp; Exclude Parameters</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Blog_Parameter"><span class="tocnumber">4.3</span> <span class="toctext">Blog Parameter</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Search_Parameters"><span class="tocnumber">4.4</span> <span class="toctext">Search Parameters</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Pagination_Parameters"><span class="tocnumber">4.5</span> <span class="toctext">Pagination Parameters</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Order_.26_Orderby_Parameters"><span class="tocnumber">4.6</span> <span class="toctext">Order &amp; Orderby Parameters</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Date_Parameters"><span class="tocnumber">4.7</span> <span class="toctext">Date Parameters</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Custom_Field_Parameters"><span class="tocnumber">4.8</span> <span class="toctext">Custom Field Parameters</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Who_Parameter"><span class="tocnumber">4.9</span> <span class="toctext">Who Parameter</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Total_Count_Parameter"><span class="tocnumber">4.10</span> <span class="toctext">Total Count Parameter</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Has_Published_Posts_Parameter"><span class="tocnumber">4.11</span> <span class="toctext">Has Published Posts Parameter</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Return_Fields_Parameter"><span class="tocnumber">4.12</span> <span class="toctext">Return Fields Parameter</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="#Return_Values"><span class="tocnumber">5</span> <span class="toctext">Return Values</span></a></li>
<li class="toclevel-1 tocsection-20"><a href="#Filters"><span class="tocnumber">6</span> <span class="toctext">Filters</span></a></li>
<li class="toclevel-1 tocsection-21"><a href="#Examples"><span class="tocnumber">7</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-1 tocsection-22"><a href="#Change_Log"><span class="tocnumber">8</span> <span class="toctext">Change Log</span></a></li>
<li class="toclevel-1 tocsection-23"><a href="#Source_File"><span class="tocnumber">9</span> <span class="toctext">Source File</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="#Resources"><span class="tocnumber">10</span> <span class="toctext">Resources</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="#Related"><span class="tocnumber">11</span> <span class="toctext">Related</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Description">Description</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=1" title="Edit section: Description">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><tt>WP_User_Query</tt> is a class, defined in <code><a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/tags/5.2.3/src/wp-includes/user.php#L0">wp-includes/user.php</a></code>, that allows querying <a href="https://codex.wordpress.org/Database_Description" title="Database Description">WordPress database</a> tables '<tt><a href="https://codex.wordpress.org/Database_Description#Table:_wp_users" title="Database Description">wp_users</a></tt>' and '<tt><a href="https://codex.wordpress.org/Database_Description#Table:_wp_usermeta" title="Database Description">wp_usermeta</a></tt>'. This class was introduced in <a href="https://codex.wordpress.org/Version_3.1" title="Version 3.1">Version 3.1</a> and as a result, the <tt>WP_User_Search</tt> class got deprecated.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=2" title="Edit section: Usage">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre>
&lt;?php
$args = array(
	.
	.
	.
);

// The Query
$user_query = new WP_User_Query( $args );

// User Loop
if (&#160;! empty( $user_query-&gt;get_results() ) ) {
	foreach ( $user_query-&gt;get_results() as $user ) {
		echo '&lt;p&gt;' . $user-&gt;display_name . '&lt;/p&gt;';
	}
} else {
	echo 'No users found.';
}
?&gt;
</pre>
<h2><span class="mw-headline" id="Methods_and_Properties">Methods and Properties</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=3" title="Edit section: Methods and Properties">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Properties">Properties</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=4" title="Edit section: Properties">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<dl><dt> <tt>$query_vars</tt></dt>
<dd> An associative array containing the query variables and their respective values, after parsing.</dd></dl>
<dl><dt> <tt>$results</tt></dt>
<dd> An array containing a list of found users.</dd></dl>
<dl><dt> <tt>$total_users</tt></dt>
<dd> Total number of found users for the current query.</dd></dl>
<dl><dt> <tt>$query_fields</tt></dt>
<dd> SQL clauses for the return fields.</dd></dl>
<dl><dt> <tt>$query_from</tt></dt>
<dd> SQL clauses </dd></dl>
<dl><dt> <tt>$query_where</tt></dt>
<dd> SQL clauses</dd></dl>
<dl><dt> <tt>$query_orderby</tt></dt>
<dd> SQL clauses for sorting retrieved users.</dd></dl>
<dl><dt> <tt>$query_limit</tt></dt>
<dd> SQL clauses for limiting retrieved users.</dd></dl>
<h3><span class="mw-headline" id="Methods">Methods</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=5" title="Edit section: Methods">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<dl><dt> <tt>get()</tt></dt>
<dd> Retrieve query variable.</dd></dl>
<dl><dt> <tt>set()</tt></dt>
<dd> Set query variable.</dd></dl>
<dl><dt> <tt>get_results()</tt></dt>
<dd> Return the list of users.</dd></dl>
<dl><dt> <tt>get_total()</tt></dt>
<dd> Return the total number of users for the current query.</dd></dl>
<h2><span class="mw-headline" id="Parameters">Parameters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=6" title="Edit section: Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="User_Role_Parameter">User Role Parameter</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=7" title="Edit section: User Role Parameter">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Show users associated with certain role.
</p>
<ul><li> <b><tt>role</tt></b> (<i>string / array</i>) - use <a href="https://codex.wordpress.org/Roles_and_Capabilities" title="Roles and Capabilities">User Role</a>. An array or a comma-separated list of role names that users must match to be included in results. Note that this is an inclusive list: users must match *each* role. Default empty.</li>
<li> <b><tt>role__in</tt></b> (<i>array</i>) - An array of role names. Matched users must have at least one of these roles. Default empty array.  (since <a href="https://codex.wordpress.org/Version_4.4" title="Version 4.4">Version 4.4</a>).</li>
<li> <b><tt>role__not_in</tt></b> (<i>array</i>) - An array of role names to exclude. Users matching one or more of these roles will not be included in results. Default empty array. (since <a href="https://codex.wordpress.org/Version_4.4" title="Version 4.4">Version 4.4</a>).</li></ul>
<p><b>Display Administrator role users</b>
</p>
<pre>$user_query = new WP_User_Query( array( 'role' =&gt; 'Administrator' ) );
</pre>
<p><b>Display Subscriber role users</b>
</p>
<pre>$user_query = new WP_User_Query( array( 'role' =&gt; 'Subscriber' ) );
</pre>
<p><b>Display all users except Subscriber role users</b>
</p>
<pre>$user_query = new WP_User_Query( array( 'role__not_in' =&gt; 'Subscriber' ) );
</pre>
<h3><span class="mw-headline" id="Include_.26_Exclude_Parameters">Include &amp; Exclude Parameters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=8" title="Edit section: Include &amp; Exclude Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Show specific users.
</p>
<ul><li> <b><tt>include</tt></b> (<i>array</i>) - List of users to be included.</li>
<li> <b><tt>exclude</tt></b> (<i>array</i>) - List of users to be excluded.</li></ul>
<p><b>Display specific users list</b>
</p>
<pre>$user_query = new WP_User_Query( array( 'include' =&gt; array( 1, 2, 3 ) ) );
</pre>
<p><b>Display all users except a specific list of users</b>
</p>
<pre>$user_query = new WP_User_Query( array( 'exclude' =&gt; array( 4, 5, 6 ) ) );
</pre>
<h3><span class="mw-headline" id="Blog_Parameter">Blog Parameter</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=9" title="Edit section: Blog Parameter">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Show users associated with certain blog on the <a href="https://codex.wordpress.org/Glossary#Network" title="Glossary">network</a>.
</p>
<ul><li> <b><tt>blog_id</tt></b> (<i>int</i>) - The blog id on a <a href="https://codex.wordpress.org/Glossary#Multisite" title="Glossary">multisite</a> environment. Defaults to the current blog id.</li></ul>
<p><b>Display users from blog 33</b>
</p>
<pre>$user_query = new WP_User_Query( array( 'blog_id' =&gt; 33 ) );
</pre>
<h3><span class="mw-headline" id="Search_Parameters">Search Parameters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=10" title="Edit section: Search Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Search users.
</p>
<ul><li> <b><tt>search</tt></b> (<i>string</i>) - Searches for possible string matches on columns. Use of the &#42; wildcard before and/or after the string will match on columns <tt>starting with&#42;</tt>, <tt>&#42;ending with</tt>, or <tt>&#42;containing&#42;</tt> the string you enter.</li>
<li> <b><tt>search_columns</tt></b> (<i>array</i>) - List of <a href="https://codex.wordpress.org/Database_Description#Table:_wp_users" title="Database Description">database table columns</a> to matches the search string across multiple columns.
<ul><li> '<tt>ID</tt>' - Search by user id.</li>
<li> '<tt>user_login</tt>' - Search by user login.</li>
<li> '<tt>user_nicename</tt>' - Search by user nicename.</li>
<li> '<tt>user_email</tt>' - Search by user email.</li>
<li> '<tt>user_url</tt>' - Search by user url.</li></ul></li></ul>
<p>We can use the <a href="https://codex.wordpress.org/Plugin_API/Filter_Reference/user_search_columns" title="Plugin API/Filter Reference/user search columns">user_search_columns</a> filter to modify the search columns.
</p><p><b>Display users based on a keyword search</b>
</p>
<pre>$user_query = new WP_User_Query( array( 'search' =&gt; 'Rami' ) );
</pre>
<p><b>Display users based on a keyword search, only on login and email columns</b>
</p>
<pre>$args = array(
	'search'         =&gt; 'Rami',
	'search_columns' =&gt; array( 'user_login', 'user_email' )
);
$user_query = new WP_User_Query( $args );
</pre>
<h3><span class="mw-headline" id="Pagination_Parameters">Pagination Parameters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=11" title="Edit section: Pagination Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Limit retrieved Users.
</p>
<ul><li> <b><tt>number</tt></b> (<i>int</i>) - The maximum returned number of results (needed in pagination).</li>
<li> <b><tt>offset</tt></b> (<i>int</i>) - Offset the returned results (needed in pagination).</li>
<li> <b><tt>paged</tt></b> (<i>int</i>) - When used with number, defines the page of results to return. Default 1. (since <a href="https://codex.wordpress.org/Version_4.4" title="Version 4.4">Version 4.4</a>).</li></ul>
<p><b>Display 10 users</b>
</p>
<pre>$user_query = new WP_User_Query( array( 'number' =&gt; 10 ) );
</pre>
<p><b>Display 5 users starting from 25</b>
</p>
<pre>$user_query = new WP_User_Query( array( 'number' =&gt; 5, 'offset' =&gt; 25 ) );
</pre>
<h3><span class="mw-headline" id="Order_.26_Orderby_Parameters">Order &amp; Orderby Parameters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=12" title="Edit section: Order &amp; Orderby Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Sort retrieved Users.
</p>
<ul><li> <b><tt>orderby</tt></b> (<i>string</i>) - Sort retrieved users by parameter.  Defaults to 'login'.
<ul><li> '<tt>ID</tt>' - Order by user id.</li>
<li> '<tt>display_name</tt>' - Order by user display name.</li>
<li> '<tt>name</tt>' / '<tt>user_name</tt>' - Order by user name.</li>
<li> '<tt>include</tt>' - Order by the included list of user_ids (requires the include parameter) (since <a href="https://codex.wordpress.org/Version_4.1" title="Version 4.1">Version 4.1</a>).</li>
<li> '<tt>login</tt>' / '<tt>user_login</tt>' - Order by user login.</li>
<li> '<tt>nicename</tt>' / '<tt>user_nicename</tt>' - Order by user nicename.</li>
<li> '<tt>email</tt>' / '<tt>user_email</tt>' - Order by user email.</li>
<li> '<tt>url</tt>' / '<tt>user_url</tt>' - Order by user url.</li>
<li> '<tt>registered</tt>' / '<tt>user_registered</tt>' - Order by user registered date.</li>
<li> '<tt>post_count</tt>' - Order by user post count.</li>
<li> '<tt>meta_value</tt>' - Note that a 'meta_key=keyname' must also be present in the query (available with <a href="https://codex.wordpress.org/Version_3.7" title="Version 3.7">Version 3.7</a>).</li>
<li> '<tt>meta_value_num</tt>' - Note that a 'meta_key=keyname' must also be present in the query (available with <a href="https://codex.wordpress.org/Version_4.2" title="Version 4.2">Version 4.2</a>).</li></ul></li></ul>
<ul><li> <b><tt>order</tt></b> (<i>string</i>) - Designates the ascending or descending order of the '<tt>orderby</tt>' parameter.  Defaults to 'ASC'.
<ul><li> '<tt>ASC</tt>' - ascending order from lowest to highest values (1, 2, 3; a, b, c).</li>
<li> '<tt>DESC</tt>' - descending order from highest to lowest values (3, 2, 1; c, b, a).</li></ul></li></ul>
<p><b>Display users sorted by Post Count, Descending order</b>
</p>
<pre>$user_query = new WP_User_Query( array ( 'orderby' =&gt; 'post_count', 'order' =&gt; 'DESC' ) );
</pre>
<p><b>Display users sorted by registered, Ascending order</b>
</p>
<pre>$user_query = new WP_User_Query( array ( 'orderby' =&gt; 'registered', 'order' =&gt; 'ASC' ) );
</pre>
<h3><span class="mw-headline" id="Date_Parameters">Date Parameters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=13" title="Edit section: Date Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Date queries are handled through to the <tt>WP_Date_Query</tt> object and are applied to the <tt>user_registered</tt> field.
</p><p>Available since <a rel="nofollow" class="external text" href="http://codex.wordpress.org/Version_4.1">version 4.1</a>. 
</p>
<ul><li> <b><tt>date_query</tt></b> (<i>array</i>) - See the  documentation for the <tt><a href="https://codex.wordpress.org/Class_Reference/WP_Query#Date_Parameters" title="Class Reference/WP Query"> WP_Query</a></tt> class.</li></ul>
<p><b>Find users that registered during the last 12 hours:</b>
</p>
<pre>$args = array(
    'date_query' =&gt; array( 
        array( 'after' =&gt; '12 hours ago', 'inclusive' =&gt; true )  
    )
);
$user_query = new WP_User_Query( $args );
</pre>
<h3><span class="mw-headline" id="Custom_Field_Parameters">Custom Field Parameters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=14" title="Edit section: Custom Field Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Show users associated with a certain custom field.
</p><p>The <tt><a href="https://codex.wordpress.org/Class_Reference/WP_Meta_Query" title="Class Reference/WP Meta Query"> WP_Meta_Query</a></tt> class is used to parse this part of the query since <a href="https://codex.wordpress.org/Version_3.2" title="Version 3.2">3.2.0</a>, so check the docs for that class for the full, up to date <a href="https://codex.wordpress.org/Class_Reference/WP_Meta_Query#Accepted_Arguments" title="Class Reference/WP Meta Query"> list of arguments</a>.
</p>
<ul><li> <b><tt>meta_key</tt></b> (<i>string</i>) - Custom field key.</li>
<li> <b><tt>meta_value</tt></b> (<i>string</i>) - Custom field value.</li>
<li> <b><tt>meta_compare</tt></b> (<i>string</i>) - Operator to test the '<tt>meta_value</tt>'. See <tt>'compare'</tt> below.</li></ul>
<ul><li> <b><tt>meta_query</tt></b> (<i>array</i>) - Custom field parameters (available with <a href="https://codex.wordpress.org/Version_3.5" title="Version 3.5">Version 3.5</a>).
<ul><li> <b><tt>key</tt></b> (<i>string</i>) - Custom field key.</li>
<li> <b><tt>value</tt></b> (<i>string</i>|<i>array</i>) - Custom field value (<i>Note</i>: Array support is limited to a compare value of 'IN', 'NOT IN', 'BETWEEN', 'NOT BETWEEN', 'EXISTS' or 'NOT EXISTS')</li>
<li> <b><tt>compare</tt></b> (<i>string</i>) - Operator to test. Possible values are '=', '!=', '&gt;', '&gt;=', '&lt;', '&lt;=', 'LIKE', 'NOT LIKE', 'IN', 'NOT IN', 'BETWEEN', 'NOT BETWEEN', 'EXISTS', and 'NOT EXISTS'&#160;; 'REGEXP', 'NOT REGEXP' and 'RLIKE' were added in WordPress 3.7. Default value is '='.<br /><b>Note:</b> Currently <tt>'NOT EXISTS'</tt> does not always work as intended if <tt>'relation'</tt> is <tt>'OR'</tt> when, (1) using the <a href="#User_Role_Parameter"><tt>'role'</tt></a> parameter on single site installs, or (2) for any query on multisite. See <a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/ticket/23849">ticket #23849</a>.<br /><b>Note 2:</b> with 'LIKE' the value parameter is change to '%&lt;value&gt;%'. So the string is searched anywhere in the custom field value. If value parameter contain a '%' it is escaped. So it bans to search a string beginning by some characters, for exemple... To construct this query you must use 'REGEXP' with a regular expression in value parameter (ex&#160;: '^n.*' matchs all values that beginning by "n" or "N").</li>
<li> <b><tt>type</tt></b> (<i>string</i>) - Custom field type. Possible values are 'NUMERIC', 'BINARY', 'CHAR', 'DATE', 'DATETIME', 'DECIMAL', 'SIGNED', 'TIME', 'UNSIGNED'. Default value is 'CHAR'. You can also specify precision and scale for the 'DECIMAL' and 'NUMERIC' types (for example, 'DECIMAL(10,5)' or 'NUMERIC(10)' are valid).</li></ul></li></ul>
<p><b>Display users from Israel</b>
</p>
<pre>$user_query = new WP_User_Query( array( 'meta_key' =&gt; 'country', 'meta_value' =&gt; 'Israel' ) );
</pre>
<p><b>Display users under 30 years old</b>
</p>
<pre>$user_query = new WP_User_Query( array( 'meta_key' =&gt; 'age', 'meta_value' =&gt; '30', 'meta_compare' =&gt; '&lt;' ) );
</pre>
<p><b>Multiple custom user fields handling</b>
</p>
<pre>$args = array(
	'meta_query' =&gt; array(
		'relation' =&gt; 'OR',
			array(
				'key'     =&gt; 'country',
				'value'   =&gt; 'Israel',
	 			'compare' =&gt; '='
			),
			array(
				'key'     =&gt; 'age',
				'value'   =&gt; array( 20, 30 ),
				'type'    =&gt; 'numeric',
				'compare' =&gt; 'BETWEEN'
			)
	)
 );
$user_query = new WP_User_Query( $args );
</pre>
<h3><span class="mw-headline" id="Who_Parameter">Who Parameter</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=15" title="Edit section: Who Parameter">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Which users?
</p>
<ul><li> <b><tt>who</tt></b> (<i>string</i>) - Which users to query. Currently only 'authors' is supported. Default is all users.</li></ul>
<p><b>Display only authors</b>
</p>
<pre>$user_query = new WP_User_Query( array( 'who' =&gt; 'authors' ) );
</pre>
<p>Equals to:
</p>
<pre>$args = array(
	'meta_key'     =&gt; 'user_level',
	'meta_value'   =&gt; '0',
	'meta_compare' =&gt; '!=',
	'blog_id'      =&gt; 0
)
$user_query = new WP_User_Query( $args );
</pre>
<h3><span class="mw-headline" id="Total_Count_Parameter">Total Count Parameter</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=16" title="Edit section: Total Count Parameter">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> <b><tt>count_total</tt></b> (<i>boolean</i>) - Whether to count the total number of users found. When <tt>true</tt> (default), the total number of results for the query can be retrieved using the <tt>get_total()</tt> method. If you don't need the total number of results, set this to <tt>false</tt>.</li></ul>
<h3><span class="mw-headline" id="Has_Published_Posts_Parameter">Has Published Posts Parameter</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=17" title="Edit section: Has Published Posts Parameter">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> <b><tt>has_published_posts</tt></b> (<i>boolean / array</i>) - Pass an array of post types to filter results to users who have published posts in those post types. <tt>true</tt> is an alias for all public post types. Default is <tt>null</tt>. Since <a href="https://codex.wordpress.org/Version_4.3" title="Version 4.3">Version 4.3</a>.</li></ul>
<h3><span class="mw-headline" id="Return_Fields_Parameter">Return Fields Parameter</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=18" title="Edit section: Return Fields Parameter">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Set return values.
</p>
<ul><li> <b><tt>fields</tt></b> (<i>string|array</i>) - Which fields to return. Defaults to <i>all</i>.
<ul><li> '<tt>ID</tt>' - Return an array of user id's.</li>
<li> '<tt>display_name</tt>' - Return an array of user display names.</li>
<li> '<tt>login</tt>' / '<tt>user_login</tt>' - Return an array of user login names.</li>
<li> '<tt>nicename</tt>' / '<tt>user_nicename</tt>' - Return an array of user nicenames.</li>
<li> '<tt>email</tt>' / '<tt>user_email</tt>' - Return an array of user emails.</li>
<li> '<tt>url</tt>' / '<tt>user_url</tt>' - Return an array of user urls.</li>
<li> '<tt>registered</tt>' / '<tt>user_registered</tt>' - Return an array of user registered dates.</li>
<li> '<tt>all</tt> (default) or <tt>all_with_meta</tt>' - Returns an array of <a href="https://codex.wordpress.org/Class_Reference/WP_User" title="Class Reference/WP User">WP_User</a> objects.  Must pass an array to subset fields returned. *'all_with_meta' currently returns the same fields as 'all' which does not include user fields stored in wp_usermeta. You must create a second query to get the user meta fields by ID or use the __get PHP magic method to get the values of these fields.</li></ul></li></ul>
<p><b>Return an array of WP_User object</b>
</p>
<pre>$user_query = new WP_User_Query( array( 'role' =&gt; 'editor', 'fields' =&gt; 'all' ) );
</pre>
<p><b>Return List all blog editors, return limited fields in resulting row objects:</b>
</p>
<pre>$user_fields = array( 'user_login', 'user_nicename', 'user_email', 'user_url' );
$user_query = new WP_User_Query( array( 'role' =&gt; 'editor', 'fields' =&gt; $user_fields ) );
</pre>
<h2><span class="mw-headline" id="Return_Values">Return Values</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=19" title="Edit section: Return Values">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<dl><dt> (Array)&#160;</dt>
<dd> An array of IDs, stdClass objects, or <a href="https://codex.wordpress.org/Class_Reference/WP_User" title="Class Reference/WP User">WP_User</a> objects, depending on the value of the '<tt>fields</tt>' parameter.
<ul><li>If '<tt>fields</tt>' is set to 'all' (default), or 'all_with_meta', it will return an array of <a href="https://codex.wordpress.org/Class_Reference/WP_User" title="Class Reference/WP User">WP_User</a> objects (does not include related user meta fields even with 'all_with_meta' set) .</li>
<li>If '<tt>fields</tt>' is set to an array of <tt><a href="https://codex.wordpress.org/Database_Description#Table:_wp_users" title="Database Description"> wp_users</a></tt> table fields, it will return an array of stdClass objects with only those fields.</li>
<li>If '<tt>fields</tt>' is set to any individual <tt><a href="https://codex.wordpress.org/Database_Description#Table:_wp_users" title="Database Description"> wp_users</a></tt> table field, an array of IDs will be returned.</li></ul></dd></dl>
<h2><span class="mw-headline" id="Filters">Filters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=20" title="Edit section: Filters">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> <b><tt><a href="/index.php?title=Plugin_API/Filter_Reference/found_users_query&amp;action=edit&amp;redlink=1" class="new" title="Plugin API/Filter Reference/found users query (page does not exist)">found_users_query</a></tt></b> - Alters SQL 'SELECT FOUND_ROWS()' clause to the query that returns the count total.</li></ul>
<h2><span class="mw-headline" id="Examples">Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=21" title="Edit section: Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Here is a working example if you want to search a user by first_name / last_name / description  and the default search_columns.
</p>
<pre>
// The search term
$search_term = 'Ross';

// WP_User_Query arguments
$args = array (
    'role'       =&gt; 'reporter',
    'order'      =&gt; 'ASC',
    'orderby'    =&gt; 'display_name',
    'search'     =&gt; '*' . esc_attr( $search_term ) . '*',
    'meta_query' =&gt; array(
        'relation' =&gt; 'OR',
        array(
            'key'     =&gt; 'first_name',
            'value'   =&gt; $search_term,
            'compare' =&gt; 'LIKE'
        ),
        array(
            'key'     =&gt; 'last_name',
            'value'   =&gt; $search_term,
            'compare' =&gt; 'LIKE'
        ),
        array(
            'key'     =&gt; 'description',
            'value'   =&gt; $search_term ,
            'compare' =&gt; 'LIKE'
        )
    )
);

// Create the WP_User_Query object
$wp_user_query = new WP_User_Query( $args );

// Get the results
$authors = $wp_user_query-&gt;get_results();

// Check for results
if (&#160;! empty( $authors ) ) {
    echo '&lt;ul&gt;';
    // loop through each author
    foreach ( $authors as $author ) {
        // get all the user's data
        $author_info = get_userdata( $author-&gt;ID );
        echo '&lt;li&gt;' . $author_info-&gt;first_name . ' ' . $author_info-&gt;last_name . '&lt;/li&gt;';
    }
    echo '&lt;/ul&gt;';
} else {
    echo 'No authors found';
}
</pre>
<h2><span class="mw-headline" id="Change_Log">Change Log</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=22" title="Edit section: Change Log">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> <a href="https://codex.wordpress.org/Version_4.4" title="Version 4.4">4.4.0</a>:
<ul><li> Add <tt>paged</tt>, <tt>role__in</tt>, <tt>role__not_in</tt>  Parameters</li>
<li> Update <tt>role</tt> Parameter to permit an array or comma-separated list of values</li>
<li> Update <tt>number</tt> Parameter to support querying for all users with using -1</li></ul></li></ul>
<ul><li> <a href="https://codex.wordpress.org/Version_4.3" title="Version 4.3">4.3.0</a>:
<ul><li> Add <tt>has_published_posts</tt> Parameter</li></ul></li></ul>
<ul><li> <a href="https://codex.wordpress.org/Version_4.2" title="Version 4.2">4.2.0</a>:
<ul><li> Add <tt>meta_value_num</tt> option to <tt>orderby</tt> Parameter</li></ul></li></ul>
<ul><li> <a href="https://codex.wordpress.org/Version_4.1" title="Version 4.1">4.1.0</a>:
<ul><li> Add <tt>include</tt> option to <tt>orderby</tt> Parameter</li></ul></li></ul>
<ul><li> <a href="https://codex.wordpress.org/Version_3.5" title="Version 3.5">3.5.0</a>:
<ul><li> Add <tt>$query_vars</tt> Property</li>
<li> Add <tt>get()</tt> Methods</li>
<li> Add <tt>set()</tt> Methods</li>
<li> Add <tt>meta_query</tt> Parameter</li></ul></li></ul>
<ul><li> Since: <a href="https://codex.wordpress.org/Version_3.1" title="Version 3.1">3.1.0</a></li></ul>
<h2><span class="mw-headline" id="Source_File">Source File</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=23" title="Edit section: Source File">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><tt>WP_User_Query</tt> is located in <code><a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/tags/5.2.3/src/wp-includes/class-wp-user-query.php#L0">wp-includes/class-wp-user-query.php</a></code>.
</p>
<h2><span class="mw-headline" id="Resources">Resources</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=24" title="Edit section: Resources">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> <a rel="nofollow" class="external text" href="http://generatewp.com/wp_user_query/">WordPress WP_User_Query Generator</a></li>
<li> <a rel="nofollow" class="external text" href="http://wpsmith.net/?p=17712">An Introduction to WP_User_Query Class</a></li></ul>
<h2><span class="mw-headline" id="Related">Related</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/WP_User_Query&amp;action=edit&amp;section=25" title="Edit section: Related">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> <a href="https://codex.wordpress.org/Database_Description#Table:_wp_users_2" title="Database Description"> Database 'wp_users' Table</a></li>
<li> <a href="https://codex.wordpress.org/Class_Reference/WP_User" title="Class Reference/WP User"> WP_User</a> class</li>
<li> <a href="https://codex.wordpress.org/Function_Reference/get_users" title="Function Reference/get users"><tt>get_users()</tt></a></li>
<li> <a href="https://codex.wordpress.org/Class_Reference/WP_Query" title="Class Reference/WP Query"> WP_Query</a> - Class for post-related queries</li>
<li> <a href="https://codex.wordpress.org/Class_Reference/WP_Comment_Query" title="Class Reference/WP Comment Query"> WP_Comment_Query</a> - Class for comment-related queries</li></ul>
<div style="background-color:#DFDFDF; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">See also index of <a href="https://codex.wordpress.org/Class_Reference" title="Class Reference">Class Reference</a> and index of <a href="https://codex.wordpress.org/Function_Reference" title="Function Reference">Function Reference</a>.</div>


