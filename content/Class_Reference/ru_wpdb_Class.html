<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<a href="https://codex.wordpress.org/Class_Reference/wpdb" title="Class Reference/wpdb">English</a> • 
<a href="https://codex.wordpress.org/it:Riferimento_classi/wpdb" title="it:Riferimento classi/wpdb">Italiano</a> • 

<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/関数リファレンス/wpdb_Class">日本語</a> 
<strong class="selflink">Русский</strong> • 

<a href="https://codex.wordpress.org/zh-cn:Class_Reference/wpdb" title="zh-cn:Class Reference/wpdb">中文(简体)</a> • 
<a href="https://codex.wordpress.org/zh-tw:Class_Reference/wpdb" title="zh-tw:Class Reference/wpdb">中文(繁體)</a> • 
 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div style="background-color:#FAEBD7; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">Эта страница <a href="https://codex.wordpress.org/Category:Stubs" title="Category:Stubs">помечена</a> как незавершённая. Вы можете <a href="https://codex.wordpress.org/Codex:Contributing" title="Codex:Contributing">помочь</a> проекту, <b><a rel="nofollow" class="external text" href="https://codex.wordpress.org/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit">дополнив её</a></b>.</div>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.92.D0.B7.D0.B0.D0.B8.D0.BC.D0.BE.D0.B4.D0.B5.D0.B9.D1.81.D1.82.D0.B2.D0.B8.D0.B5_.D1.81_.D0.B1.D0.B0.D0.B7.D0.B0.D0.BC.D0.B8_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"><span class="tocnumber">1</span> <span class="toctext">Взаимодействие с базами данных</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#.D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.24wpdb_Object"><span class="tocnumber">1.1</span> <span class="toctext">Использование $wpdb Object</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3"><a href="#.D0.9F.D1.80.D0.BE.D0.B8.D0.B7.D0.B2.D0.BE.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.D0.97.D0.B0.D0.BF.D1.80.D0.BE.D1.81.D1.8B_.D0.BA_.D0.91.D0.B0.D0.B7.D0.B5_.D0.94.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"><span class="tocnumber">2</span> <span class="toctext">Произвольные Запросы к Базе Данных</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B"><span class="tocnumber">2.1</span> <span class="toctext">Примеры</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#SELECT_a_Variable"><span class="tocnumber">3</span> <span class="toctext">SELECT a Variable</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Examples"><span class="tocnumber">3.1</span> <span class="toctext">Examples</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#.D0.92.D1.8B.D0.B1.D0.BE.D1.80.D0.BA.D0.B0.28SELECT.29_.D0.A1.D1.82.D1.80.D0.BE.D0.BA.D0.B8"><span class="tocnumber">4</span> <span class="toctext">Выборка(SELECT) Строки</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_2"><span class="tocnumber">4.1</span> <span class="toctext">Примеры</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#SELECT_a_Column"><span class="tocnumber">5</span> <span class="toctext">SELECT a Column</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Examples_2"><span class="tocnumber">5.1</span> <span class="toctext">Examples</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#.D0.92.D1.8B.D0.B1.D0.BE.D1.80.D0.BA.D0.B0.28SELECT.29_Generic_Results"><span class="tocnumber">6</span> <span class="toctext">Выборка(SELECT) Generic Results</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_3"><span class="tocnumber">6.1</span> <span class="toctext">Примеры</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#.D0.92.D1.81.D1.82.D0.B0.D0.B2.D0.BA.D0.B0.28INSERT.29_.D1.81.D1.82.D1.80.D0.BE.D0.BA"><span class="tocnumber">7</span> <span class="toctext">Вставка(INSERT) строк</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_4"><span class="tocnumber">7.1</span> <span class="toctext">Примеры</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#UPDATE_.D1.81.D1.82.D1.80.D0.BE.D0.BA.D0.B8"><span class="tocnumber">8</span> <span class="toctext">UPDATE строки</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#Examples_3"><span class="tocnumber">8.1</span> <span class="toctext">Examples</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="#.D0.97.D0.B0.D1.89.D0.B8.D1.82.D0.B0_.D0.97.D0.B0.D0.BF.D1.80.D0.BE.D1.81.D0.BE.D0.B2_.D0.BE.D1.82_.D0.90.D1.82.D0.B0.D0.BA_.D1.82.D0.B8.D0.BF.D0.B0_SQL_Injection"><span class="tocnumber">9</span> <span class="toctext">Защита Запросов от Атак типа SQL Injection</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_5"><span class="tocnumber">9.1</span> <span class="toctext">Примеры</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="#Show_and_Hide_SQL_Errors"><span class="tocnumber">10</span> <span class="toctext">Show and Hide SQL Errors</span></a></li>
<li class="toclevel-1 tocsection-20"><a href="#Getting_Column_Information"><span class="tocnumber">11</span> <span class="toctext">Getting Column Information</span></a></li>
<li class="toclevel-1 tocsection-21"><a href="#Clearing_the_Cache"><span class="tocnumber">12</span> <span class="toctext">Clearing the Cache</span></a></li>
<li class="toclevel-1 tocsection-22"><a href="#Class_Variables"><span class="tocnumber">13</span> <span class="toctext">Class Variables</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="#Multi-Site_Variables"><span class="tocnumber">13.1</span> <span class="toctext">Multi-Site Variables</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="#Tables"><span class="tocnumber">14</span> <span class="toctext">Tables</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="#Multisite_Tables"><span class="tocnumber">14.1</span> <span class="toctext">Multisite Tables</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-26"><a href="#Related"><span class="tocnumber">15</span> <span class="toctext">Related</span></a>
<ul>
<li class="toclevel-2"><a href="#Articles"><span class="tocnumber">15.1</span> <span class="toctext">Articles</span></a></li>
<li class="toclevel-2"><a href="#Code_Documentation"><span class="tocnumber">15.2</span> <span class="toctext">Code Documentation</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id=".D0.92.D0.B7.D0.B0.D0.B8.D0.BC.D0.BE.D0.B4.D0.B5.D0.B9.D1.81.D1.82.D0.B2.D0.B8.D0.B5_.D1.81_.D0.B1.D0.B0.D0.B7.D0.B0.D0.BC.D0.B8_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85">Взаимодействие с базами данных</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=1" title="Edit section: Взаимодействие с базами данных">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>WordPress предоставляет класс функций для всех манипуляций с базами данных.  Данный класс называется <code>wpdb</code> и основан на <a rel="nofollow" class="external text" href="http://justinvincent.com/ezsql">ezSQL</a> свободном классе, написанном и поддерживаемом <a rel="nofollow" class="external text" href="http://www.jvmultimedia.com">Justin Vincent</a>.
</p>
<h3><span class="mw-headline" id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.24wpdb_Object">Использование $wpdb Object</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=2" title="Edit section: Использование $wpdb Object">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><b>Методы класса <code>wpdb()</code> не должны вызываться напрямую.</b> 
</p><p>WordPress предоставляет глобальную переменную, <b><code>$wpdb</code></b>, которая является экземпляром уже настроенного класса для обращения с базами данных WordPress.  Всегда используйте глобальную переменную <code>$wpdb</code>.  (Не забудьте про <a rel="nofollow" class="external text" href="http://www.php.net/manual/en/language.variables.scope.php#language.variables.scope.global">глобализацию</a> <code>$wpdb</code> когда используете её в каких либо пользовательских функциях.)
</p><p>Объект <code>$wpdb</code> может использоваться для чтения данных из <i>любой</i> таблицы в базе данных WordPress (например пользовательские таблицы), а не только стандартных таблиц которые создаёт WordPress. Например для выборки(запроса SELECT) некоторой информации из пользовательской таблицы названной "mytable", вы можете сделать следующее:
<code>
</p>
<pre>$myrows = $wpdb-&gt;<a href="#SELECT_Generic_Results">get_results</a>( "SELECT id, name FROM mytable" );
</pre>
<p></code>
Объект <code>$wpdb</code> может обращаться с любым количеством таблиц, но только одной базой данных - базой данных WordPress.  В редких случаях, если вам понадобится подключится к другой базе данных, вам придётся создать экземпляр нового объекта из класса <code>wpdb</code> с соответствующими подробностями соединения для пользовательской базы данных.  Для чрезвычайно сложных установок с множеством баз данных, рассмотрите возможность использования <a rel="nofollow" class="external text" href="http://wordpress.org/extend/plugins/hyperdb/">hyperdb</a>.
</p>
<h2><span class="mw-headline" id=".D0.9F.D1.80.D0.BE.D0.B8.D0.B7.D0.B2.D0.BE.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.D0.97.D0.B0.D0.BF.D1.80.D0.BE.D1.81.D1.8B_.D0.BA_.D0.91.D0.B0.D0.B7.D0.B5_.D0.94.D0.B0.D0.BD.D0.BD.D1.8B.D1.85">Произвольные Запросы к Базе Данных</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=3" title="Edit section: Произвольные Запросы к Базе Данных">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Функция <code>query</code> позволяет вам выполнить <i>любой</i> SQL запрос к базе данных WordPress.  Однако, лучше использовать более специфичные функции(смотрите ниже) для SELECT запросов.
<code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'query'</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> query&#160;</dt>
<dd> (string) SQL запрос который вы хотите выполнить.</dd></dl>
<p>Функция возвращает целое число, соответствующее количеству затронутых/выбранных строк.  При ошибке MySQL функция возвращает <code>FALSE</code>.  (<b>Замечание</b>: поскольку 0 и FALSE могут возвратится, убедитесь, что вы используете корректный оператор сравнения: equality(равенство) <code>==</code> против identicality(идентично) <code>===</code>).
</p><p>Замечание: Как и во всех функциях данного класса которые выполняют SQL запросы, вы должны экранировать весь SQL ввод(e.g., <code>wpdb-&gt;escape($user_entered_data_string)</code>).  См. раздел <a rel="nofollow" class="external text" href="http://codex.wordpress.org/wpdb_Class#Protect_Queries_Against_SQL_Injection_Attacks">Protect Queries Against SQL Injection Attacks</a> ниже.
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B">Примеры</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=4" title="Edit section: Примеры">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Удаление мета ключа 'gargle' и значения из Post 13. (Мы добавили метод 'prepare' чтобы быть уверенными, что мы не имеем дело с недопустимой операцией или символами):
</p>
<pre>
$wpdb-&gt;query( 
	$wpdb-&gt;prepare( 
		"
                DELETE FROM $wpdb-&gt;postmeta
		 WHERE post_id =&#160;%d
		 AND meta_key =&#160;%s
		",
	        13, 'gargle' 
        )
);

</pre>
<p><i>Performed in WordPress by <code><a href="https://codex.wordpress.org/Function_Reference/delete_post_meta" title="Function Reference/delete post meta">delete_post_meta()</a></code>.</i>
</p><p><br />
Сделать страницу 7 родительской для страницы 15 <a href="https://codex.wordpress.org/Pages" title="Pages">Page</a>.
</p>
<pre>
$wpdb-&gt;query(
	"
	UPDATE $wpdb-&gt;posts 
	SET post_parent = 7
	WHERE ID = 15 
		AND post_status = 'static'
	"
);
</pre>
<h2><span class="mw-headline" id="SELECT_a_Variable">SELECT a Variable</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=5" title="Edit section: SELECT a Variable">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The <code>get_var</code> function returns a single variable from the database.  Though only one variable is returned, the entire result of the query is cached for later use. Returns <tt>NULL</tt> if no result is found.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_var</span><span style="color: #007700">(</span><span style="color: #DD0000">'query'</span><span style="color: #007700">,</span><span style="color: #0000BB">column_offset</span><span style="color: #007700">,</span><span style="color: #0000BB">row_offset</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> query&#160;</dt>
<dd> (string) The query you wish to run.  Setting this parameter to <code>null</code> will return the specified variable from the cached results of the previous query.</dd>
<dt> column_offset&#160;</dt>
<dd> (integer) The desired column (<b>0</b> being the first).  Defaults to <b>0</b>.</dd>
<dt> row_offset&#160;</dt>
<dd> (integer) The desired row (<b>0</b> being the first).  Defaults to <b>0</b>.</dd></dl>
<h3><span class="mw-headline" id="Examples">Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=6" title="Edit section: Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Retrieve and display the number of users.
</p>
<pre>
&lt;?php
$user_count = $wpdb-&gt;get_var( "SELECT COUNT(*) FROM $wpdb-&gt;users" );
echo "&lt;p&gt;User count is {$user_count}&lt;/p&gt;";
?&gt;
</pre>
<p>Retrieve and display the sum of a <a href="https://codex.wordpress.org/Custom_Fields" title="Custom Fields">Custom Field value</a>.
</p>
<pre>
&lt;?php
// set the meta_key to the appropriate custom field meta key
$meta_key = 'miles';
$allmiles = $wpdb-&gt;get_var( $wpdb-&gt;prepare( 
	"
		SELECT sum(meta_value) 
		FROM $wpdb-&gt;postmeta 
		WHERE meta_key =&#160;%s
	", 
	$meta_key
) );
echo "&lt;p&gt;Total miles is {$allmiles}&lt;/p&gt;";
?&gt; 
</pre>
<h2><span class="mw-headline" id=".D0.92.D1.8B.D0.B1.D0.BE.D1.80.D0.BA.D0.B0.28SELECT.29_.D0.A1.D1.82.D1.80.D0.BE.D0.BA.D0.B8">Выборка(SELECT) Строки</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=7" title="Edit section: Выборка(SELECT) Строки">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Чтобы извлечь целую строку из запроса, используйте <code>get_row</code>.  Функция может возвращать строки как объект, ассоциативный массив или как численно индексированный массив.  Если в запросе возвращается более чем одна строка, только указанная строка будет возвращена в функции, но все строки будут прокэшированны для дальнейшего использования. Возвращает ОБЪЕКТ содержащий NULL если результат не определён, учитывайте это когда используете возвращённую переменную в качестве аргумента, смотрите пример ниже.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_row</span><span style="color: #007700">(</span><span style="color: #DD0000">'query'</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">output_type</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">row_offset</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> query&#160;</dt>
<dd> (string) Запрос который вы хотите выполнить.</dd>
<dt> output_type&#160;</dt>
<dd> Одна из трёх предопределённых констант.  По умолчанию OBJECT.
<ul><li> OBJECT - результат выводится как объект.</li>
<li> ARRAY_A - результат выводится как ассоциативный массив.</li>
<li> ARRAY_N - результат выводится как численно индексированный массив.</li></ul></dd></dl>
<dl><dt> row_offset&#160;</dt>
<dd> (integer) Требуемая строка (<b>0</b> является первой).  По умолчанию <b>0</b>.</dd></dl>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_2">Примеры</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=8" title="Edit section: Примеры">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Получение всей информации об Link 10.
</p>
<pre>$mylink = $wpdb-&gt;get_row("SELECT * FROM $wpdb-&gt;links WHERE link_id = 10");
</pre>
<p>Свойствами объекта <code>$mylink</code>  являются имена столбцов полученные в результате SQL запроса (в данном примере все столбцы из таблицы <code>$wpdb-&gt;links</code>, но вы также можете запросить только определённые столбцы).
</p>
<pre>echo $mylink-&gt;link_id; // prints "10"
</pre>
<p>в противоположность этому, использование
</p>
<pre>$mylink = $wpdb-&gt;get_row("SELECT * FROM $wpdb-&gt;links WHERE link_id = 10", ARRAY_A);
</pre>
<p>выведет результат в качестве ассоциативного массива:
</p>
<pre>echo $mylink['link_id']; // prints "10"
</pre>
<p>или
</p>
<pre>$mylink = $wpdb-&gt;get_row("SELECT * FROM $wpdb-&gt;links WHERE link_id = 10", ARRAY_N);
</pre>
<p>численно индексированного массива:
</p>
<pre>echo $mylink[1]; // prints "10"
</pre>
<p>Если записи с ID 10 не существует в данной таблице, будет возвращено <code>null</code>. Следующее может быть ложным:
</p>
<pre>
if ($mylink&#160;!= null) {
  // какие-либо действия с ссылкой 
  return true;
} else {
  // ссылка не найдена
  return false;
}
</pre>
<h2><span class="mw-headline" id="SELECT_a_Column">SELECT a Column</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=9" title="Edit section: SELECT a Column">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>To SELECT a column, use <code>get_col</code>.  This function outputs a one dimensional array.  If more than one column is returned by the query, only the specified column will be returned by the function, but the entire result is cached for later use. Returns an empty array if no result is found. 
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_col</span><span style="color: #007700">(</span><span style="color: #DD0000">'query'</span><span style="color: #007700">,</span><span style="color: #0000BB">column_offset</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> query&#160;</dt>
<dd> (string) the query you wish to execute.  Setting this parameter to <code>null</code> will return the specified column from the cached results of the previous query.</dd>
<dt> column_offset&#160;</dt>
<dd> (integer) The desired column (<b>0</b> being the first).  Defaults to <b>0</b>.</dd></dl>
<h3><span class="mw-headline" id="Examples_2">Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=10" title="Edit section: Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>For this example, assume the blog is devoted to information about automobiles.  Each post describes a particular car (e.g. 1969 Ford Mustang), and three <a href="https://codex.wordpress.org/Custom_Fields" title="Custom Fields">Custom Fields</a>, manufacturer, model, and year, are assigned to each post.  This example will display the post titles, filtered by a particular manufacturer (Ford), and sorted by model and year.  
</p><p>The <b>get_col</b> form of the <tt>wpdb Class</tt> is used to return an array of all the post ids meeting the criteria and sorted in the correct order.  Then a <i>foreach</i> construct is used to iterate through that array of post ids, displaying the title of each post.  Note that the SQL for this example was created by <a rel="nofollow" class="external text" href="http://stackoverflow.com/questions/1690762/complicated-mysql-query/1690808#1690808">Andomar</a>.
</p>
<pre>
&lt;?php 
$meta_key1		= 'model';
$meta_key2		= 'year';
$meta_key3		= 'manufacturer';
$meta_key3_value	= 'Ford';

$postids=$wpdb-&gt;get_col( $wpdb-&gt;prepare( 
	"
	SELECT      key3.post_id
	FROM        $wpdb-&gt;postmeta key3
	INNER JOIN  $wpdb-&gt;postmeta key1 
	            ON key1.post_id = key3.post_id
	            AND key1.meta_key =&#160;%s 
	INNER JOIN  $wpdb-&gt;postmeta key2
	            ON key2.post_id = key3.post_id
	            AND key2.meta_key =&#160;%s
	WHERE       key3.meta_key =&#160;%s 
	            AND key3.meta_value =&#160;%s
	ORDER BY    key1.meta_value, key2.meta_value
	",
	$meta_key1, 
	$meta_key2, 
	$meta_key3, 
	$meta_key3_value
) ); 

if ( $postids ) 
{
	echo "List of {$meta_key3_value}(s), sorted by {$meta_key1}, {$meta_key2}";
	foreach ( $postids as $id ) 
	{ 
		$post = get_post( intval( $id ) );
		setup_postdata( $post );
		?&gt;
		&lt;p&gt;
			&lt;a href="&lt;?php the_permalink()&#160;?&gt;" rel="bookmark" title="Permanent Link to &lt;?php the_title_attribute();&#160;?&gt;"&gt;
				&lt;?php the_title();&#160;?&gt;
			&lt;/a&gt;
		&lt;/p&gt;
		&lt;?php
	} 
}
?&gt;
</pre>
<p>This example lists all posts that contain a particular custom field, but sorted by the value of a second custom field.
</p>
<pre>
&lt;?php
// List all posts with custom field Color, sorted by the value of custom field Display_Order
// does not exclude any 'post_type'
// assumes each post has just one custom field for Color, and one for Display_Order
$meta_key1 = 'Color';
$meta_key2 = 'Display_Order';

$postids = $wpdb-&gt;get_col( $wpdb-&gt;prepare( 
	"
	SELECT      key1.post_id
	FROM        $wpdb-&gt;postmeta key1
	INNER JOIN  $wpdb-&gt;postmeta key2
	            ON key2.post_id = key1.post_id
	            AND key2.meta_key =&#160;%s
	WHERE       key1.meta_key =&#160;%s
	ORDER BY    key2.meta_value+(0) ASC
	",
        $meta_key2,
	$meta_key1
) ); 

if ( $postids ) 
{
	echo "List of {$meta_key1} posts, sorted by {$meta_key2}";
	foreach ( $postids as $id ) 
	{
		$post = get_post( intval( $id ) );
		setup_postdata( $post );
		?&gt;
		&lt;p&gt;
			&lt;a href="&lt;?php the_permalink()&#160;?&gt;" rel="bookmark" title="Permanent Link to &lt;?php the_title_attribute();&#160;?&gt;"&gt;
				&lt;?php the_title();&#160;?&gt;
			&lt;/a&gt;
		&lt;/p&gt;
		&lt;?php
	}
}
?&gt;
</pre>
<h2><span class="mw-headline" id=".D0.92.D1.8B.D0.B1.D0.BE.D1.80.D0.BA.D0.B0.28SELECT.29_Generic_Results">Выборка(SELECT) Generic Results</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=11" title="Edit section: Выборка(SELECT) Generic Results">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Generic, mulitple row results can be pulled from the database с помощью <code>get_results</code>.  Функция возвращает весь результат запроса как массив, или <tt>NULL</tt> если результат отсутствует.  Каждый элемент данного массива соответствует одной строке результата запроса и, подобно <code>get_row</code>, может быть ОБЪЕКТОМ, ассоциативным массивом, или целочисленным массивом.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_results</span><span style="color: #007700">(</span><span style="color: #DD0000">'query'</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">output_type</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> query&#160;</dt>
<dd> (string) Запрос который вы хотите выполнить.  При выставлении этого параметра как <code>null</code> функция вернёт данные из кэшированного результата предыдущего запроса.</dd>
<dt> output_type&#160;</dt>
<dd> Одна из четырёх предопределённых констант.  По умолчанию - OBJECT.  Смотрите <a href="#SELECT_a_Row">Выборка(SELECT) Строки</a> и примеры для подробной информации.
<ul><li> OBJECT - результат будет выводиться как численно индексированный массив объектов строк.</li>
<li> OBJECT_K - результат будет выводиться как ассоциативный массив объектов строк, используя значения первого столбца в качестве ключей (дубликаты будут проигнорированы).</li>
<li> ARRAY_A - результат будет выводиться как численно индексированный массив ассоциативных массивов, используя имена столбцов в качестве ключей.</li>
<li> ARRAY_N - результат будет выводиться как численно индексированный массив численно индексированных массивов.</li></ul></dd></dl>
<p>Поскольку эта функция использует функцию '$wpdb-&gt;query()' все переменные класса установлены правильно. 
The results count for a 'SELECT' query will be stored in $wpdb-&gt;num_rows.
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_3">Примеры</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=12" title="Edit section: Примеры">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Получение ID и Заголовков всех Черновиков Пользователя с ID 5 и Вывод Заголовков.
</p>
<pre>
$fivesdrafts = $wpdb-&gt;get_results( 
	"
	SELECT ID, post_title 
	FROM $wpdb-&gt;posts
	WHERE post_status = 'draft' 
		AND post_author = 5
	"
);

foreach ( $fivesdrafts as $fivesdraft ) 
{
	echo $fivesdraft-&gt;post_title;
}
</pre>
<p>Получение всей информации о черновиках Пользователя с ID 5.
</p>
<pre>
&lt;?php
$fivesdrafts = $wpdb-&gt;get_results( 
	"
	SELECT * 
	FROM $wpdb-&gt;posts
	WHERE post_status = 'draft' 
		AND post_author = 5
	"
);
if ( $fivesdrafts )
{
	foreach ( $fivesdrafts as $post )
	{
		setup_postdata( $post );
		?&gt;
		&lt;h2&gt;
			&lt;a href="&lt;?php the_permalink();&#160;?&gt;" rel="bookmark" title="Permalink: &lt;?php the_title();&#160;?&gt;"&gt;
				&lt;?php the_title();&#160;?&gt;
			&lt;/a&gt;
		&lt;/h2&gt;
		&lt;?php
	}
	else
	{
		?&gt;
		&lt;h2&gt;Not Found&lt;/h2&gt;
		&lt;?php
	}
}
?&gt;
</pre>
<h2><span class="mw-headline" id=".D0.92.D1.81.D1.82.D0.B0.D0.B2.D0.BA.D0.B0.28INSERT.29_.D1.81.D1.82.D1.80.D0.BE.D0.BA">Вставка(INSERT) строк</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=13" title="Edit section: Вставка(INSERT) строк">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Вставка строки в таблицу.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$table</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$data</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$format&#160;</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> table&#160;</dt>
<dd> (string) Имя таблицы для вставки.</dd>
<dt> data&#160;</dt>
<dd> (array) Данные для вставки (в паре "столбец =&gt; значение"). Данные столбец и значение должны быть "сырыми" (не должны быть экранированы).</dd>
<dt> format&#160;</dt>
<dd> (array|string) (не обязательно) Множество форматов для сопоставления с каждым из значений в $data. Если строка - этот формат будет использоваться для всех значений в $data. Если опущено - все значения в $data будут обрабатываться как строки если иное не предусмотрено в wpdb::$field_types.</dd></dl>
<p>Возможные значения 'format':&#160;%s как строка;&#160;%d как десятичное число; и&#160;%f как число с плавающей точкой.
</p><p>После вставки, сгенерированный ID для столбца AUTO_INCREMENT может быть доступно с:
</p>
 <pre>$wpdb-&gt;insert_id</pre>
<p>Эта функция возвращает false если строка не может быть вставлена.
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_4">Примеры</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=14" title="Edit section: Примеры">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Вставка двух столбцов в строку, первое значение является строкой, а второе - числом:
</p>
<pre>
$wpdb-&gt;insert( 
	'table', 
	array( 
		'column1' =&gt; 'value1', 
		'column2' =&gt; 123 
	), 
	array( 
		'%s', 
		'%d' 
	) 
);
</pre>
<h2><span class="mw-headline" id="UPDATE_.D1.81.D1.82.D1.80.D0.BE.D0.BA.D0.B8">UPDATE строки</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=15" title="Edit section: UPDATE строки">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Обновление строки в таблице. Возвращает false при ошибке или номер обновлённой строки при успешном обновлении.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$table</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$data</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$where</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$format&#160;</span><span style="color: #007700">=&#160;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$where_format&#160;</span><span style="color: #007700">=&#160;</span><span style="color: #0000BB">null&#160;</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> table&#160;</dt>
<dd> (string) Имя таблицы для обновления.</dd>
<dt> data&#160;</dt>
<dd> (array) Данные для обновления (в паре столбец =&gt; значение).  $data столбец и $data значение должны быть "сырыми" (не должны быть экранированы).</dd>
<dt> where&#160;</dt>
<dd> (array) A named array of WHERE clauses (in column =&gt; value pairs). Multiple clauses will be joined with ANDs. Both $where columns and $where values should be "raw".</dd>
<dt> format&#160;</dt>
<dd> (array|string) (optional) An array of formats to be mapped to each of the values in $data. If string, that format will be used for all of the values in $data.</dd>
<dt> where_format&#160;</dt>
<dd> (array|string) (optional) An array of formats to be mapped to each of the values in $where. If string, that format will be used for all of the items in $where.</dd></dl>
<p><strong>Possible format values</strong>:&#160;%s as string;&#160;%d as decimal number and&#160;%f as float. If omitted, all values in $where will be treated as strings.
</p><p>This function returns the number of rows updated, or false if there is an error.
</p>
<h3><span class="mw-headline" id="Examples_3">Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=16" title="Edit section: Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Update a row, where the ID is 1, the value in the first column is a string and the value in the second column is a number: 
</p>
<pre>
$wpdb-&gt;update( 
	'table', 
	array( 
		'column1' =&gt; 'value1',	// string
		'column2' =&gt; 'value2'	// integer (number) 
	), 
	array( 'ID' =&gt; 1 ), 
	array( 
		'%s',	// value1
		'%d'	// value2
	), 
	array( '%d' ) 
);
</pre>
<p><strong>Attention:</strong> <code>%d</code> can't deal with comma values - if you're <em>not</em> using full numbers, use string/%s.
</p>
<h2><span class="mw-headline" id=".D0.97.D0.B0.D1.89.D0.B8.D1.82.D0.B0_.D0.97.D0.B0.D0.BF.D1.80.D0.BE.D1.81.D0.BE.D0.B2_.D0.BE.D1.82_.D0.90.D1.82.D0.B0.D0.BA_.D1.82.D0.B8.D0.BF.D0.B0_SQL_Injection">Защита Запросов от Атак типа SQL Injection</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=17" title="Edit section: Защита Запросов от Атак типа SQL Injection">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Для более полного обзора SQL экранирования в WordPress, смотрите <a href="https://codex.wordpress.org/Data_Validation#Database" title="Data Validation">database Data Validation</a>. Эта статья <a href="https://codex.wordpress.org/Data_Validation" title="Data Validation">Data Validation</a> является <b>must-read</b> для каждого автора кода и плагинов для WordPress.
</p><p>Все данные в SQL запросе должны быть экранированы прежде чем SQL запрос будет выполнен чтобы предотвратить атаки SQL injection. Это может быть удобно выполнено с помощью метода <code>prepare</code>, который поддерживает как <a rel="nofollow" class="external text" href="http://php.net/sprintf">sprintf()</a>-подобный, так и <a rel="nofollow" class="external text" href="http://php.net/vsprintf">vsprintf()</a>-подобный синтаксис.
</p><p><b>Обратите внимание</b>: По состоянию на версию <a href="https://codex.wordpress.org/Version_3.5" title="Version 3.5">3.5</a>, <tt>wpdb::prepare()</tt> навязывает <b>минимум 2 аргумента</b>. [<a rel="nofollow" class="external text" href="http://make.wordpress.org/core/2012/12/12/php-warning-missing-argument-2-for-wpdb-prepare/">подробная информация</a>]
</p>
<pre>
&lt;?php $sql = $wpdb-&gt;prepare( 'query' , value_parameter[, value_parameter ... ] );&#160;?&gt;
</pre>
<dl><dt> query&#160;</dt>
<dd> (string) SQL запрос который вы хотите выполнить, с заполнителями <code>%s</code> и <code>%d</code>. Другие <code>%</code> символы могут вызвать ошибку обработки, если они не экранированы. Все символы <code>%</code> внутри строкового литерала SQL, включая LIKE шаблоны, должны быть продублированы(<code>%%</code>).</dd>
<dt> value_parameter&#160;</dt>
<dd> (int|string|array) Значения подставляемые в заполнители. Many values may be passed by simply passing more arguments in a <a rel="nofollow" class="external text" href="http://php.net/sprintf">sprintf()</a>-like fashion. Alternatively the second argument can be an array containing the values as in PHP's <a rel="nofollow" class="external text" href="http://php.net/vsprintf">vsprintf()</a> function. Необходимо соблюдать осторожность, чтобы не допустить прямого ввода пользователем данного параметра, который бы позволил манипулировать массивом любого запроса с несколькими заполнителями. Значения не должны быть уже экранированы.</dd></dl>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_5">Примеры</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=18" title="Edit section: Примеры">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Add Meta key =&gt; value pair "Harriet's Adages" =&gt; "WordPress' database interface is like Sunday Morning: Easy." to Post 10.
</p>
<pre>
$metakey	= "Harriet's Adages";
$metavalue	= "WordPress' database interface is like Sunday Morning: Easy.";

$wpdb-&gt;query( $wpdb-&gt;prepare( 
	"
		INSERT INTO $wpdb-&gt;postmeta
		( post_id, meta_key, meta_value )
		VALUES (&#160;%d,&#160;%s,&#160;%s )
	", 
        10, 
	$metakey, 
	$metavalue 
) );
</pre>
<p><i>Performed in WordPress by <code><a href="https://codex.wordpress.org/Function_Reference/add_meta" title="Function Reference/add meta">add_meta()</a></code>.</i>
</p><p>The same query using <a rel="nofollow" class="external text" href="http://php.net/vsprintf">vsprintf()</a>-like syntax.
</p>
<pre>
$metakey = "Harriet's Adages";
$metavalue = "WordPress' database interface is like Sunday Morning: Easy.";

$wpdb-&gt;query( $wpdb-&gt;prepare( 
	"
		INSERT INTO $wpdb-&gt;postmeta
		( post_id, meta_key, meta_value )
		VALUES (&#160;%d,&#160;%s,&#160;%s )
	", 
        array(
		10, 
		$metakey, 
		$metavalue
	) 
) );
</pre>
<p><i>Note that in this example we pack the values together in an array. This can be useful when we don't know the number of arguments we need to pass until runtime.</i>
</p><p>Notice that you do not have to worry about quoting strings. Instead of passing the variables directly into the SQL query, use a <code>%s</code> placeholder for strings and a <code>%d</code> placedolder for integers. You can pass as many values as you like, each as a new parameter in the <code>prepare()</code> method.
</p><p><strong>Attention:</strong> You can't pass integers/numbers that have comma values via <code>%d</code>. If you need comma values, use <code>%s</code> instead.
</p>
<h2><span class="mw-headline" id="Show_and_Hide_SQL_Errors">Show and Hide SQL Errors</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=19" title="Edit section: Show and Hide SQL Errors">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>You can turn error echoing on and off with the <code>show_errors</code> and <code>hide_errors</code>, respectively.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">show_errors</span><span style="color: #007700">();&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;<br />&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hide_errors</span><span style="color: #007700">();&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p><p>You can also print the error (if any) generated by the most recent query with <code>print_error</code>.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">print_error</span><span style="color: #007700">();&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p><p><strong>Note:</strong>  If you are running WordPress Multisite, you must define the DIEONDBERROR constant for database errors to display like so:
<br /><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;define</span><span style="color: #007700">(&#160;</span><span style="color: #DD0000">'DIEONDBERROR'</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">true&#160;</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<h2><span class="mw-headline" id="Getting_Column_Information">Getting Column Information</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=20" title="Edit section: Getting Column Information">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>You can retrieve information about the columns of the most recent query result with <code>get_col_info</code>.  This can be useful when a function has returned an OBJECT whose properties you don't know.  The function will output the desired information from the specified column, or an array with information on <i>all</i> columns from the query result if no column is specified.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_col_info</span><span style="color: #007700">(</span><span style="color: #DD0000">'type'</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">offset</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> type&#160;</dt>
<dd> (string) What information you wish to retrieve.  May take on any of the following values (list taken from the <a rel="nofollow" class="external text" href="http://jvmultimedia.com/docs/ezsql/ez_sql_help.htm">ezSQL docs</a>).  Defaults to <b>name</b>.
<ul><li>name - column name.  Default.</li>
<li>table - name of the table the column belongs to</li>
<li>max_length - maximum length of the column</li>
<li>not_null - 1 if the column cannot be NULL</li>
<li>primary_key - 1 if the column is a primary key</li>
<li>unique_key - 1 if the column is a unique key</li>
<li>multiple_key - 1 if the column is a non-unique key</li>
<li>numeric - 1 if the column is numeric</li>
<li>blob - 1 if the column is a BLOB</li>
<li>type - the type of the column</li>
<li>unsigned - 1 if the column is unsigned</li>
<li>zerofill - 1 if the column is zero-filled</li></ul></dd></dl>
<dl><dt> offset&#160;</dt>
<dd> (integer) Specify the column from which to retrieve information (with <b>0</b> being the first column).  Defaults to <b>-1</b>.
<ul><li>-1 - Retrieve information from all columns.  Output as array.  Default.</li>
<li>Non-negative integer - Retrieve information from specified column (<b>0</b> being the first).</li></ul></dd></dl>
<h2><span class="mw-headline" id="Clearing_the_Cache">Clearing the Cache</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=21" title="Edit section: Clearing the Cache">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>You can clear the SQL result cache with <code>flush</code>.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">flush</span><span style="color: #007700">();&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p><p>This clears <code>$wpdb-&gt;last_result</code>, <code>$wpdb-&gt;last_query</code>, and <code>$wpdb-&gt;col_info</code>.
</p>
<h2><span class="mw-headline" id="Class_Variables">Class Variables</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=22" title="Edit section: Class Variables">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<dl><dt> $show_errors&#160;</dt>
<dd> Whether or not <a href="#Show_and_Hide_SQL_Errors">Error echoing</a> is turned on.  Defaults to TRUE.</dd></dl>
<dl><dt> $num_queries&#160;</dt>
<dd> The number of queries that have been executed.</dd></dl>
<dl><dt> $last_query&#160;</dt>
<dd> The most recent query to have been executed.</dd></dl>
<dl><dt> $last_error&#160;</dt>
<dd> The most recent error text generated by MySQL.</dd></dl>
<dl><dt> $queries&#160;</dt>
<dd> You may save all of the queries run on the database and their stop times by setting the SAVEQUERIES constant to TRUE (this constant defaults to FALSE).  If SAVEQUERIES is TRUE, your queries will be stored in this variable as an array.</dd></dl>
<dl><dt> $last_result&#160;</dt>
<dd> The most recent query results.</dd></dl>
<dl><dt> $col_info&#160;</dt>
<dd> The column information for the most recent query results.  See <a href="#Getting_Column_Information">Getting Column Information</a>.</dd></dl>
<dl><dt> $insert_id&#160;</dt>
<dd> ID generated for an AUTO_INCREMENT column by the most recent INSERT query.</dd></dl>
<dl><dt> $num_rows&#160;</dt>
<dd> The number of rows returned by the last query.</dd></dl>
<dl><dt> $prefix&#160;</dt>
<dd> The assigned WordPress table prefix for the site.</dd></dl>
<dl><dt> $base_prefix&#160;</dt>
<dd> The original prefix as defined in wp-config.php. For multi-site: Use if you want to get the prefix without the blog number appended.</dd></dl>
<h3><span class="mw-headline" id="Multi-Site_Variables">Multi-Site Variables</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=23" title="Edit section: Multi-Site Variables">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>If you are using Multi-Site, you also have access to the following:
</p>
<dl><dt> $blogid&#160;</dt>
<dd>  The id of the current site (blog).</dd></dl>
<h2><span class="mw-headline" id="Tables">Tables</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=24" title="Edit section: Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The WordPress database tables are easily referenced in the <code>wpdb</code> class.
</p>
<dl><dt> $posts&#160;</dt>
<dd> The table of <a href="https://codex.wordpress.org/Database_Description#Table:_wp_posts" title="Database Description">Posts</a>.</dd></dl>
<dl><dt> $postmeta&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_postmeta" title="Database Description">Meta Content</a> (a.k.a. <a href="https://codex.wordpress.org/Custom_Fields" title="Custom Fields">Custom Fields</a>) table.</dd></dl>
<dl><dt> $comments&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_comments" title="Database Description">Comments</a> table.</dd></dl>
<dl><dt> $commentmeta&#160;</dt>
<dd> The table contains additional comment information.</dd></dl>
<dl><dt> $terms&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_terms" title="Database Description">terms</a> table contains the 'description' of Categories, Link Categories, Tags.</dd></dl>
<dl><dt> $term_taxonomy&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_term_taxonomy" title="Database Description">term_taxonomy</a> table describes the various taxonomies (classes of terms).  Categories, Link Categories, and Tags are taxonomies.</dd></dl>
<dl><dt> $term_relationships&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_term_relationships" title="Database Description">term relationships</a> table contains link between the term and the object that uses that term, meaning this file point to each Category used for each Post.</dd></dl>
<dl><dt> $users&#160;</dt>
<dd> The table of <a href="https://codex.wordpress.org/Database_Description#Table:_wp_users" title="Database Description">Users</a>.</dd></dl>
<dl><dt> $usermeta&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_usermeta" title="Database Description">usermeta</a> table contains additional user information, such as nicknames, descriptions and permissions.</dd></dl>
<dl><dt> $links&#160;</dt>
<dd> The table of <a href="https://codex.wordpress.org/Database_Description#Table:_wp_links" title="Database Description">Links</a>.</dd></dl>
<dl><dt> $options&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_options" title="Database Description">Options</a> table.</dd></dl>
<h3><span class="mw-headline" id="Multisite_Tables">Multisite Tables</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=25" title="Edit section: Multisite Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>These tables are used only in multisite installations.
</p>
<dl><dt> $blogs&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_blogs" title="Database Description">Blogs</a> table contains a list of the separate blogs (sites) that have been set up within the network(s).</dd></dl>
<dl><dt> $signups&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_signups" title="Database Description">Signups</a> table.</dd></dl>
<dl><dt> $site&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_site" title="Database Description">Site</a> table contains a list of the networks (previously known as "sites" in WPMU) that are set up in the installation (usually there is only one site listed in this table).</dd></dl>
<dl><dt> $sitemeta&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_sitemeta" title="Database Description">Network Options (Site Meta)</a> table contains any options that are applicable to the entire multisite installation.</dd></dl>
<dl><dt> $sitecategories&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_sitecategories" title="Database Description">Site Categories</a> table.</dd></dl>
<dl><dt> $registration_log&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_registration_log" title="Database Description">Registration Log</a> table.</dd></dl>
<dl><dt> $blog_versions&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_blog_versions" title="Database Description">Blog Versions</a> table.</dd></dl>
<h2><span class="mw-headline" id="Related">Related</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit&amp;section=26" title="Edit section: Related">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Articles">Articles</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Template:Query_Tags&amp;action=edit&amp;section=T-1" title="Template:Query Tags">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> Article: <a href="https://codex.wordpress.org/The_Loop" title="The Loop">The Loop</a> - A basic overview of its use of query within the WordPress loop.</li>
<li> Article: <a href="https://codex.wordpress.org/Query_Overview" title="Query Overview">Query Overview</a> - Explanation of how to determine which queries generate WordPress.</li>
<li> Article: <a href="https://codex.wordpress.org/Custom_Queries" title="Custom Queries"> Customizing Queries via Hook</a></li>
<li> Article: <a href="https://codex.wordpress.org/Displaying_Posts_Using_a_Custom_Select_Query" title="Displaying Posts Using a Custom Select Query"> View Articles MYSQL query using custom</a></li>
<li> Article: <a href="https://codex.wordpress.org/Making_Advanced_Taxonomy_Queries" title="Making Advanced Taxonomy Queries"> Build advanced queries on Taxonomies</a></li>
<li> Article: <a href="https://codex.wordpress.org/Making_Custom_Queries_using_Offset_and_Pagination" title="Making Custom Queries using Offset and Pagination"> Build custom query using Offset and pagination</a></li></ul>
<h3><span class="mw-headline" id="Code_Documentation">Code Documentation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Template:Query_Tags&amp;action=edit&amp;section=T-2" title="Template:Query Tags">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> Class: <a href="https://codex.wordpress.org/Class_Reference/WP_Query" title="Class Reference/WP Query"> WP_Query</a> - Detailed Overview of class WP_Query</li>
<li> Class: <a href="https://codex.wordpress.org/Class_Reference/WP_Comment_Query" title="Class Reference/WP Comment Query"> WP_Comment_Query</a> - Class for comment-related queries</li>
<li> Class: <a href="https://codex.wordpress.org/Class_Reference/WP_User_Query" title="Class Reference/WP User Query"> WP_User_Query</a> - Class for user-related queries</li>
<li> Object: <a href="https://codex.wordpress.org/Class_Reference/wpdb" title="Class Reference/wpdb"> $wpdb</a> - Overview on the use of the $wpdb object</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/set_query_var" title="Function Reference/set query var"> set_query_var()</a></li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/get_query_var" title="Function Reference/get query var"> get_query_var()</a></li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/query_posts" title="Function Reference/query posts"> query_posts()</a> - Create additional custom query</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/get_post" title="Function Reference/get post"> get_post()</a> - Take an ID of an item and return the records in the database for that article</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/get_posts" title="Function Reference/get posts" class="mw-redirect"> get_posts()</a> - A specialized function that returns an array of items</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/get_pages" title="Function Reference/get pages"> get_pages()</a> - A specialized function that returns an array of pages</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/have_posts" title="Function Reference/have posts"> have_posts()</a> - A condition that determines whether the query returned an article</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/the_post" title="Function Reference/the post"> the_post()</a> - Used to automatically set the loop after a query</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/rewind_posts" title="Function Reference/rewind posts"> rewind_posts()</a> - Clears the current loop</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/setup_postdata" title="Function Reference/setup postdata"> setup_postdata()</a> - Sets the data for a single query result within a loop</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/wp_reset_postdata" title="Function Reference/wp reset postdata"> wp_reset_postdata()</a> - Restores the previous query (usually after a loop within another loop)</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/wp_reset_query" title="Function Reference/wp reset query"> wp_reset_query()</a></li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/is_main_query" title="Function Reference/is main query"> is_main_query()</a> - Ensures that the query that is being changed is only the main query</li>
<li> Action Hook: <a href="https://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts" title="Plugin API/Action Reference/pre get posts"> pre_get_posts</a> - Change WordPress queries before they are executed</li>
<li> Action Hook: <a href="https://codex.wordpress.org/Plugin_API/Action_Reference/the_post" title="Plugin API/Action Reference/the post"> the_post</a> - Modify the post object after query</li>
<li> Filter Hook: <a href="https://codex.wordpress.org/Plugin_API/Filter_Reference/found_posts" title="Plugin API/Filter Reference/found posts"> found_posts</a> - Changes the value of the object found_posts WP_Query</li></ul>
<div style="background-color:#DFDFDF; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">See also index of <a href="https://codex.wordpress.org/Class_Reference" title="Class Reference">Class Reference</a> and index of <a href="https://codex.wordpress.org/Function_Reference" title="Function Reference">Function Reference</a>.</div>

<!-- 
NewPP limit report
Cached time: 20190429052944
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.064 seconds
Real time usage: 0.072 seconds
Preprocessor visited node count: 455/1000000
Preprocessor generated node count: 1176/1000000
Post‐expand include size: 5281/2097152 bytes
Template argument size: 894/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   17.964      1 - -total
 54.26%    9.747      1 - Template:Languages
 16.72%    3.004      1 - Template:ru:Stub
 10.87%    1.953      2 - Template:Message
  9.40%    1.688      1 - Template:Query_Tags
  8.03%    1.443      1 - Template:ja
  7.83%    1.407      1 - Template:Class_Footer
  7.24%    1.300      1 - Template:ru
  7.15%    1.285      1 - Template:it
  7.04%    1.265      1 - Template:zh-tw
-->
