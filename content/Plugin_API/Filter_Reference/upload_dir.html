<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<strong class="selflink">English</strong> • 
<a href="/index.php?title=zh-cn:Plugin_API/Filter_Reference/upload_dir&amp;action=edit&amp;redlink=1" class="new" title="zh-cn:Plugin API/Filter Reference/upload dir (page does not exist)">中文(简体)</a> • 
 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p> 
<h2><span class="mw-headline" id="Description">Description</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Plugin_API/Filter_Reference/upload_dir&amp;action=edit&amp;section=1" title="Edit section: Description">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This hook allows you to change the directory where files are uploaded to. The keys and values in the array are used by the <tt>wp_upload_dir</tt> function in wordpress core, which is doing the work.
</p>
<h2><span class="mw-headline" id="Examples">Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Plugin_API/Filter_Reference/upload_dir&amp;action=edit&amp;section=2" title="Edit section: Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This goes into your plugin.
</p>
<pre>
add_filter('upload_dir', 'awesome_wallpaper_dir');

function awesome_wallpaper_dir( $param ){
    $mydir = '/awesome';

    $param['path'] = $param['path'] . $mydir;
    $param['url'] = $param['url'] . $mydir;

    return $param;
}
</pre>
<p>If your plugin is written as a class, you'll want to hook to it like so:
</p>
<pre>
add_filter( 'upload_dir', array( $this, 'awesome_wallpaper_dir' ) );
</pre>
<p><br />
Using this, in conjunction with the wp_handle_upload_prefilter, you can dynamically determine which directory to upload to, based on the files you upload.
</p>
<h2><span class="mw-headline" id="See_Also">See Also</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Plugin_API/Filter_Reference/upload_dir&amp;action=edit&amp;section=3" title="Edit section: See Also">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> Function: <a href="https://codex.wordpress.org/Function_Reference/wp_upload_dir" title="Function Reference/wp upload dir">wp_upload_dir()</a></li>
<li> Filter: <a href="https://codex.wordpress.org/Plugin_API/Filter_Reference/wp_handle_upload_prefilter" title="Plugin API/Filter Reference/wp handle upload prefilter">wp_handle_upload_prefilter</a></li></ul>
<div style="background-color:#FAEBD7; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">This page is <a href="https://codex.wordpress.org/Category:Stubs" title="Category:Stubs">marked</a> as incomplete. You can <a href="https://codex.wordpress.org/Codex:Contributing" title="Codex:Contributing">help</a> Codex by <b><a rel="nofollow" class="external text" href="https://codex.wordpress.org/index.php?title=Plugin_API/Filter_Reference/upload_dir&amp;action=edit">expanding it</a></b>.</div>

<!-- 
NewPP limit report
Cached time: 20190211004107
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.012 seconds
Real time usage: 0.017 seconds
Preprocessor visited node count: 70/1000000
Preprocessor generated node count: 299/1000000
Post‐expand include size: 1470/2097152 bytes
Template argument size: 439/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    6.969      1 - -total
 59.71%    4.161      1 - Template:Languages
 34.95%    2.436      1 - Template:Stub
 26.54%    1.850      1 - Template:zh-cn
 20.16%    1.405      1 - Template:Message
 14.54%    1.013      1 - Template:en
-->
