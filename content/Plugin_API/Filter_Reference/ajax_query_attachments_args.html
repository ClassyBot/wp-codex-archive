<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Description"><span class="tocnumber">1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Examples"><span class="tocnumber">2</span> <span class="toctext">Examples</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Only_Show_Current_User.27s_Attachments"><span class="tocnumber">2.1</span> <span class="toctext">Only Show Current User's Attachments</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#See_Also"><span class="tocnumber">3</span> <span class="toctext">See Also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Description">Description</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Plugin_API/Filter_Reference/ajax_query_attachments_args&amp;action=edit&amp;section=1" title="Edit section: Description">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The <code>ajax_query_attachments_args</code> filter is used to filter the query that fetches the attachments displayed in the media library modal on the post edit screen.
</p><p>The filter is used like this
</p><p><code>&lt;?php add_filter( 'ajax_query_attachments_args', 'filter_function_name', 10, 1 )&#160;?&gt;</code>
</p><p>Where <code>filter_function_name</code> is the function WordPress should call when the query is being modified. Note that the filter function  <b>must</b> return the query array after it is finished processing, or the query will be empty and no attachments will be shown.
</p><p><code>filter_function_name</code> should be unique function name. It cannot match any other function name already declared.
</p>
<h2><span class="mw-headline" id="Examples">Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Plugin_API/Filter_Reference/ajax_query_attachments_args&amp;action=edit&amp;section=2" title="Edit section: Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Only_Show_Current_User.27s_Attachments">Only Show Current User's Attachments</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Plugin_API/Filter_Reference/ajax_query_attachments_args&amp;action=edit&amp;section=3" title="Edit section: Only Show Current User's Attachments">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<pre>
add_filter( 'ajax_query_attachments_args', 'show_current_user_attachments', 10, 1 );

function show_current_user_attachments( $query = array() ) {
    $user_id = get_current_user_id();
    if( $user_id ) {
        $query['author'] = $user_id;
    }
    return $query;
}
</pre>
<p>Note that <code>$query</code> is an array - this means that you can modify (or remove) existing arguments as well as add new ones.
</p>
<h2><span class="mw-headline" id="See_Also">See Also</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Plugin_API/Filter_Reference/ajax_query_attachments_args&amp;action=edit&amp;section=4" title="Edit section: See Also">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> Index: <a href="https://codex.wordpress.org/Plugin_API/Filter_Reference" title="Plugin API/Filter Reference">List of filters</a></li>
<li> Tutorial: <a href="https://codex.wordpress.org/Plugin_API#Create_a_Filter_Function" title="Plugin API">Creating a Filter Function</a></li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/add_filter" title="Function Reference/add filter">add_filter()</a></li></ul>


