<h2><span class="mw-headline" id="Example_Usage">Example Usage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Plugin_API/Filter_Reference/wp_get_attachment_url&amp;action=edit&amp;section=1" title="Edit section: Example Usage">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>As of WordPress Version 3.2.1, <a href="https://codex.wordpress.org/Function_Reference/wp_get_attachment_url" title="Function Reference/wp get attachment url">wp_get_attachment_url()</a> doesn't distinguish whether a page request arrives via HTTP or HTTPS.
</p><p>Using wp_get_attachment_url filter, we can fix this to avoid the dreaded mixed content browser warning:
</p>
<pre>
add_filter('wp_get_attachment_url', 'honor_ssl_for_attachments');
function honor_ssl_for_attachments($url) {
	$http = site_url(FALSE, 'http');
	$https = site_url(FALSE, 'https');
	return ( $_SERVER['HTTPS'] == 'on' )&#160;? str_replace($http, $https, $url)&#160;: $url;
}
</pre>
<h2><span class="mw-headline" id="Source_File">Source File</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Plugin_API/Filter_Reference/wp_get_attachment_url&amp;action=edit&amp;section=2" title="Edit section: Source File">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The <tt>wp_get_attachment_url</tt> filter is located in <code><a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/tags/5.2.3/src/wp-includes/post.php#L0">wp-includes/post.php</a></code>.
</p>
<h2><span class="mw-headline" id="See_Also">See Also</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Plugin_API/Filter_Reference/wp_get_attachment_url&amp;action=edit&amp;section=3" title="Edit section: See Also">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> <a href="https://codex.wordpress.org/Function_Reference/add_filter" title="Function Reference/add filter">Function_Reference/add_filter</a></li>
<li> <a href="https://codex.wordpress.org/Plugin_API#Create_a_Filter_Function" title="Plugin API">Creating a Filter Function</a></li>
<li> <a href="https://codex.wordpress.org/Plugin_API/Filter_Reference" title="Plugin API/Filter Reference">Plugin_API/Filter_Reference</a></li>
<li> <a href="https://codex.wordpress.org/Function_Reference/wp_get_attachment_url" title="Function Reference/wp get attachment url">Function Reference/wp_get_attachment_url</a></li></ul>


