<h2><span class="mw-headline" id="Example_Usage">Example Usage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Plugin_API/Filter_Reference/wp_get_attachment_url&amp;action=edit&amp;section=1" title="Edit section: Example Usage">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>As of WordPress Version 3.2.1, <a href="https://codex.wordpress.org/Function_Reference/wp_get_attachment_url" title="Function Reference/wp get attachment url">wp_get_attachment_url()</a> doesn't distinguish whether a page request arrives via HTTP or HTTPS.
</p><p>Using wp_get_attachment_url filter, we can fix this to avoid the dreaded mixed content browser warning:
</p>
<pre>
add_filter('wp_get_attachment_url', 'honor_ssl_for_attachments');
function honor_ssl_for_attachments($url) {
	$http = site_url(FALSE, 'http');
	$https = site_url(FALSE, 'https');
	return ( $_SERVER['HTTPS'] == 'on' )&#160;? str_replace($http, $https, $url)&#160;: $url;
}
</pre>
<h2><span class="mw-headline" id="Source_File">Source File</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Plugin_API/Filter_Reference/wp_get_attachment_url&amp;action=edit&amp;section=2" title="Edit section: Source File">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The <tt>wp_get_attachment_url</tt> filter is located in <code><a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/tags/5.1.1/src/wp-includes/post.php#L0">wp-includes/post.php</a></code>.
</p>
<h2><span class="mw-headline" id="See_Also">See Also</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Plugin_API/Filter_Reference/wp_get_attachment_url&amp;action=edit&amp;section=3" title="Edit section: See Also">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> <a href="https://codex.wordpress.org/Function_Reference/add_filter" title="Function Reference/add filter">Function_Reference/add_filter</a></li>
<li> <a href="https://codex.wordpress.org/Plugin_API#Create_a_Filter_Function" title="Plugin API">Creating a Filter Function</a></li>
<li> <a href="https://codex.wordpress.org/Plugin_API/Filter_Reference" title="Plugin API/Filter Reference">Plugin_API/Filter_Reference</a></li>
<li> <a href="https://codex.wordpress.org/Function_Reference/wp_get_attachment_url" title="Function Reference/wp get attachment url">Function Reference/wp_get_attachment_url</a></li></ul>

<!-- 
NewPP limit report
Cached time: 20190429054127
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.004 seconds
Real time usage: 0.007 seconds
Preprocessor visited node count: 30/1000000
Preprocessor generated node count: 94/1000000
Post‐expand include size: 119/2097152 bytes
Template argument size: 40/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    2.263      1 - -total
100.00%    2.263      1 - Template:Trac
 36.99%    0.837      1 - Template:CurrentVersion
-->
