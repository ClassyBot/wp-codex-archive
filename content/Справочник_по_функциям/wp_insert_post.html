<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<a href="https://codex.wordpress.org/Function_Reference/wp_insert_post" title="Function Reference/wp insert post">English</a> • 
<strong class="selflink">Русский</strong> • 

 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.9E.D0.BF.D0.B8.D1.81.D0.B0.D0.BD.D0.B8.D0.B5"><span class="tocnumber">1</span> <span class="toctext">Описание</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.D0.9F.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D1.8B"><span class="tocnumber">2</span> <span class="toctext">Параметры</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.D0.92.D0.BE.D0.B7.D0.B2.D1.80.D0.B0.D1.89.D0.B0.D0.B5.D0.BC.D1.8B.D0.B5_.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.B8.D1.8F"><span class="tocnumber">3</span> <span class="toctext">Возвращаемые значения</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#.D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5"><span class="tocnumber">4</span> <span class="toctext">Использование</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B"><span class="tocnumber">5</span> <span class="toctext">Примеры</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#.D0.9A.D0.B0.D1.82.D0.B5.D0.B3.D0.BE.D1.80.D0.B8.D0.B8"><span class="tocnumber">5.1</span> <span class="toctext">Категории</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#.D0.91.D0.B5.D0.B7.D0.BE.D0.BF.D0.B0.D1.81.D0.BD.D0.BE.D1.81.D1.82.D1.8C"><span class="tocnumber">6</span> <span class="toctext">Безопасность</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#.D0.98.D1.81.D1.85.D0.BE.D0.B4.D0.BD.D1.8B.D0.B5_.D1.84.D0.B0.D0.B9.D0.BB.D1.8B"><span class="tocnumber">7</span> <span class="toctext">Исходные файлы</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Related"><span class="tocnumber">8</span> <span class="toctext">Related</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id=".D0.9E.D0.BF.D0.B8.D1.81.D0.B0.D0.BD.D0.B8.D0.B5">Описание</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/wp_insert_post&amp;action=edit&amp;section=1" title="Edit section: Описание">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Эта функция создает записи (и страницы) в базе данных. Она очищает переменные, делает некоторые проверки, заполняет недостающие переменные, такие как дата/время, и тп. Она берет объект в качестве аргумента и возвращает значение post ID созданной записи (или <tt>0</tt> если обнаружены ошибки).
</p>
<h2><span class="mw-headline" id=".D0.9F.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D1.8B">Параметры</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/wp_insert_post&amp;action=edit&amp;section=2" title="Edit section: Параметры">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<dl><dt> <tt>$post</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#Object" title="How to Pass Tag Parameters"><i>object</i></a>) (<i>required</i>) Объект, представляющий элементы, которые создают запись.Сходство между этими элементами и именами столбцов в wp_posts таблице в базе данных один к одному.
<dl><dd> Default: <i>None</i></dd></dl></dd></dl>
<p><b>ВАЖНО</b>: Установленное значение для $post['ID'] НЕ БУДЕТ создавать запись с этим ID номером. Установка этого значения вызовет функцию для обновления записи с этим ID номером с другими значениями, указанными в $post. Короче говоря, чтобы создать новую запись, параметр $post['ID'] должен быть пустым или вообще не установлен. 
</p><p>Содержание массива записи может зависеть от того, как много (или мало) параметров вы хотите оставить по умолчанию. Вот список с кратким описанием всех ключей, которые можно установить для записи:
</p>
<pre>
$post = array(
  'ID' =&gt; [ &lt;post id&gt; ] //ID записи в случае её редактирования.
  'menu_order' =&gt; [ &lt;order&gt; ] //Если создаём страницу, то здесь устанавливаем порядок её отображения.
  'comment_status' =&gt; [ 'closed' | 'open' ] //'closed' - комментирование закрыто.
  'ping_status' =&gt; [ 'closed' | 'open' ] //'closed' - отключает pingbacks или trackbacks
  'pinged' =&gt; [&#160;? ] //?
  'post_author' =&gt; [ &lt;user ID&gt; ] //ID автора поста.
  'post_category' =&gt; [ array(&lt;category id&gt;, &lt;...&gt;) ] //Добавление ID категорий.
  'post_content' =&gt; [ &lt;the text of the post&gt; ] //Полный текст поста.
  'post_date' =&gt; [ Y-m-d H:i:s ] //Дата создания поста.
  'post_date_gmt' =&gt; [ Y-m-d H:i:s ] //Дата создания поста по Гринвичу.
  'post_excerpt' =&gt; [ &lt;an excerpt&gt; ] //Для ваших цитат из поста.
  'post_name' =&gt; [ &lt;the name&gt; ] //Имя (slug) вашего поста.
  'post_parent' =&gt; [ &lt;post ID&gt; ] //Установить родителя поста.
  'post_password' =&gt; [&#160;? ] //Пароль для поста.
  'post_status' =&gt; [ 'draft' | 'publish' | 'pending'| 'future' | 'private' ] //Статус для нового поста.
  'post_title' =&gt; [ &lt;the title&gt; ] //Название вашего поста.
  'post_type' =&gt; [ 'post' | 'page' | 'link' | 'nav_menu_item' | custom post type ] //Тип поста: статья, страница, ссылка, пункт меню, иной тип.
  'tags_input' =&gt; [ '&lt;tag&gt;, &lt;tag&gt;, &lt;...&gt;' ] //Для тэгов.
  'to_ping' =&gt; [&#160;? ] //?
  'tax_input' =&gt; [ array( 'taxonomy_name' =&gt; array( 'term', 'term2', 'term3' ) ) ] //Поддержка пользовательской таксономии.
);  
</pre>
<p><b>Примечание</b>: Ключ <b>page_template</b> был удален из таблицы параметра $post и теперь находится в таблице wp_postmeta. Чтобы настроить шаблон записи, используйте функцию <a href="https://codex.wordpress.org/Function_Reference/update_post_meta" title="Function Reference/update post meta">update_post_meta</a> совместно с ключом  <b>_wp_page_template</b>.
</p><p><b>Примечание 2</b>: Ключ <b>post_status</b> описан в <a href="https://codex.wordpress.org/Post_Status_Transitions" title="Post Status Transitions">Post Status Transitions</a>.
</p><p><b>Примечание 3</b>: Если вы указываете post_status со значением 'future', то вы должны указать post_date для того, чтобы WordPress знал, когда опубликовывать вашу запись.
</p>
<dl><dt> <tt>$wp_error</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#Bool" title="How to Pass Tag Parameters"><i>bool</i></a>) (<i>optional</i>) Разрешает возвращение объекта <a href="https://codex.wordpress.org/Class_Reference/WP_Error" title="Class Reference/WP Error">WP_Error</a> в случае возникновения ошибки
<dl><dd> Default: false</dd></dl></dd></dl>
<h2><span class="mw-headline" id=".D0.92.D0.BE.D0.B7.D0.B2.D1.80.D0.B0.D1.89.D0.B0.D0.B5.D0.BC.D1.8B.D0.B5_.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.B8.D1.8F">Возвращаемые значения</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/wp_insert_post&amp;action=edit&amp;section=3" title="Edit section: Возвращаемые значения">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Возвращает ID записи, если запись была успешно добавлена в базу данных. В случае неудачи, возвращает <tt>0</tt>, если значением $wp_error является FALSE, или же возвращает объект <a href="https://codex.wordpress.org/Class_Reference/WP_Error" title="Class Reference/WP Error">WP_Error</a>, если $wp_error равно TRUE.
</p>
<h2><span class="mw-headline" id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5">Использование</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/wp_insert_post&amp;action=edit&amp;section=4" title="Edit section: Использование">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;wp_insert_post</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$post</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$wp_error&#160;</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<h2><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B">Примеры</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/wp_insert_post&amp;action=edit&amp;section=5" title="Edit section: Примеры">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Перед вызовом wp_insert_post() необходимо создать массив, чтобы передать необходимые элементы, которые будут формировать запись. Обязательно надо указать название (post_title) и содержимое (post_content) записи, иначе запись не будет создана.
</p><p>Пользователь может предоставить больше элементов, чем перечислено здесь. Для этого надо определить новые ключи в базе данных. Ключи должны совпадать с именами столбцов таблицы wp_posts базы данных.
</p>
<pre>
// Создаём объект записи
  $my_post = array(
     'post_title' =&gt; 'Название записи',
     'post_content' =&gt; 'А вот и текст. Ура, товарищи!',
     'post_status' =&gt; 'publish',
     'post_author' =&gt; 1,
     'post_category' =&gt; array(8,39)
  );

// Вставляем запись в базу данных
  wp_insert_post( $my_post );
</pre>
<p>Список по умолчанию определён в теле функции и выглядит так:
</p>
<pre>
$defaults = array(
'post_status' =&gt; 'draft', 
'post_type' =&gt; 'post',
'post_author' =&gt; $user_ID,
'ping_status' =&gt; get_option('default_ping_status'), 
'post_parent' =&gt; 0,
'menu_order' =&gt; 0,
'to_ping' =&gt;  '',
'pinged' =&gt; '',
'post_password' =&gt; '',
'guid' =&gt; '',
'post_content_filtered' =&gt; '',
'post_excerpt' =&gt; '',
'import_id' =&gt; 0);
</pre>
<h3><span class="mw-headline" id=".D0.9A.D0.B0.D1.82.D0.B5.D0.B3.D0.BE.D1.80.D0.B8.D0.B8">Категории</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/wp_insert_post&amp;action=edit&amp;section=6" title="Edit section: Категории">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Категории должны быть переданы в виде массива целых чисел, которые соответствуют ID категорий в базе данных, даже в том случае, когда пост сопоставляется только одной категории.
</p><p>Смотрите также: <a href="https://codex.wordpress.org/Function_Reference/wp_set_post_terms" title="Function Reference/wp set post terms">wp_set_post_terms()</a>
</p>
<h2><span class="mw-headline" id=".D0.91.D0.B5.D0.B7.D0.BE.D0.BF.D0.B0.D1.81.D0.BD.D0.BE.D1.81.D1.82.D1.8C">Безопасность</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/wp_insert_post&amp;action=edit&amp;section=7" title="Edit section: Безопасность">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><tt>wp_insert_post()</tt> передает данные через функцию sanitize_post(), которая сама по себе производит всю необходимую обработку и проверку на безопасность (kses и т.д.).
</p><p>Таким образом, вам не нужно беспокоиться об этом.
</p>
<h2><span class="mw-headline" id=".D0.98.D1.81.D1.85.D0.BE.D0.B4.D0.BD.D1.8B.D0.B5_.D1.84.D0.B0.D0.B9.D0.BB.D1.8B">Исходные файлы</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/wp_insert_post&amp;action=edit&amp;section=8" title="Edit section: Исходные файлы">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><tt>wp_insert_post()</tt> расположена в <code><a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/tags/5.2.3/src/wp-includes/post.php#L0">wp-includes/post.php</a></code>.
</p>
<h2><span class="mw-headline" id="Related">Related</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/wp_insert_post&amp;action=edit&amp;section=9" title="Edit section: Related">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><a href="https://codex.wordpress.org/Function_Reference/wp_update_post" title="Function Reference/wp update post">wp_update_post()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/wp_delete_post" title="Function Reference/wp delete post">wp_delete_post()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/wp_publish_post" title="Function Reference/wp publish post">wp_publish_post()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/wp_delete_attachment" title="Function Reference/wp delete attachment">wp_delete_attachment()</a>,
<a href="https://codex.wordpress.org/Function_Reference/wp_get_attachment_url" title="Function Reference/wp get attachment url">wp_get_attachment_url()</a>,
<a href="https://codex.wordpress.org/Function_Reference/wp_insert_attachment" title="Function Reference/wp insert attachment">wp_insert_attachment()</a>,
<a href="https://codex.wordpress.org/Plugin_API/Filter_Reference/wp_insert_post_data" title="Plugin API/Filter Reference/wp insert post data">wp_insert_post_data()</a>
</p>
<div style="background-color:#F7F7F7; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">See also index of <a href="https://codex.wordpress.org/Function_Reference" title="Function Reference">Function Reference</a> and index of <a href="https://codex.wordpress.org/Template_Tags" title="Template Tags">Template Tags</a>.</div>
<div style="background-color:#EEEEFF; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">This article is <a href="https://codex.wordpress.org/Category:Copyedits" title="Category:Copyedits" class="mw-redirect">marked</a> as in need of editing. You can <a href="https://codex.wordpress.org/Codex:Contributing" title="Codex:Contributing">help</a> Codex by <b><a rel="nofollow" class="external text" href="https://codex.wordpress.org/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/wp_insert_post&amp;action=edit">editing it</a></b>.</div>


