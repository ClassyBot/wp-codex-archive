<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<a href="https://codex.wordpress.org/Function_Reference/add_post_meta" title="Function Reference/add post meta">English</a> • 
<a href="https://codex.wordpress.org/zh-cn:%E5%87%BD%E6%95%B0%E5%8F%82%E8%80%83/add_post_meta" title="zh-cn:函数参考/add post meta">中文(简体)</a> • 
<strong class="selflink">Русский</strong> • 

<a href="https://codex.wordpress.org/es:Referencia_de_Funciones/add_post_meta" title="es:Referencia de Funciones/add post meta">Español</a> • 

<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/関数リファレンス/add_post_meta">日本語</a> 
 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.9E.D0.BF.D0.B8.D1.81.D0.B0.D0.BD.D0.B8.D0.B5"><span class="tocnumber">1</span> <span class="toctext">Описание</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5"><span class="tocnumber">2</span> <span class="toctext">Использование</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.D0.9F.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D1.8B"><span class="tocnumber">3</span> <span class="toctext">Параметры</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B"><span class="tocnumber">4</span> <span class="toctext">Примеры</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#.D0.9F.D0.BE_.D1.83.D0.BC.D0.BE.D0.BB.D1.87.D0.B0.D0.BD.D0.B8.D1.8E"><span class="tocnumber">4.1</span> <span class="toctext">По умолчанию</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#.D0.94.D0.BE.D0.B1.D0.B0.D0.B2.D0.B8.D1.82.D1.8C_.D0.B8.D0.BB.D0.B8_.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.B8.D1.82.D1.8C_.D1.83.D0.BD.D0.B8.D0.BA.D0.B0.D0.BB.D1.8C.D0.BD.D0.BE.D0.B5_.D0.BF.D0.BE.D0.BB.D0.B5"><span class="tocnumber">4.2</span> <span class="toctext">Добавить или обновить уникальное поле</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#.D0.94.D1.80.D1.83.D0.B3.D0.B8.D0.B5_.D0.BF.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B"><span class="tocnumber">4.3</span> <span class="toctext">Другие примеры</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#.D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D1.81.D0.BA.D1.80.D1.8B.D1.82.D1.8B.D1.85_.D0.BF.D1.80.D0.BE.D0.B8.D0.B7.D0.B2.D0.BE.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D0.BF.D0.BE.D0.BB.D0.B5.D0.B9"><span class="tocnumber">4.4</span> <span class="toctext">Создание скрытых произвольных полей</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#.D0.98.D1.81.D1.85.D0.BE.D0.B4.D0.BD.D1.8B.D0.B9_.D1.84.D0.B0.D0.B9.D0.BB"><span class="tocnumber">5</span> <span class="toctext">Исходный файл</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#.D0.98.D1.81.D1.82.D0.BE.D1.80.D0.B8.D1.8F_.D0.B8.D0.B7.D0.BC.D0.B5.D0.BD.D0.B5.D0.BD.D0.B8.D0.B9"><span class="tocnumber">6</span> <span class="toctext">История изменений</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#.D0.A1.D1.85.D0.BE.D0.B6.D0.B5.D0.B5"><span class="tocnumber">7</span> <span class="toctext">Схожее</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id=".D0.9E.D0.BF.D0.B8.D1.81.D0.B0.D0.BD.D0.B8.D0.B5">Описание</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/add_post_meta&amp;action=edit&amp;section=1" title="Edit section: Описание">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b>add_post_meta</b> добавляет <a href="https://codex.wordpress.org/%D0%9F%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BB%D1%8F" title="Произвольные поля">произвольные_поля</a> в указанную запись, страницу или другой <a href="https://codex.wordpress.org/post_type" title="post type" class="mw-redirect">тип документа</a>.
</p><p>Если параметру <tt>$unique</tt> задать значение <var>true</var> и поле с указанным ключом уже существует, функция вернёт <var>false</var> и не произведёт изменений; в противном случае возвращается <var>true</var>.
</p>
<h2><span class="mw-headline" id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5">Использование</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/add_post_meta&amp;action=edit&amp;section=2" title="Edit section: Использование">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;add_post_meta</span><span style="color: #007700">(</span><span style="color: #0000BB">$post_id</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$meta_key</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$meta_value</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$unique</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<h2><span class="mw-headline" id=".D0.9F.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D1.8B">Параметры</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/add_post_meta&amp;action=edit&amp;section=3" title="Edit section: Параметры">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<dl><dt> <tt>$post_id</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#Integer" title="How to Pass Tag Parameters"><i>integer</i></a>) (<i>required</i>) ID записи, к которой нужно добавить произвольное поле.
<dl><dd> Default: <i>None</i></dd></dl></dd></dl>
<dl><dt> <tt>$meta_key</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#String" title="How to Pass Tag Parameters"><i>string</i></a>) (<i>required</i>) Ключ (название) произвольного поля, которое будет добавлено.
<dl><dd> Default: <i>None</i></dd></dl></dd></dl>
<dl><dt> <tt>$meta_value</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#Mixed" title="How to Pass Tag Parameters"><i>mixed</i></a>) (<i>required</i>) Значение произвольного поля, которое будет добавлено. Массив будет преобразован в строку.
<dl><dd> Default: <i>None</i></dd></dl></dd></dl>
<dl><dt> <tt>$unique</tt></dt>
<dd> (<a href="https://codex.wordpress.org/How_to_Pass_Tag_Parameters#Boolean" title="How to Pass Tag Parameters"><i>boolean</i></a>) (<i>optional</i>) Указывает, должно ли поле быть уникальным. Если указать значение true, при добавлении поля, сначала будет проверяться существует ли уже поле с таким <tt>$meta_key</tt>, и если существует, то поле не будет добавлено.
<dl><dd> Default: false</dd></dl></dd></dl>
<h2><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B">Примеры</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/add_post_meta&amp;action=edit&amp;section=4" title="Edit section: Примеры">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id=".D0.9F.D0.BE_.D1.83.D0.BC.D0.BE.D0.BB.D1.87.D0.B0.D0.BD.D0.B8.D1.8E">По умолчанию</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/add_post_meta&amp;action=edit&amp;section=5" title="Edit section: По умолчанию">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<pre>&lt;?php add_post_meta(68, 'my_key', 47);&#160;?&gt;
</pre>
<h3><span class="mw-headline" id=".D0.94.D0.BE.D0.B1.D0.B0.D0.B2.D0.B8.D1.82.D1.8C_.D0.B8.D0.BB.D0.B8_.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.B8.D1.82.D1.8C_.D1.83.D0.BD.D0.B8.D0.BA.D0.B0.D0.BB.D1.8C.D0.BD.D0.BE.D0.B5_.D0.BF.D0.BE.D0.BB.D0.B5">Добавить или обновить уникальное поле</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/add_post_meta&amp;action=edit&amp;section=6" title="Edit section: Добавить или обновить уникальное поле">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Добавляет произвольное поле, если такое поле ещё не существует или обновляет существующее.
Примечание: если четвёртому параметру add_post_meta установить значение true, то поле не будет обновлено, если оно уже существует (проверено на версии WP 2.6.2). Рекомендуется использовать <tt>if (!update_post_meta(...)) add_post_meta(...)</tt>.
</p>
<pre> &lt;?php add_post_meta(7, 'fruit', 'banana', true) or update_post_meta(7, 'fruit', 'banana');&#160;?&gt;
</pre>
<h3><span class="mw-headline" id=".D0.94.D1.80.D1.83.D0.B3.D0.B8.D0.B5_.D0.BF.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B">Другие примеры</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/add_post_meta&amp;action=edit&amp;section=7" title="Edit section: Другие примеры">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Что перед добавлением поля <i>"my_key"</i> убедиться, что оно ещё не существует, следуетиспользовать такой вариант:
</p>
<pre>&lt;?php add_post_meta(68, 'my_key', '47', true);&#160;?&gt;
</pre>
<p>Добавить несколько значений полю <i>"my_key"</i> можно следующим образом:
</p>
<pre>&lt;?php add_post_meta(68, 'my_key', '47');&#160;?&gt;
&lt;?php add_post_meta(68, 'my_key', '682');&#160;?&gt;
&lt;?php add_post_meta(68, 'my_key', 'The quick, brown fox jumped over the lazy dog.');&#160;?&gt;
...</pre>
<p>Больше подробных примеров можно найти на странице <a href="https://codex.wordpress.org/Function_Reference/post_meta_Function_Examples" title="Function Reference/post meta Function Examples">post_meta Functions Examples</a>.
</p>
<h3><span class="mw-headline" id=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D1.81.D0.BA.D1.80.D1.8B.D1.82.D1.8B.D1.85_.D0.BF.D1.80.D0.BE.D0.B8.D0.B7.D0.B2.D0.BE.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D0.BF.D0.BE.D0.BB.D0.B5.D0.B9">Создание скрытых произвольных полей</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/add_post_meta&amp;action=edit&amp;section=8" title="Edit section: Создание скрытых произвольных полей">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Если вы разработчик и вам нужно создать произвольное поле, которое не будет видно пользователям, но при этом будет работать как обычное произвольное поле, то знайте что WordPress не показывает произвольные поля начинающиеся с "_" (нижнего подчеркивания). Не показывает значит, что они игнорируются на странице редактирования постов или при использовании функции шаблона the_meta().
</p><p>Поэтому, если нужно вдруг нужно спрятать произвольное поле, то нужно создавать поле с ключом начинающимся с "_", например:
</p>
<pre>&lt;?php add_post_meta(68, '_color', 'red', true);&#160;?&gt;
</pre>
<p>добавит уникальное произвольное поле _color со значением red и это поле не будет выводится в админке на странице редактирования постов/постоянных страниц.
</p><p>Кроме того, если $meta_value является массивом, оно не будет отображаться на странице редактирования записи или страницы.
</p>
<h2><span class="mw-headline" id=".D0.98.D1.81.D1.85.D0.BE.D0.B4.D0.BD.D1.8B.D0.B9_.D1.84.D0.B0.D0.B9.D0.BB">Исходный файл</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/add_post_meta&amp;action=edit&amp;section=9" title="Edit section: Исходный файл">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><tt>add_post_meta()</tt> объявляется в <code><a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/tags/5.2.3/src/wp-includes/post.php#L0">wp-includes/post.php</a></code>
</p>
<h2><span class="mw-headline" id=".D0.98.D1.81.D1.82.D0.BE.D1.80.D0.B8.D1.8F_.D0.B8.D0.B7.D0.BC.D0.B5.D0.BD.D0.B5.D0.BD.D0.B8.D0.B9">История изменений</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/add_post_meta&amp;action=edit&amp;section=10" title="Edit section: История изменений">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> с версии <a href="https://codex.wordpress.org/Version_1.5" title="Version 1.5">1.5.0</a></li></ul>
<h2><span class="mw-headline" id=".D0.A1.D1.85.D0.BE.D0.B6.D0.B5.D0.B5">Схожее</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_%D0%BF%D0%BE_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%D0%BC/add_post_meta&amp;action=edit&amp;section=11" title="Edit section: Схожее">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><a href="https://codex.wordpress.org/Custom_Fields" title="Custom Fields"><b>Custom Fields</b></a>: 
<a href="https://codex.wordpress.org/Function_Reference/the_meta" title="Function Reference/the meta"> the_meta()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/get_post_meta" title="Function Reference/get post meta"> get_post_meta()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/add_post_meta" title="Function Reference/add post meta"> add_post_meta()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/update_post_meta" title="Function Reference/update post meta"> update_post_meta()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/delete_post_meta" title="Function Reference/delete post meta"> delete_post_meta()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/get_post_custom" title="Function Reference/get post custom"> get_post_custom()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/get_post_custom_values" title="Function Reference/get post custom values"> get_post_custom_values()</a>, 
<a href="https://codex.wordpress.org/Function_Reference/get_post_custom_keys" title="Function Reference/get post custom keys"> get_post_custom_keys()</a> 
(See Also: <a href="https://codex.wordpress.org/Function_Reference/post_meta_Function_Examples" title="Function Reference/post meta Function Examples"> post_meta Function Examples</a>)
</p>
<div style="background-color:#F7F7F7; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">See also index of <a href="https://codex.wordpress.org/Function_Reference" title="Function Reference">Function Reference</a> and index of <a href="https://codex.wordpress.org/Template_Tags" title="Template Tags">Template Tags</a>.</div>


