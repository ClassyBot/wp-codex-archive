<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<a href="https://codex.wordpress.org/The_Loop" title="The Loop">English</a> • 
<a href="https://codex.wordpress.org/fr:La_Boucle" title="fr:La Boucle">Français</a> • 

<strong class="selflink">Italiano</strong> • 

<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/The">Loop 日本語</a> 
<a href="https://codex.wordpress.org/pt-br:O_Loop" title="pt-br:O Loop">Português do Brasil</a> • 

<a href="https://codex.wordpress.org/%D0%A6%D0%B8%D0%BA%D0%BB_WordPress" title="Цикл WordPress">Русский</a> • 

<a href="https://codex.wordpress.org/zh-cn:%E5%BE%AA%E7%8E%AF" title="zh-cn:循环">中文(简体)</a> • 
<a href="https://codex.wordpress.org/zh-tw:%E8%BF%B4%E5%9C%88" title="zh-tw:迴圈">中文(繁體)</a> • 
 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Utilizzare_Il_Loop"><span class="tocnumber">1</span> <span class="toctext">Utilizzare Il Loop</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Esempi_di_Loop"><span class="tocnumber">2</span> <span class="toctext">Esempi di Loop</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Stilizzare_in_maniera_diversa_gli_articoli_di_una_categoria"><span class="tocnumber">2.1</span> <span class="toctext">Stilizzare in maniera diversa gli articoli di una categoria</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Escludere_Articoli_di_una_data_Categoria"><span class="tocnumber">2.2</span> <span class="toctext">Escludere Articoli di una data Categoria</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#Multiple_Loops"><span class="tocnumber">3</span> <span class="toctext">Multiple Loops</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Loop_Examples"><span class="tocnumber">3.1</span> <span class="toctext">Loop Examples</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#Multiple_Loops_Example_1"><span class="tocnumber">3.1.1</span> <span class="toctext">Multiple Loops Example 1</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Multiple_Loops_Example_2"><span class="tocnumber">3.1.2</span> <span class="toctext">Multiple Loops Example 2</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9"><a href="#Multiple_Loops_in_Action"><span class="tocnumber">3.2</span> <span class="toctext">Multiple Loops in Action</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Nested_Loops"><span class="tocnumber">4</span> <span class="toctext">Nested Loops</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Sources"><span class="tocnumber">5</span> <span class="toctext">Sources</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#Resources"><span class="tocnumber">6</span> <span class="toctext">Resources</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#Related"><span class="tocnumber">7</span> <span class="toctext">Related</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#More_About_The_Loop"><span class="tocnumber">7.1</span> <span class="toctext">More About The Loop</span></a></li>
<li class="toclevel-2"><a href="#Articles"><span class="tocnumber">7.2</span> <span class="toctext">Articles</span></a></li>
<li class="toclevel-2"><a href="#Code_Documentation"><span class="tocnumber">7.3</span> <span class="toctext">Code Documentation</span></a></li>
</ul>
</li>
</ul>
</div>

<p><b>Il Loop</b> è il codice PHP utilizzato da WordPress per visualizzare gli articoli. Utilizzando Il Loop, WordPress processa ciascun articolo per essere visualizzato sulla pagina corrente e lo formatta secondo i criteri specificati tramite i tag de Il Loop. Ogni codice <a href="https://codex.wordpress.org/Glossary#HTML" title="Glossary">HTML</a> o <a href="https://codex.wordpress.org/Glossary#PHP" title="Glossary">PHP</a> presente ne Il Loop verrà eseguito per ciascun articolo. 
</p><p>Quando nella documentazione di WordPress si legge "questo tag deve essere usato all'interno de Il Loop", sia per uno specifico <a href="https://codex.wordpress.org/Template_Tags" title="Template Tags">Tag dei template</a> o per i plugin, il tag verrà eseguito per ciascun articolo. Ad esempio, Il Loop visualizza di base per ciascuna articolo le seguenti informazioni: 
</p>
<ul><li> Titolo (<tt><a href="https://codex.wordpress.org/Template_Tags/the_title" title="Template Tags/the title" class="mw-redirect">the_title()</a></tt>)</li>
<li> Data/ora (<tt><a href="https://codex.wordpress.org/Template_Tags/the_time" title="Template Tags/the time" class="mw-redirect">the_time()</a></tt>)</li>
<li> Categorie (<tt><a href="https://codex.wordpress.org/Template_Tags/the_category" title="Template Tags/the category" class="mw-redirect">the_category()</a></tt>).  </li></ul>
<p>&#200; possibile visualizzare altre informazioni per ciasucn articolo utilizando gli opportuni <a href="https://codex.wordpress.org/Template_Tags" title="Template Tags">Tag dei Template</a> o (per gli utenti esperti) accedendo alle variabili di <tt>$post</tt>, che vengono impostate con le informazioni dell'articolo corrente mentre si esegue Il Loop.
</p><p>Per chi inizia con Il Loop si veda <a href="https://codex.wordpress.org/The_Loop_in_Action" title="The Loop in Action">The Loop in Action</a>.
</p>
<h2><span class="mw-headline" id="Utilizzare_Il_Loop">Utilizzare Il Loop</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Il_Loop&amp;action=edit&amp;section=1" title="Edit section: Utilizzare Il Loop">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Il Loop deve essere inserito in <tt>index.php</tt> ed in ogni altro Template utilizzato per visualizzare informazioni sugli articoli. 
</p><p>Assicurarsi di inserire una chiamata al template della testata all'inizio del vostro template del <a href="https://codex.wordpress.org/Theme_Development" title="Theme Development">Tema</a>. Se state utilizzando Il Loop all'interno di un vostro design (ed il vostro design non è un template), impostate <tt>WP_USE_THEMES</tt> a <tt>false</tt>:
</p>
<pre>&lt;?php define('WP_USE_THEMES', false); get_header();&#160;?&gt;</pre>
<p>Il loop inizia qui:
</p>
<pre>&lt;?php if ( have_posts() )&#160;: while ( have_posts() )&#160;: the_post();&#160;?&gt;
</pre>
<p>e finisce qui:
</p>
<pre>&lt;?php endwhile; else:&#160;?&gt;
&lt;p&gt;&lt;?php _e('Sorry, no posts matched your criteria.');&#160;?&gt;&lt;/p&gt;
&lt;?php endif;&#160;?&gt;
</pre>
<p>Questo esempio usa la sintassi alternativa di PHP per le strutture di controllo e può essere scritto anche come:
</p>
<pre>&lt;?php 
	if ( have_posts() ) {
		while ( have_posts() ) {
			the_post(); 
			//
			// Qui il contenuto dell'articolo
			//
		} // end while
	} // end if
?&gt;
</pre>
<h2><span class="mw-headline" id="Esempi_di_Loop">Esempi di Loop</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Il_Loop&amp;action=edit&amp;section=2" title="Edit section: Esempi di Loop">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Stilizzare_in_maniera_diversa_gli_articoli_di_una_categoria">Stilizzare in maniera diversa gli articoli di una categoria</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Il_Loop&amp;action=edit&amp;section=3" title="Edit section: Stilizzare in maniera diversa gli articoli di una categoria">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Questo esempio visualizza ciascuna articolo con il proprio Titolo (che viene utilizzato come link all'Articolo - <a href="https://codex.wordpress.org/Using_Permalinks" title="Using Permalinks">Permalink</a>), le Categorie ed il Contenuto. Inoltre fa si che gli articoli che hanno ID di Categoria '3' vengano stilizzati differentemente. Per far ciò viene utilizzato il <a href="https://codex.wordpress.org/Template_Tags" title="Template Tags">Tag dei Template</a> <tt><a href="https://codex.wordpress.org/Function_Reference/in_category" title="Function Reference/in category">in_category()</a></tt>. Leggete attentamente i commenti per capire cosa faccia ogni parte del codice.
</p>
<pre>
 &lt;!-- Avvio del Loop. --&gt;
 &lt;?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?&gt;

 &lt;!-- Esegue un test per vedere se l'articolo corrente è nella categoria 3. --&gt;
 &lt;!-- Se lo è, al div che lo contiene viene assegnata la classe CSS "post-cat-three". --&gt;
 &lt;!-- Altrimenti al div che lo contiene viene assegnata la classe CSS "post". --&gt;

 &lt;?php if ( in_category('3') ) { ?&gt;
           &lt;div class="post-cat-three"&gt;
 &lt;?php } else { ?&gt;
           &lt;div class="post"&gt;
 &lt;?php } ?&gt;


 &lt;!-- Visualizza il Titolo come link al Permalink dell'Articolo. --&gt;

 &lt;h2&gt;&lt;a href="&lt;?php the_permalink() ?&gt;" rel="bookmark" title="Permalink a &lt;?php the_title_attribute(); ?&gt;"&gt;&lt;?php the_title(); ?&gt;&lt;/a&gt;&lt;/h2&gt;


 &lt;!-- Visualizza la data (in formato November 16th, 2009 - ndt: la data su un WordPress con impostata la lingua italiana appararirà in formato italiano) ed un link agli altri articoli dello stesso autore. --&gt;

 &lt;small&gt;&lt;?php the_time('F jS, Y') ?&gt; by &lt;?php the_author_posts_link() ?&gt;&lt;/small&gt;


 &lt;!-- Visualizza il contenuto dell'Articolo in un div. --&gt;

 &lt;div class="entry"&gt;
   &lt;?php the_content(); ?&gt;
 &lt;/div&gt;


 &lt;!-- Visualizza un elenco separato da virgolo delle Categorie dell'articolo. --&gt;

 &lt;p class="postmetadata"&gt;Pubblicato in &lt;?php the_category(', '); ?&gt;&lt;/p&gt;
 &lt;/div&gt; &lt;!-- Chiude il primo div  --&gt;


 &lt;!-- Ferma Il Loop (ma non il comando "else:" - si veda la riga seguente). --&gt;

 &lt;?php endwhile; else: ?&gt;


 &lt;!-- Viene verificato il primo "if" per vedere se vi sono articoli da --&gt;
 &lt;!-- visualizzare.  Questa parte "else" indica cosa fare se non ve ne sono. --&gt;
 &lt;p&gt;Spiacenti, nessun articolo corrisponde ai criteri di ricerca indicati.&lt;/p&gt;


 &lt;!-- Ferma VERAMENTE Il Loop. --&gt;
 &lt;?php endif; ?&gt;
</pre>
<p><b>Nota:</b> tutto il codice <a href="https://codex.wordpress.org/Glossary#HTML" title="Glossary">HTML</a> deve essere <i>all'esterno</i> dei tag <tt>&lt;?php &#160;?&gt;</tt>.  Ed il codice <a href="https://codex.wordpress.org/Glossary#PHP" title="Glossary">PHP</a> (anche delle cose semplici come le parentesi graffe: <tt>}</tt> ) deve stare <i>dentro</i> i tag <tt>&lt;?php &#160;?&gt;</tt>. Potete aprire o chiudere blocchi di codice PHP per inserire codice HTML dentro i comandi <tt>if</tt> ed <tt>else</tt> come mostrato nell'esempio precedente.
</p>
<h3><span class="mw-headline" id="Escludere_Articoli_di_una_data_Categoria">Escludere Articoli di una data Categoria</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Il_Loop&amp;action=edit&amp;section=4" title="Edit section: Escludere Articoli di una data Categoria">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Questo esempio mostra come nascondere alla visualizzazione una specifica Categoria o alcune Categorie. Inq uesto caso vengono esclusi gli articoli delle Categorie 3 ed 8. L'esempio differisce da quello precedente in quanto modifica la <a href="https://codex.wordpress.org/Template_Tags/query_posts" title="Template Tags/query posts" class="mw-redirect">query</a> stessa.
</p>
<pre>
 &lt;?php query_posts($query_string . '&amp;cat=-3,-8'); ?&gt;
 &lt;?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?&gt;

 &lt;div class="post"&gt;
 
 &lt;!-- Visualizza il Titolo come link al Permalink dell'Articolo. --&gt;
 &lt;h2&gt;&lt;a href="&lt;?php the_permalink() ?&gt;" rel="bookmark" title="Permalink a &lt;?php the_title_attribute(); ?&gt;"&gt;&lt;?php the_title(); ?&gt;&lt;/a&gt;&lt;/h2&gt;

 &lt;!-- Visualizza la data (in formato November 16th, 2009 - ndt: la data su un WordPress con impostata la lingua italiana appararirà in formato italiano) ed un link agli altri articoli dello stesso autore. --&gt;
 &lt;small&gt;&lt;?php the_time('F jS, Y') ?&gt; by &lt;?php the_author_posts_link() ?&gt;&lt;/small&gt;
 
  &lt;div class="entry"&gt;
    &lt;?php the_content(); ?&gt;
  &lt;/div&gt;

  &lt;p class="postmetadata"&gt;Pubblicato in &lt;?php the_category(', '); ?&gt;&lt;/p&gt;
 &lt;/div&gt; &lt;!-- Chiude il primo div --&gt;

 &lt;?php endwhile; else: ?&gt;
 &lt;p&gt;Spiacenti, nessun articolo corrisponde ai criteri di ricerca indicati..&lt;/p&gt;
 &lt;?php endif; ?&gt;
</pre>
<p><b>Nota</b>: Se utilizate questo esempio per la vostra pagina principale dovrete usare un <a href="https://codex.wordpress.org/Templates" title="Templates">Template</a> diverso per i vostri <a href="https://codex.wordpress.org/Category_Templates" title="Category Templates">Archivi di Categoria</a>, altrimenti WordPress escludera gli articoli della Categoria 3 anche quando si sta vedendo il suo archivio di Categoria!  Tuttavia se volete usare lo stesso file dei template potete superare il problema usando il tag <tt><a href="https://codex.wordpress.org/Function_Reference/is_home" title="Function Reference/is home">is_home()</a></tt> per assicurarvi che la Categoria 3 venga esclusa solo dalla pagina principale:  
</p>
<pre>...
&lt;?php if ( is_home() ) {
query_posts($query_string . '&amp;cat=-3');
}
?&gt;
...
</pre>
<p>Vi sono altri <a href="https://codex.wordpress.org/Conditional_Tags" title="Conditional Tags">Tag Condizionali </a> che possono venir usati per controllare l'output in funzioni del fatto che una particolare condizione sia vera o falsa rispetto alla pagina richiesta.
</p>
<h2><span class="mw-headline" id="Multiple_Loops">Multiple Loops</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Il_Loop&amp;action=edit&amp;section=5" title="Edit section: Multiple Loops">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Questa sezione tratta l'uso avanzato del Loop.  E' un pò tecnica – ma non lasciamoci spaventare.  Inizieremo a trattare argomenti facili. Con un pò di buon senso, pazienza ed entusiasmo, arriveremo fare Multiple Loops.
</p><p>Prima di tutto, <b>"Perchè dovremmo usare Multiple Loops?"</b> In generale, la risposta è che vorremmo fare <i>quanlcosa</i> con un gruppo di Posts, e fare <i>qualcosa di differente</i> con un altro gruppo di Posts, <i>ma visualizzare entrambi i gruppi nella stessa pagina</i>.  Potremmo fare di tutto; l'unico limite alla nostra immaginazione è la nostra conoscenza del PHP.  
</p><p>Iniziamo con gli esempi, inanzitutto leggiamo qualcosa di semplice, di seguito il Loop di base:
</p>
<pre>     &lt;?php if (have_posts())&#160;:&#160;?&gt;
               &lt;?php while (have_posts())&#160;: the_post();&#160;?&gt;    
               &lt;!-- do stuff ... --&gt;
               &lt;?php endwhile;&#160;?&gt;
     &lt;?php endif;&#160;?&gt;
</pre>
<p>In English (PHP types and people familiar with code speak can skip to below), the above would be read:  If we are going to be displaying posts, then get them, one at a time.  For each post in the list, display it according to <tt>&lt;!-- do stuff ... --&gt;</tt>.  When you hit the last post, stop.  The <tt>do stuff</tt> line(s), are template dependent.  
</p><p>A little aside on <tt>Do stuff</tt>:  in this example it is simply a placeholder for a bunch of code that determines how to format and display each post on a page.  This code can change depending on how you want your WordPress to look.   If you look at the Kubrick theme’s index.php the <tt>do stuff</tt> section would be everything below:
</p>
<pre>     &lt;?php while (have_posts())&#160;: the_post();&#160;?&gt;
</pre>
<p>To above:
</p>
<pre>     &lt;?php comments_popup_link('No Comments &#187;', '1 Comment &#187;', '% Comments &#187;');&#160;?&gt;
</pre>
<p>An explanation for the coders out there:
The <tt>have_posts()</tt> and <tt>the_post()</tt> are convenience wrappers around the global <tt>$wp_query</tt> object, which is where all of the action is.  The <tt>$wp_query</tt> is called in the blog header and fed query arguments coming in through <tt>GET</tt> and <tt>PATH_INFO</tt>.  The <tt>$wp_query</tt> takes the arguments and builds and executes a DB query that results in an array of posts.  This array is stored in the object and also returned back to the blog header where it is stuffed into the global <tt>$posts</tt> array (for backward compatibility with old post loops).
</p><p>Once WordPress has finished loading the blog header and is descending into the template, we arrive at our post Loop.  The <tt>have_posts()</tt> simply calls into <tt>$wp_query-&gt;have_posts()</tt> which checks a loop counter to see if there are any posts left in the post array.  And <tt>the_post()</tt> calls <tt>$wp_query-&gt;the_post()</tt> which advances the loop counter and sets up the global <tt>$post</tt> variable as well as all of the global post data.  Once we have exhausted the loop, <tt>have_posts()</tt> will return false and we are done.
</p>
<h4><span class="mw-headline" id="Loop_Examples">Loop Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Il_Loop&amp;action=edit&amp;section=6" title="Edit section: Loop Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Below are three examples of using multiple loops.  The key to using multiple loops is that <tt>$wp_query</tt> can only be called once.  In order to get around this it is possible to re-use the query by calling <tt>rewind_posts()</tt> or by creating a new query object.  This is covered in example 1.  In example 2, using a variable to store the results of a query is covered.  Finally, ‘multiple loops in action’ brings a bunch of ideas together to document one way of using multiple loops to promote posts of a certain category on your blog’s homepage.
</p>
<h5><span class="mw-headline" id="Multiple_Loops_Example_1">Multiple Loops Example 1</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Il_Loop&amp;action=edit&amp;section=7" title="Edit section: Multiple Loops Example 1">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>In order to loop through the same query a second time, call <tt>rewind_posts()</tt>.  This will reset the loop counter and allow you to do another loop.  
</p>
<pre>  &lt;?php rewind_posts();&#160;?&gt;
 
  &lt;?php while (have_posts())&#160;: the_post();&#160;?&gt;
    &lt;!-- Do stuff... --&gt;
  &lt;?php endwhile;&#160;?&gt;
</pre>
<p>If you are finished with the posts in the original query, and you want to use a different query, you can reuse the <tt>$wp_query</tt> object by calling <tt>query_posts()</tt> and then <i>looping back</i> through.  The <tt>query_posts()</tt> will perform a new query, build a new posts array, and reset the loop counter.
</p>
<pre>  // Get the last 10 posts in the special_cat category.
  &lt;?php query_posts('category_name=special_cat&amp;posts_per_page=10');&#160;?&gt;

  &lt;?php while (have_posts())&#160;: the_post();&#160;?&gt;
    &lt;!-- Do special_cat stuff... --&gt;
  &lt;?php endwhile;?&gt;
</pre>
<p>If you need to keep the original query around, you can create a new query object.
</p>
<pre>&lt;?php $my_query = new WP_Query('category_name=special_cat&amp;posts_per_page=10');&#160;?&gt;

&lt;?php while ($my_query-&gt;have_posts())&#160;: $my_query-&gt;the_post();&#160;?&gt;
  &lt;!-- Do special_cat stuff... --&gt;
&lt;?php endwhile;&#160;?&gt;
</pre>
<p>The query object <tt>my_query</tt> is used because you cannot use the global <tt>have_posts()</tt> and <tt>the_post()</tt> since they both use <tt>$wp_query</tt>.  Instead, call into your new <tt>$my_query</tt> object.
</p>
<h5><span class="mw-headline" id="Multiple_Loops_Example_2">Multiple Loops Example 2</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Il_Loop&amp;action=edit&amp;section=8" title="Edit section: Multiple Loops Example 2">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>Another version of using multiple Loops takes another tack for getting around the inability to use <tt>have_posts()</tt> and <tt>the_post()</tt>.  To solve this, you need to store the original query in a variable, then re-assign it with the other Loop. This way, you can use all the standard functions that rely on all the globals.
</p><p>For example:
</p>
<pre>// going off on my own here
&lt;?php $temp_query = $wp_query;&#160;?&gt;
&lt;!-- Do stuff... --&gt;

&lt;?php query_posts('category_name=special_cat&amp;posts_per_page=10');&#160;?&gt;

&lt;?php while (have_posts())&#160;: the_post();&#160;?&gt;
  &lt;!-- Do special_cat stuff... --&gt;
&lt;?php endwhile;&#160;?&gt;

// now back to our regularly scheduled programming
&lt;?php $wp_query = $temp_query;&#160;?&gt;
</pre>
<p><b>Note:</b> In PHP 5, objects are referenced with the "= clone" operator instead of "=" like in PHP 4. To make Example 2 work in PHP 5 you need to use the following code:
</p>
<pre>
 // going off on my own here
 &lt;?php $temp_query = clone $wp_query;&#160;?&gt;
 &lt;!-- Do stuff... --&gt;
 
 &lt;?php query_posts('category_name=special_cat&amp;posts_per_page=10');&#160;?&gt;
 
 &lt;?php while (have_posts())&#160;: the_post();&#160;?&gt;
   &lt;!-- Do special_cat stuff... --&gt;
 &lt;?php endwhile;&#160;?&gt;
 &lt;?php endif;&#160;?&gt;
 
 // now back to our regularly scheduled programming
 &lt;?php $wp_query = clone $temp_query;&#160;?&gt;
</pre>
<p>However, this second example does not work in WordPress 2.1.
</p>
<h4><span class="mw-headline" id="Multiple_Loops_in_Action">Multiple Loops in Action</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Il_Loop&amp;action=edit&amp;section=9" title="Edit section: Multiple Loops in Action">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The best way to understand how to use multiple loops is to actually show an example of its use.  Perhaps the most common use of multiple loops is to show two (or more) lists of posts on one page.  This is often done when a webmaster wants to feature not only the very latest post written, but also posts from a certain category.
</p><p>Leaving all formatting and CSS issues aside, let us assume we want to have two lists of posts.  One which would list the most recent posts (the standard 10 posts most recently added), and another which would contain only one post from the category ‘featured’.  Posts in the ‘featured’ category should be shown first, followed by the second listing of posts (the standard).  <b>The catch is that no post should appear in both categories.</b>
</p><p><b>Step 1.</b>  Get only one post from the ‘featured’ category.
</p>
<pre>  &lt;?php $my_query = new WP_Query('category_name=featured&amp;posts_per_page=1');
  while ($my_query-&gt;have_posts())&#160;: $my_query-&gt;the_post();
  $do_not_duplicate = $post-&gt;ID;&#160;?&gt;
    &lt;!-- Do stuff... --&gt;
  &lt;?php endwhile;&#160;?&gt;
</pre>
<p>In English the above code would read: 
</p><p>Set <tt>$my_query</tt> equal to the result of querying all posts where the category is named featured and by the way, get me one post only. Also, set the variable <tt>$do_not_duplicate</tt> equal to the ID number of the single post returned.  Recall that the <tt>Do stuff</tt> line represents all the formatting options associated for the post retrieved.
</p><p>Note that we will need the value of <tt>$do_not_duplicate</tt> in the next step to ensure that the same post doesn't appear in both lists.    
</p><p><b>Step 2</b>.  The second loop, get the X latest posts (except one).
</p><p>The following code gets X recent posts (as defined in WordPress preferences) save the one already displayed from the first loop and displays them according to <tt>Do stuff</tt>.
</p>
<pre>  &lt;?php if (have_posts())&#160;: while (have_posts())&#160;: the_post(); 
  if( $post-&gt;ID == $do_not_duplicate ) continue;?&gt;
   &lt;!-- Do stuff... --&gt;
  &lt;?php endwhile; endif;&#160;?&gt;
</pre>
<p>In English the above code would read: 
</p><p>Get all posts, where a post equals <tt>$do_not_duplicate</tt> then just do nothing (<tt>continue</tt>), otherwise display all the other the posts according to <tt>Do stuff</tt>.  Also, update the cache so the tagging and keyword plugins play nice.  Recall, <tt>$do_not_duplicate</tt> variable contains the ID of the post already displayed.
</p><p><b>The End Result</b>
</p><p>Here is what the final piece of code looks like <i>without any formatting</i>:
</p>
<pre>  &lt;?php $my_query = new WP_Query('category_name=featured&amp;posts_per_page=1');
  while ($my_query-&gt;have_posts())&#160;: $my_query-&gt;the_post();
  $do_not_duplicate = $post-&gt;ID;?&gt;
    &lt;!-- Do stuff... --&gt;
  &lt;?php endwhile;&#160;?&gt;
    &lt;!-- Do other stuff... --&gt;
  &lt;?php if (have_posts())&#160;: while (have_posts())&#160;: the_post(); 
  if( $post-&gt;ID == $do_not_duplicate ) continue;&#160;?&gt;
   &lt;!-- Do stuff... --&gt;
  &lt;?php endwhile; endif;&#160;?&gt;
</pre>
<p>The end result would be a page with two lists.  The first list contains only one post -- the most recent post from the 'feature' category.  The second list will contain X recent posts (as defined in WordPress preferences) <i>except</i> the post that is already shown in the first list.  So, once the feature post is replaced with a new one, the previous feature will show up in standard post list section below (depending on how many posts you choose to display and on the post frequency).  This technique (or similar) has been used by many in conjunction with knowledge of the <a rel="nofollow" class="external text" href="http://codex.WordPress.org/Template_Hierarchy">Template Hierarchy</a> to create a different look for home.php and index.php.  See associated resources at the bottom of this page.
</p><p><b>Note for Multiple Posts in the First Category</b>
</p><p>If posts_per_page=2 or more, you will need to alter the code a bit.  The variable $do_not_duplicate needs to be changed into an array as opposed to a single value.  Otherwise, the first loop will finish and the variable $do_not_duplicate will equal only the id of the latest post.  This will result in duplicated posts in the second loop.  To fix the problem replace
</p>
<pre>&lt;?php $my_query = new WP_Query('category_name=featured&amp;posts_per_page=1');
 while ($my_query-&gt;have_posts())&#160;: $my_query-&gt;the_post();
 $do_not_duplicate = $post-&gt;ID;?&gt;
</pre>
<p>with
</p>
<pre>&lt;?php $my_query = new WP_Query('category_name=featured&amp;posts_per_page=2');
  while ($my_query-&gt;have_posts())&#160;: $my_query-&gt;the_post();
  $do_not_duplicate[] = $post-&gt;ID&#160;?&gt;
</pre>
<p>Note that "posts_per_page" can be any number.
This changes $do_not_duplicate into an array.  Then replace
</p>
<pre>&lt;?php if (have_posts())&#160;: while (have_posts())&#160;: the_post(); if( $post-&gt;ID ==
  $do_not_duplicate ) continue;&#160;?&gt;
</pre>
<p>with
</p>
<pre>&lt;?php if (have_posts())&#160;: while (have_posts())&#160;: the_post(); 
 if (in_array($post-&gt;ID, $do_not_duplicate)) continue;
&#160;?&gt;
</pre>
<p>Where you continue the pattern for whatever posts_per_page is set equal to (2 in this case).
</p><p>Alternatively you can pass the entire <tt>$do_not_duplicate</tt> array to <tt>$wp_query</tt> and only entries that match your criteria will be returned:
</p>
<pre>&lt;?php query_posts(array('post__not_in'=&gt;$do_not_duplicate));
 if (have_posts())&#160;: while (have_posts())&#160;: the_post();
&#160;?&gt; 
</pre>
<p>Note that instead a string, the query parameter was an associative array, with <tt>post__not_in</tt> option.
</p>
<h2><span class="mw-headline" id="Nested_Loops">Nested Loops</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Il_Loop&amp;action=edit&amp;section=10" title="Edit section: Nested Loops">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Nesting loops means that you are running a second loop before finishing the first one. This can be useful to display a post list with a <a href="https://codex.wordpress.org/Shortcode_API" title="Shortcode API">shortcode</a> for example.
<code>
</p>
<pre>   $my_query = new WP_Query( "cat=3" );
   if ( $my_query-&gt;have_posts() ) { 
       while ( $my_query-&gt;have_posts() ) { 
           $my_query-&gt;the_post();
           the_content();
       }
   }
   wp_reset_postdata();
</pre>
<p></code>
It is necessary to reset the main loop data after a nested loop so that some global variables hold the correct values again.
</p>
<h2><span class="mw-headline" id="Sources">Sources</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Il_Loop&amp;action=edit&amp;section=11" title="Edit section: Sources">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The section on multiple loops is a combination of <a rel="nofollow" class="external text" href="http://boren.nu">Ryan Boren</a> and <a rel="nofollow" class="external text" href="http://www.alexking.org">Alex King's</a> <a rel="nofollow" class="external text" href="http://comox.textdrive.com/pipermail/hackers/2005-January/003578.html">discussion</a> about the Loop on the <a href="https://codex.wordpress.org/Mailing_Lists#Hackers" title="Mailing Lists">Hackers Mailing List</a>. The nested loops example was inspired by <a rel="nofollow" class="external text" href="http://lists.automattic.com/pipermail/wp-hackers/2010-May/032064.html">another discussion</a> on the mailing list and a post by <a rel="nofollow" class="external text" href="http://www.nkuttler.de/2010/05/30/wordpress-loop-inside-a-loop/">Nicolas Kuttler</a>.
</p>
<h2><span class="mw-headline" id="Resources">Resources</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Il_Loop&amp;action=edit&amp;section=12" title="Edit section: Resources">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> <a rel="nofollow" class="external text" href="http://generatewp.com/wp_query/">WordPress WP_Query Generator</a></li>
<li> <a rel="nofollow" class="external text" href="http://www.slideshare.net/mitcho/getting-into-the-loop">Getting Into The Loop</a> - (slides) an introduction to how plugins and themes can modify the Loop</li></ul>
<h2><span class="mw-headline" id="Related">Related</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Il_Loop&amp;action=edit&amp;section=13" title="Edit section: Related">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>To learn more about the WordPress Loop, and the various template tags that work only within the Loop, here are more resources:
</p>
<h3><span class="mw-headline" id="More_About_The_Loop">More About The Loop</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=it:Il_Loop&amp;action=edit&amp;section=14" title="Edit section: More About The Loop">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> Article: <a href="https://codex.wordpress.org/The_Loop_in_Action" title="The Loop in Action">The Loop in Action</a></li>
<li> Article: <a href="https://codex.wordpress.org/Template_Tags" title="Template Tags">Template Tags</a></li>
<li> Article: <a href="https://codex.wordpress.org/Templates" title="Templates">Using the Loop in Template Files</a></li></ul>
<h3><span class="mw-headline" id="Articles">Articles</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Template:Query_Tags&amp;action=edit&amp;section=T-1" title="Template:Query Tags">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> Article: <a href="https://codex.wordpress.org/The_Loop" title="The Loop">The Loop</a> - A basic overview of its use of query within the WordPress loop.</li>
<li> Article: <a href="https://codex.wordpress.org/Query_Overview" title="Query Overview">Query Overview</a> - Explanation of how to determine which queries generate WordPress.</li>
<li> Article: <a href="https://codex.wordpress.org/Custom_Queries" title="Custom Queries"> Customizing Queries via Hook</a></li>
<li> Article: <a href="https://codex.wordpress.org/Displaying_Posts_Using_a_Custom_Select_Query" title="Displaying Posts Using a Custom Select Query"> View Articles MYSQL query using custom</a></li>
<li> Article: <a href="https://codex.wordpress.org/Making_Advanced_Taxonomy_Queries" title="Making Advanced Taxonomy Queries"> Build advanced queries on Taxonomies</a></li>
<li> Article: <a href="https://codex.wordpress.org/Making_Custom_Queries_using_Offset_and_Pagination" title="Making Custom Queries using Offset and Pagination"> Build custom query using Offset and pagination</a></li></ul>
<h3><span class="mw-headline" id="Code_Documentation">Code Documentation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Template:Query_Tags&amp;action=edit&amp;section=T-2" title="Template:Query Tags">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> Class: <a href="https://codex.wordpress.org/Class_Reference/WP_Query" title="Class Reference/WP Query"> WP_Query</a> - Detailed Overview of class WP_Query</li>
<li> Class: <a href="https://codex.wordpress.org/Class_Reference/WP_Comment_Query" title="Class Reference/WP Comment Query"> WP_Comment_Query</a> - Class for comment-related queries</li>
<li> Class: <a href="https://codex.wordpress.org/Class_Reference/WP_User_Query" title="Class Reference/WP User Query"> WP_User_Query</a> - Class for user-related queries</li>
<li> Object: <a href="https://codex.wordpress.org/Class_Reference/wpdb" title="Class Reference/wpdb"> $wpdb</a> - Overview on the use of the $wpdb object</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/set_query_var" title="Function Reference/set query var"> set_query_var()</a></li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/get_query_var" title="Function Reference/get query var"> get_query_var()</a></li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/query_posts" title="Function Reference/query posts"> query_posts()</a> - Create additional custom query</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/get_post" title="Function Reference/get post"> get_post()</a> - Take an ID of an item and return the records in the database for that article</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/get_posts" title="Function Reference/get posts" class="mw-redirect"> get_posts()</a> - A specialized function that returns an array of items</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/get_pages" title="Function Reference/get pages"> get_pages()</a> - A specialized function that returns an array of pages</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/have_posts" title="Function Reference/have posts"> have_posts()</a> - A condition that determines whether the query returned an article</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/the_post" title="Function Reference/the post"> the_post()</a> - Used to automatically set the loop after a query</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/rewind_posts" title="Function Reference/rewind posts"> rewind_posts()</a> - Clears the current loop</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/setup_postdata" title="Function Reference/setup postdata"> setup_postdata()</a> - Sets the data for a single query result within a loop</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/wp_reset_postdata" title="Function Reference/wp reset postdata"> wp_reset_postdata()</a> - Restores the previous query (usually after a loop within another loop)</li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/wp_reset_query" title="Function Reference/wp reset query"> wp_reset_query()</a></li>
<li> Function: <a href="https://codex.wordpress.org/Function_Reference/is_main_query" title="Function Reference/is main query"> is_main_query()</a> - Ensures that the query that is being changed is only the main query</li>
<li> Action Hook: <a href="https://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts" title="Plugin API/Action Reference/pre get posts"> pre_get_posts</a> - Change WordPress queries before they are executed</li>
<li> Action Hook: <a href="https://codex.wordpress.org/Plugin_API/Action_Reference/the_post" title="Plugin API/Action Reference/the post"> the_post</a> - Modify the post object after query</li>
<li> Filter Hook: <a href="https://codex.wordpress.org/Plugin_API/Filter_Reference/found_posts" title="Plugin API/Filter Reference/found posts"> found_posts</a> - Changes the value of the object found_posts WP_Query</li></ul>
<div style="background-color:#EEEEFF; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">This article is <a href="https://codex.wordpress.org/Category:Copyedits" title="Category:Copyedits" class="mw-redirect">marked</a> as in need of editing. You can <a href="https://codex.wordpress.org/Codex:Contributing" title="Codex:Contributing">help</a> Codex by <b><a rel="nofollow" class="external text" href="https://codex.wordpress.org/index.php?title=it:Il_Loop&amp;action=edit">editing it</a></b>.</div>

<!-- 
NewPP limit report
Cached time: 20190429054639
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.040 seconds
Real time usage: 0.052 seconds
Preprocessor visited node count: 172/1000000
Preprocessor generated node count: 711/1000000
Post‐expand include size: 4492/2097152 bytes
Template argument size: 587/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   18.460      1 - -total
 71.33%   13.167      1 - Template:Languages
 14.59%    2.694      1 - Template:Copyedit
 10.05%    1.856      1 - Template:Query_Tags
  8.83%    1.629      1 - Template:en
  8.66%    1.598      1 - Template:Message
  8.13%    1.500      1 - Template:ja
  7.44%    1.373      1 - Template:it
  7.18%    1.325      1 - Template:pt-br
  6.85%    1.265      1 - Template:fr
-->
