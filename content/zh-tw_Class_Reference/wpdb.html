<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<a href="https://codex.wordpress.org/Class_Reference/wpdb" title="Class Reference/wpdb">English</a> • 
<a href="https://codex.wordpress.org/it:Riferimento_classi/wpdb" title="it:Riferimento classi/wpdb">Italiano</a> • 

<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/関数リファレンス/wpdb_Class">日本語</a> 
<a href="https://codex.wordpress.org/Class_Reference/ru:wpdb_Class" title="Class Reference/ru:wpdb Class">Русский</a> • 

<a href="https://codex.wordpress.org/zh-cn:Class_Reference/wpdb" title="zh-cn:Class Reference/wpdb">中文(简体)</a> • 
<strong class="selflink">中文(繁體)</strong> • 
 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.E8.B3.87.E6.96.99.E5.BA.AB.E4.BB.8B.E9.9D.A2.E4.BB.8B.E7.B4.B9"><span class="tocnumber">1</span> <span class="toctext">資料庫介面介紹</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#.E4.BD.BF.E7.94.A8_.24wpdb_.E7.89.A9.E4.BB.B6"><span class="tocnumber">1.1</span> <span class="toctext">使用 <i>$wpdb</i> 物件</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3"><a href="#.E5.9C.A8.E8.B3.87.E6.96.99.E5.BA.AB.E4.B8.8A.E9.81.8B.E8.A1.8C.E4.BB.BB.E5.8B.99.E6.9F.A5.E8.A9.A2"><span class="tocnumber">2</span> <span class="toctext">在資料庫上運行任務查詢</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#.E4.BE.8B.E5.AD.90"><span class="tocnumber">2.1</span> <span class="toctext">例子</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#SELECT_a_Variable_.E9.81.B8.E6.93.87.E6.9F.90.E4.B8.80.E5.80.8B.E8.AE.8A.E6.95.B8"><span class="tocnumber">3</span> <span class="toctext">SELECT a Variable 選擇某一個變數</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#.E7.AF.84.E4.BE.8B"><span class="tocnumber">3.1</span> <span class="toctext">範例</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#SELECT_a_Row_.E9.81.B8.E6.93.87.E6.9F.90.E4.B8.80.E5.80.8B.E8.B3.87.E6.96.99.E5.88.97"><span class="tocnumber">4</span> <span class="toctext">SELECT a Row 選擇某一個資料列</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#.E7.AF.84.E4.BE.8B_2"><span class="tocnumber">4.1</span> <span class="toctext">範例</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#SELECT_a_Column_.E9.81.B8.E6.93.87.E6.9F.90.E4.B8.80.E5.80.8B.E6.AC.84.E4.BD.8D"><span class="tocnumber">5</span> <span class="toctext">SELECT a Column 選擇某一個欄位</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#.E7.AF.84.E4.BE.8B_3"><span class="tocnumber">5.1</span> <span class="toctext">範例</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#SELECT_Generic_Results_.E6.9F.A5.E8.A9.A2.E4.B8.80.E8.88.AC.E7.B5.90.E6.9E.9C"><span class="tocnumber">6</span> <span class="toctext">SELECT Generic Results 查詢一般結果</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#.E7.AF.84.E4.BE.8B_4"><span class="tocnumber">6.1</span> <span class="toctext">範例</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#INSERT_row_.E6.8F.92.E5.85.A5.E8.B3.87.E6.96.99.E5.88.97"><span class="tocnumber">7</span> <span class="toctext">INSERT row 插入資料列</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#.E7.AF.84.E4.BE.8B_5"><span class="tocnumber">7.1</span> <span class="toctext">範例</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#REPLACE_row_.E5.8F.96.E4.BB.A3.E8.B3.87.E6.96.99.E5.88.97"><span class="tocnumber">8</span> <span class="toctext">REPLACE row 取代資料列</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#.E7.AF.84.E4.BE.8B_6"><span class="tocnumber">8.1</span> <span class="toctext">範例</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="#UPDATE_rows_.E6.9B.B4.E6.96.B0.E8.B3.87.E6.96.99.E5.88.97"><span class="tocnumber">9</span> <span class="toctext">UPDATE rows 更新資料列</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#.E7.AF.84.E4.BE.8B_7"><span class="tocnumber">9.1</span> <span class="toctext">範例</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="#Protect_Queries_Against_SQL_Injection_Attacks"><span class="tocnumber">10</span> <span class="toctext">Protect Queries Against SQL Injection Attacks</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#Examples"><span class="tocnumber">10.1</span> <span class="toctext">Examples</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-21"><a href="#Show_and_Hide_SQL_Errors"><span class="tocnumber">11</span> <span class="toctext">Show and Hide SQL Errors</span></a></li>
<li class="toclevel-1 tocsection-22"><a href="#Getting_Column_Information"><span class="tocnumber">12</span> <span class="toctext">Getting Column Information</span></a></li>
<li class="toclevel-1 tocsection-23"><a href="#Clearing_the_Cache"><span class="tocnumber">13</span> <span class="toctext">Clearing the Cache</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="#Class_Variables"><span class="tocnumber">14</span> <span class="toctext">Class Variables</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="#Multi-Site_Variables"><span class="tocnumber">14.1</span> <span class="toctext">Multi-Site Variables</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-26"><a href="#Tables"><span class="tocnumber">15</span> <span class="toctext">Tables</span></a></li>
<li class="toclevel-1 tocsection-27"><a href="#Related"><span class="tocnumber">16</span> <span class="toctext">Related</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id=".E8.B3.87.E6.96.99.E5.BA.AB.E4.BB.8B.E9.9D.A2.E4.BB.8B.E7.B4.B9">資料庫介面介紹</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=1" title="Edit section: 資料庫介面介紹">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>WordPress包含了一些預設用來操作資料庫(Database)函數(Function)的類別(Class)——<code>wpdb</code>，該類基於<a rel="nofollow" class="external text" href="http://justinvincent.com/ezsql">ezSQL</a>（由<a rel="nofollow" class="external text" href="http://www.jvmultimedia.com">Justin Vincent</a>維護的資料庫操作專案）編寫，包含了其基本的功能。
</p>
<h3><span class="mw-headline" id=".E4.BD.BF.E7.94.A8_.24wpdb_.E7.89.A9.E4.BB.B6">使用 <i>$wpdb</i> 物件</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=2" title="Edit section: 使用 $wpdb 物件">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><b>警告：在 <code>wpdb()</code> 類別裡的方法都不應該被直接呼叫，請改為使用 <code>$wpdb</code> 全域物件！</b> 
</p><p>WordPress 提供了一個全域物件變數 - <code>$wpdb</code>，這是一個定義於 <a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/trunk/src/wp-includes/wp-db.php">/wp-includes/wp-db.php</a> 裡 <i>wpdb</i> 類別的實體。<br />在預設情況下，<code>$wpdb</code> 會被實體化以便與 WordPress 資料庫通信。若要在你的 WordPress PHP 程式碼裡使用 <code>$wpdb</code> 的話，請先透過 <code><a rel="nofollow" class="external text" href="http://www.php.net/manual/en/language.variables.scope.php#language.variables.scope.global">global 關鍵字</a></code> 將 <code>$wpdb</code> 宣告成全域變數或者以下列形式使用 <a rel="nofollow" class="external text" href="http://www.php.net/manual/en/language.variables.superglobals.php">超全域變數 <code>$GLOBALS</code></a>：
<code>
</p>
<pre>// 1st Method - Declaring $wpdb as global and using it to execute an SQL query statement that returns a PHP object

global $wpdb;
$results = $wpdb-&gt;get_results( 'SELECT * FROM wp_options WHERE option_id = 1', OBJECT );

// 2nd Method - Utilizing the $GLOBALS superglobal. Does not require global keyword ( but may not be best practice )

$results = $GLOBALS['wpdb']-&gt;get_results( 'SELECT * FROM wp_options WHERE option_id = 1', OBJECT );
</pre>
<p></code>
<code>$wpdb</code> 物件不限於只能使用在由 WordPress 所建立的預設資料表上；它可以被用來從 WordPress 資料庫裡的「任何」資料表（例如自訂外掛資料表）中讀取資料。<br />舉個例子，若要從某一個名為「mytable」的自訂資料表中 SELECT 某一些資訊的話，那麼你可以照著下列方法來做。
<code>
</p>
<pre>$myrows = $wpdb-&gt;<a href="#SELECT_Generic_Results">get_results</a>( "SELECT id, name FROM mytable" );
</pre>
<p></code>
<code>$wpdb</code> 物件可以與任意數量的資料表交談，但一次只能一個資料庫，預設為 WordPress 的資料庫。<br />在某些你需要連接到其他資料庫的罕見情況下，你將會需要透過你自己的資料庫連接資訊來從 <code>wpdb</code> 類別中實體化出你自己的物件。<br />對於需要用到許多資料庫的極度複雜的安裝程序來說，請改為使用 <a rel="nofollow" class="external text" href="http://wordpress.org/extend/plugins/hyperdb/">hyperdb</a>。
</p>
<h2><span class="mw-headline" id=".E5.9C.A8.E8.B3.87.E6.96.99.E5.BA.AB.E4.B8.8A.E9.81.8B.E8.A1.8C.E4.BB.BB.E5.8B.99.E6.9F.A5.E8.A9.A2">在資料庫上運行任務查詢</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=3" title="Edit section: 在資料庫上運行任務查詢">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>這個查詢函數允許你在wordpress的資料庫裡運行任何SQL查詢。當然了，最好能利用如下的特定函數，
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'query'</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> query&#160;</dt>
<dd> (字串) 你打算執行的SQL查詢語法。</dd></dl>
<p>本函數傳回特定受影響或已選擇行(rows)數的整數(integer)。當發生MySQL錯誤, 本函數將傳回<code>FALSE</code>.  (<b>注意</b>: 因著0及FALSE可以同時傳回, 請認清你使用了正確的比較運算符
</p>
<dl><dd> 相同(equality) <code>==</code> vs. 恒等(identicality) <code>===</code>).</dd></dl>
<p>註: As with all functions in this class that execute SQL queries, you must SQL escape all inputs (e.g., <code>wpdb-&gt;escape($user_entered_data_string)</code>).  See the section entitled <a rel="nofollow" class="external text" href="http://codex.wordpress.org/wpdb_Class#Protect_Queries_Against_SQL_Injection_Attacks">Protect Queries Against SQL Injection Attacks</a> below.
</p>
<h3><span class="mw-headline" id=".E4.BE.8B.E5.AD.90">例子</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=4" title="Edit section: 例子">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>刪去 meta key 為 'gargle' 及 post id 為 13 的記錄：
</p>
<pre>
$wpdb-&gt;query("
	DELETE FROM $wpdb-&gt;postmeta WHERE post_id = '13'
	AND meta_key = 'gargle'");
</pre>
<p><i>在WordPress中已可用 <code><a href="https://codex.wordpress.org/Function_Reference/delete_post_meta" title="Function Reference/delete post meta">delete_post_meta()</a></code> 運行</i>
</p><p><br />
設定第15頁的父<a href="https://codex.wordpress.org/zh-tw:%E7%B6%B2%E8%AA%8C%E5%88%86%E9%A0%81" title="zh-tw:網誌分頁">頁</a>為第7頁：
</p>
<pre>
$wpdb-&gt;query("
	UPDATE $wpdb-&gt;posts SET post_parent = 7
	WHERE ID = 15 AND post_status = 'static'");
</pre>
<h2><span class="mw-headline" id="SELECT_a_Variable_.E9.81.B8.E6.93.87.E6.9F.90.E4.B8.80.E5.80.8B.E8.AE.8A.E6.95.B8">SELECT a Variable 選擇某一個變數</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=5" title="Edit section: SELECT a Variable 選擇某一個變數">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><code>get_var</code> 函數會回傳來自資料庫裡的單一變數，儘管只有一個變數會被回傳，整個查詢結果都會被暫存起來以便之後使用。<br />如果找不到任何結果的話則回傳 <tt>NULL</tt> 。
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_var</span><span style="color: #007700">(</span><span style="color: #DD0000">'query'</span><span style="color: #007700">,</span><span style="color: #0000BB">column_offset</span><span style="color: #007700">,</span><span style="color: #0000BB">row_offset</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> query&#160;</dt>
<dd> (字串)你希望執行的查詢，將這個參數設定成 <code>null</code> 將會從前次查詢的暫存結果中回傳特定變數。</dd>
<dt> column_offset&#160;</dt>
<dd> (整數) 所需的欄位 (<b>0</b> 代表第一個)，預設值為 <b>0</b>。</dd>
<dt> row_offset&#160;</dt>
<dd> (整數) 所需的資料列 (<b>0</b> 代表第一個)，預設值為 <b>0</b>。</dd></dl>
<h3><span class="mw-headline" id=".E7.AF.84.E4.BE.8B">範例</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=6" title="Edit section: 範例">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>抓取並顯示使用者數量。
</p>
<pre>
&lt;?php
$user_count = $wpdb-&gt;get_var($wpdb-&gt;prepare("SELECT COUNT(*) FROM $wpdb-&gt;users;"));
echo '&lt;p&gt;User count is ' . $user_count . '&lt;/p&gt;';
?&gt;
</pre>
<p>抓取並顯示某一個 <a href="https://codex.wordpress.org/Custom_Fields" title="Custom Fields">自訂欄位值</a> 的總和。
</p>
<pre>
&lt;?php
$meta_key = 'miles';//set this to appropriate custom field meta key
$allmiles=$wpdb-&gt;get_var($wpdb-&gt;prepare("SELECT sum(meta_value) FROM $wpdb-&gt;postmeta WHERE meta_key =&#160;%s", $meta_key));
echo '&lt;p&gt;Total miles is '.$allmiles . '&lt;/p&gt;';
?&gt; 
</pre>
<h2><span class="mw-headline" id="SELECT_a_Row_.E9.81.B8.E6.93.87.E6.9F.90.E4.B8.80.E5.80.8B.E8.B3.87.E6.96.99.E5.88.97">SELECT a Row 選擇某一個資料列</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=7" title="Edit section: SELECT a Row 選擇某一個資料列">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>若要從某一個查詢中取出整個資料列的話，請使用 <code>get_row</code>，該函數可以將資料列回傳為物件、關聯陣列或者數字索引陣列。<br />如果該查詢回傳超過一個以上的資料列的話，那麼只有指定的資料列會被該函數回傳，但所有資料列都會被暫存以便後續使用。<br />如果找不到任何結果的話則回傳 NULL。
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_row</span><span style="color: #007700">(</span><span style="color: #DD0000">'query'</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">output_type</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">row_offset</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> query&#160;</dt>
<dd> (字串) 你希望執行的查詢。</dd>
<dt> output_type&#160;</dt>
<dd> 三個預先定義好的常數之一，預設值為 OBJECT。
<ul><li> OBJECT - 結果將會被輸出成物件。</li>
<li> ARRAY_A - 結果將會被輸出成關聯陣列。</li>
<li> ARRAY_N - 結果將會被輸出成數字索引陣列。</li></ul></dd></dl>
<dl><dt> row_offset&#160;</dt>
<dd> (整數) 所需的資料列 (<b>0</b> 代表第一個)，預設值為 <b>0</b>。</dd></dl>
<h3><span class="mw-headline" id=".E7.AF.84.E4.BE.8B_2">範例</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=8" title="Edit section: 範例">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>獲得關於 Link 10 的所有資訊。
</p>
<pre>
$mylink = $wpdb-&gt;get_row("SELECT * FROM $wpdb-&gt;links WHERE link_id = 10");
</pre>
<p><code>$mylink</code> 物件的屬性為來自 SQL 查詢結果裡的欄位名稱（在本範例裡為來自 <code>$wpdb-&gt;links</code> 資料表裡的所有欄位）。
</p>
<pre>echo $mylink-&gt;link_id; // prints "10"
</pre>
<p><br />
相較之下，使用
</p>
<pre>$mylink = $wpdb-&gt;get_row("SELECT * FROM $wpdb-&gt;links WHERE link_id = 10", ARRAY_A);
</pre>
<p>將會使結果變成關聯陣列：
</p>
<pre>echo $mylink['link_id']; // prints "10"
</pre>
<p><br />
而
</p>
<pre>$mylink = $wpdb-&gt;get_row("SELECT * FROM $wpdb-&gt;links WHERE link_id = 10", ARRAY_N);
</pre>
<p>將會使結果變成數字索引陣列：
</p>
<pre>echo $mylink[1]; // prints "10"
</pre>
<h2><span class="mw-headline" id="SELECT_a_Column_.E9.81.B8.E6.93.87.E6.9F.90.E4.B8.80.E5.80.8B.E6.AC.84.E4.BD.8D">SELECT a Column 選擇某一個欄位</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=9" title="Edit section: SELECT a Column 選擇某一個欄位">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>若要 SELECT 某一個欄位，請使用 <code>get_col</code>，這個函數會輸出一個維度化陣列。<br />如果該查詢回傳超過一個以上的欄位的話，那麼只有特定的欄位會被該函數回傳，但整個查詢結果都會被暫存以便後續使用。<br />如果找不到任何結果的話則回傳一個空陣列。
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_col</span><span style="color: #007700">(</span><span style="color: #DD0000">'query'</span><span style="color: #007700">,</span><span style="color: #0000BB">column_offset</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> query&#160;</dt>
<dd> (字串) 你希望執行的查詢，將這個參數設定成 <code>null</code> 將會從前次查詢的暫存結果中回傳特定欄位。</dd>
<dt> column_offset&#160;</dt>
<dd> (整數) 所需的欄位 (<b>0</b> 代表第一個)，預設值為 <b>0</b>。</dd></dl>
<h3><span class="mw-headline" id=".E7.AF.84.E4.BE.8B_3">範例</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=10" title="Edit section: 範例">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>就本範例而言，假設該部落格專門提供汽車相關資訊，每一篇文章都描述了特定的某一台汽車（例如：1969 Ford Mustang）以及將三個<a href="https://codex.wordpress.org/Custom_Fields" title="Custom Fields">自訂欄位</a> - 製造商、型號以及年份指定給每一篇文章。<br />本範例將會顯示以特定製造商（Ford）篩選並按照型號與年份排序的文章標題。
</p><p><tt>wpdb 類別</tt>的 <b>get_col</b> 表達形式會被用於回傳符合特定條件並按照正確順序排序的所有文章 ID。<br />接著某一個 <i>foreach</i> 建構子將會被用於疊代處理該文章 ID 陣列並顯示每一篇文章的標題。<br />注意：本範例的 SQL 查詢指令是由 <a rel="nofollow" class="external text" href="http://stackoverflow.com/questions/1690762/complicated-mysql-query/1690808#1690808">Andomar</a> 所建立的。
</p>
<pre>
&lt;?php 
$meta_key1 = 'model';
$meta_key2 = 'year';
$meta_key3 = 'manufacturer';
$meta_key3_value = 'Ford';

$postids=$wpdb-&gt;get_col($wpdb-&gt;prepare("
SELECT      key3.post_id
FROM        $wpdb-&gt;postmeta key3
INNER JOIN  $wpdb-&gt;postmeta key1 
            on key1.post_id = key3.post_id
            and key1.meta_key =&#160;%s 
INNER JOIN  $wpdb-&gt;postmeta key2
            on key2.post_id = key3.post_id
            and key2.meta_key =&#160;%s
WHERE       key3.meta_key =&#160;%s 
            and key3.meta_value =&#160;%s
ORDER BY    key1.meta_value, key2.meta_value",$meta_key1, $meta_key2, $meta_key3, $meta_key3_value)); 

if ($postids) {
  echo 'List of ' . $meta_key3_value . '(s), sorted by ' . $meta_key1 . ', ' . $meta_key2;
  foreach ($postids as $id) { 
    $post=get_post(intval($id));
    setup_postdata($post);?&gt;
    &lt;p&gt;&lt;a href="&lt;?php the_permalink()&#160;?&gt;" rel="bookmark" title="Permanent Link to &lt;?php the_title_attribute();&#160;?&gt;"&gt;&lt;?php the_title();&#160;?&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;?php
  } 
}
?&gt;
</pre>
<p>該範例會列出包含某一個特定自訂欄位但按照第二個自訂欄位值排序的所有文章。
</p>
<pre>
&lt;?php
//List all posts with custom field Color, sorted by the value of custom field Display_Order
//does not exclude any 'post_type'
//assumes each post has just one custom field for Color, and one for Display_Order
$meta_key1 = 'Color';
$meta_key2 = 'Display_Order';

$postids=$wpdb-&gt;get_col($wpdb-&gt;prepare("
SELECT      key1.post_id
FROM        $wpdb-&gt;postmeta key1
INNER JOIN  $wpdb-&gt;postmeta key2
            on key2.post_id = key1.post_id
            and key2.meta_key =&#160;%s
WHERE       key1.meta_key =&#160;%s
ORDER BY    key2.meta_value+(0) ASC",
         $meta_key2,$meta_key1)); 

if ($postids) {
  echo 'List of '. $meta_key1  . ' posts, sorted by ' . $meta_key2&#160;;
  foreach ($postids as $id) {
    $post=get_post(intval($id));
    setup_postdata($post);?&gt;
    &lt;p&gt;&lt;a href="&lt;?php the_permalink()&#160;?&gt;" rel="bookmark" title="Permanent Link to &lt;?php the_title_attribute();&#160;?&gt;"&gt;&lt;?php the_title();&#160;?&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;?php
  }
}
?&gt;
</pre>
<h2><span class="mw-headline" id="SELECT_Generic_Results_.E6.9F.A5.E8.A9.A2.E4.B8.80.E8.88.AC.E7.B5.90.E6.9E.9C">SELECT Generic Results 查詢一般結果</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=11" title="Edit section: SELECT Generic Results 查詢一般結果">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>一般來說，多重資料列查詢結果可以透過 <code>get_results</code> 來從資料庫裡抽出，該函數會將整個查詢結果回傳為一個陣列。<br />該陣列裡的每一個元素都會對應到查詢結果裡的某一個資料列，有如 <code>get_row</code> 一般，它可以是一個物件、關聯陣列或數字編號陣列。
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_results</span><span style="color: #007700">(</span><span style="color: #DD0000">'query'</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">output_type</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> query&#160;</dt>
<dd> (字串) 你希望執行的查詢，將這個參數設定成 <code>null</code> 將會從前次查詢的暫存結果中回傳資料。</dd>
<dt> output_type&#160;</dt>
<dd> 四個預先定義好的常數裡的其中一個，預設值為 OBJECT，請參閱 <a href="#.E9.81.B8.E6.93.87.E6.9F.90.E4.B8.80.E5.80.8B.E8.B3.87.E6.96.99.E5.88.97">選擇某一個資料列</a> 以及其範例以獲得更多資訊。
<ul><li> OBJECT - 結果將會被輸出成資料列物件裡的數字索引陣列。</li>
<li> OBJECT_K - 結果將會被輸出成資料列物件裡的關聯陣列並以第一個欄位的值作為索引鍵（重複的值將會被捨棄）。</li>
<li> ARRAY_A -結果將會被輸出成關聯陣列裡的數字索引陣列並以欄位名稱作為索引鍵。</li>
<li> ARRAY_N - 結果將會被輸出成數字索引陣列裡的數字索引陣列。</li></ul></dd></dl>
<p>由於該函數使用 '$wpdb-&gt;query()' 函數，因此所有變數都已被適當地設置好了。<br />
針對某一個 'SELECT' 查詢的結果數量將會被儲存在 $wpdb-&gt;num_rows 裡。
</p>
<h3><span class="mw-headline" id=".E7.AF.84.E4.BE.8B_4">範例</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=12" title="Edit section: 範例">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>獲得 5 號使用者所有草稿的 ID 以及標題並輸出標題。
</p>
<pre>
$fivesdrafts = $wpdb-&gt;get_results("SELECT ID, post_title FROM $wpdb-&gt;posts
	WHERE post_status = 'draft' AND post_author = 5");

foreach ($fivesdrafts as $fivesdraft) {
	echo $fivesdraft-&gt;post_title;
}
</pre>
<p>獲得 5 號使用者草稿上的所有資訊。
</p>
<pre>
&lt;?php
$fivesdrafts = $wpdb-&gt;get_results("SELECT * FROM $wpdb-&gt;posts
	WHERE post_status = 'draft' AND post_author = 5");
if ($fivesdrafts)&#160;:
	foreach ($fivesdrafts as $post)&#160;:
		setup_postdata($post);
?&gt;
	&lt;h2&gt;&lt;a href="&lt;?php the_permalink();&#160;?&gt;" rel="bookmark"
		title="Permanent Link to &lt;?php the_title();&#160;?&gt;"&gt;&lt;?php the_title();&#160;?&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;?php
	endforeach;
else&#160;:
?&gt;
    &lt;h2&gt; Not Found&lt;/h2&gt;
&lt;?php endif;&#160;?&gt;
</pre>
<h2><span class="mw-headline" id="INSERT_row_.E6.8F.92.E5.85.A5.E8.B3.87.E6.96.99.E5.88.97">INSERT row 插入資料列</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=13" title="Edit section: INSERT row 插入資料列">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>將某一個資料列插入到資料表裡。
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$table</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$data</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$format&#160;</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> table&#160;</dt>
<dd> (字串) 要插入資料的資料表名稱。</dd>
<dt> data&#160;</dt>
<dd> (陣列) 要插入的資料（以 column =&gt; value 配對的形式），$data 欄位以及 $data 值都應為『原始』值（皆不應該被 SQL 跳脫過）。</dd>
<dt> format&#160;</dt>
<dd> (陣列|字串) (可選) 格式裡的陣列都要對應到 $data 裡的每一個值，如果是字串，那麼該格式將會被用於 $data 裡所有的值。<br />如果忽略，那麼除非已在 wpdb::$field_types 裡指定，否則在 $data 裡所有的值都會被視為字串。</dd></dl>
<p>可能的格式值：%s 為字串；%d 為十進位數字以及&#160;%f 為浮點數。
</p><p>在插入資料後，為 AUTO_INCREMENT 欄位所產生的 ID 可以透過該變數存取：
</p>
<pre>$wpdb-&gt;insert_id</pre>
<p>如果資料列無法被插入的話，那麼該函數會回傳 false。
</p>
<h3><span class="mw-headline" id=".E7.AF.84.E4.BE.8B_5">範例</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=14" title="Edit section: 範例">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>在某一個資料列內插入兩個欄位，第一個值為字串而第二個值為數字：
</p>
<pre>
$wpdb-&gt;insert( 'table', array( 'column1' =&gt; 'value1', 'column2' =&gt; 123 ), array( '%s', '%d' ) )
</pre>
<h2><span class="mw-headline" id="REPLACE_row_.E5.8F.96.E4.BB.A3.E8.B3.87.E6.96.99.E5.88.97">REPLACE row 取代資料列</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=15" title="Edit section: REPLACE row 取代資料列">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>若資料列存在的話則取代某一個資料表裡的某一個資料列或者若資料列尚未存在的話則在資料表裡插入新的資料列。
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">replace</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$table</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$data</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$format&#160;</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> table&#160;</dt>
<dd> (字串) 要取代資料的資料表名稱。</dd>
<dt> data&#160;</dt>
<dd> (陣列) 要取代的資料 (以 column =&gt; value 配對的形式)，<tt>$data</tt> 欄位以及 <tt>$data</tt> 值都應為『原始』值（皆不應該被 SQL 跳脫過）。</dd>
<dt> format&#160;</dt>
<dd> (陣列 | 字串) (可選) An array of formats to be mapped to each of the value in <tt>$data</tt>. If string, that format will be used for all of the values in <tt>$data</tt>. If omitted, all values in <tt>$data</tt> will be treated as strings unless otherwise specified in <tt>wpdb::$field_types</tt>.</dd></dl>
<p>可能的格式值：<tt>%s</tt> as string; <tt>%d</tt> as integer (whole number); and <tt>%f</tt> as float. (See <a href="#Placeholders"> below</a> for more information.)
</p><p>After replace, the ID generated for the <tt>AUTO_INCREMENT</tt> column can be accessed with:
</p>
 <pre>$wpdb-&gt;insert_id</pre>
<p>This function returns a count to indicate the number of rows affected. This is the sum of the rows deleted and inserted. If the count is 1 for a single-row REPLACE, a row was inserted and no rows were deleted. If the count is greater than 1, one or more old rows were deleted before the new row was inserted. It is possible for a single row to replace more than one old row if the table contains multiple unique indexes and the new row duplicates values for different old rows in different unique indexes.
</p><p>This function returns <tt>false</tt> if an existing row could not be replaced and a new row could not be inserted.
</p>
<h3><span class="mw-headline" id=".E7.AF.84.E4.BE.8B_6">範例</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=16" title="Edit section: 範例">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>取代某一個資料列，第一個值為資料列 ID，第二個值為字串以及第三個值為數字：
</p>
<pre>
$wpdb-&gt;replace( 
	'table', 
	array( 
                'indexed_id' =&gt; 1,
		'column1' =&gt; 'value1', 
		'column2' =&gt; 123 
	), 
	array( 
                '%d',
		'%s', 
		'%d' 
	) 
);
</pre>
<h2><span class="mw-headline" id="UPDATE_rows_.E6.9B.B4.E6.96.B0.E8.B3.87.E6.96.99.E5.88.97">UPDATE rows 更新資料列</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=17" title="Edit section: UPDATE rows 更新資料列">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>更新資料表裡的某一個資料列，如果發生錯誤的話則回傳 <tt>false</tt>，或者若成功的話則回傳資料列數量。
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(&#160;</span><span style="color: #0000BB">$table</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$data</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$where</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$format&#160;</span><span style="color: #007700">=&#160;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">$where_format&#160;</span><span style="color: #007700">=&#160;</span><span style="color: #0000BB">null&#160;</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> table&#160;</dt>
<dd> (字串) 要更新的資料表名稱。</dd>
<dt> data&#160;</dt>
<dd> (陣列) 要更新的資料（以 <tt>column =&gt; value</tt> 配對的形式）。Both $data columns and $data values should be "raw" (neither should be SQL escaped).</dd>
<dt> where&#160;</dt>
<dd> (array) A named array of WHERE clauses (in column =&gt; value pairs). Multiple clauses will be joined with ANDs. Both $where columns and $where values should be "raw".</dd>
<dt> format&#160;</dt>
<dd> (array|string) (optional) An array of formats to be mapped to each of the values in $data. If string, that format will be used for all of the values in $data.</dd>
<dt> where_format&#160;</dt>
<dd> (array|string) (optional) An array of formats to be mapped to each of the values in $where. If string, that format will be used for all of the items in $where.</dd></dl>
<p><strong>Possible format values</strong>:&#160;%s as string;&#160;%d as decimal number and&#160;%f as float. If omitted, all values in $where will be treated as strings.
</p>
<h3><span class="mw-headline" id=".E7.AF.84.E4.BE.8B_7">範例</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=18" title="Edit section: 範例">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Update a row, where the ID is 1, the value in the first column is a string and the value in the second column is a number: 
</p>
<pre>
$wpdb-&gt;update( 'table', array( 'column1' =&gt; 'value1', 'column2' =&gt; 'value2' ), array( 'ID' =&gt; 1 ), array( '%s', '%d' ), array( '%d' ) )
</pre>
<h2><span class="mw-headline" id="Protect_Queries_Against_SQL_Injection_Attacks">Protect Queries Against SQL Injection Attacks</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=19" title="Edit section: Protect Queries Against SQL Injection Attacks">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>For a more complete overview of SQL escaping in WordPress, see <a href="https://codex.wordpress.org/Data_Validation#Database" title="Data Validation">database Data Validation</a>.  That <a href="https://codex.wordpress.org/Data_Validation" title="Data Validation">Data Validation</a> article is a <b>must-read</b> for all WordPress code contributors and plugin authors.
</p><p>Briefly, though, all data in SQL queries must be SQL-escaped before the SQL query is executed to prevent against SQL injection attacks.  This can be conveniently done with the <code>prepare</code> method, which supports both a <a rel="nofollow" class="external text" href="http://php.net/sprintf">sprintf()</a>-like and <a rel="nofollow" class="external text" href="http://php.net/vsprintf">vsprintf()</a>-like syntax.
</p><p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php&#160;$sql&#160;</span><span style="color: #007700">=&#160;</span><span style="color: #0000BB">$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(&#160;</span><span style="color: #DD0000">'query'&#160;</span><span style="color: #007700">[,&#160;</span><span style="color: #0000BB">value_parameter</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">value_parameter&#160;</span><span style="color: #007700">...&#160;]&#160;);&#160;</span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
</p>
<dl><dt> query&#160;</dt>
<dd> (string) The SQL query you wish to execute, with <code>%s</code> and <code>%d</code> placeholders.  Any other <code>%</code> characters may cause parsing errors unless they are escaped.  All <code>%</code> characters inside SQL string literals, including LIKE wildcards, must be double-% escaped as <code>%%</code>. </dd>
<dt> value_parameter&#160;</dt>
<dd> (int|string|array) The value to substitute into the placeholder. Many values may be passed by simply passing more arguments in a <a rel="nofollow" class="external text" href="http://php.net/sprintf">sprintf()</a>-like fashion. Alternatively the second argument can be an array containing the values as in PHP's <a rel="nofollow" class="external text" href="http://php.net/vsprintf">vsprintf()</a> function. Care must be taken not to allow direct user input to this parameter, which would enable array manipulation of any query with multiple placeholders. Values must not already be SQL-escaped.</dd></dl>
<h3><span class="mw-headline" id="Examples">Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=20" title="Edit section: Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Add Meta key =&gt; value pair "Harriet's Adages" =&gt; "WordPress' database interface is like Sunday Morning: Easy." to Post 10.
</p>
<pre>
$metakey = "Harriet's Adages";
$metavalue = "WordPress' database interface is like Sunday Morning: Easy.";

$wpdb-&gt;query( $wpdb-&gt;prepare( "
	INSERT INTO $wpdb-&gt;postmeta
	( post_id, meta_key, meta_value )
	VALUES (&#160;%d,&#160;%s,&#160;%s )", 
        10, $metakey, $metavalue ) );
</pre>
<p><i>Performed in WordPress by <code><a href="https://codex.wordpress.org/Function_Reference/add_meta" title="Function Reference/add meta">add_meta()</a></code>.</i>
</p><p>The same query using <a rel="nofollow" class="external text" href="http://php.net/vsprintf">vsprintf()</a>-like syntax.
</p>
<pre>
$metakey = "Harriet's Adages";
$metavalue = "WordPress' database interface is like Sunday Morning: Easy.";

$wpdb-&gt;query( $wpdb-&gt;prepare( "
	INSERT INTO $wpdb-&gt;postmeta
	( post_id, meta_key, meta_value )
	VALUES (&#160;%d,&#160;%s,&#160;%s )", 
        array(10, $metakey, $metavalue) ) );
</pre>
<p><i>Note that in this example we pack the values together in an array. This can be useful when we don't know the number of arguments we need to pass until runtime.</i>
</p><p>Notice that you do not have to worry about quoting strings. Instead of passing the variables directly into the SQL query, use a <code>%s</code> placeholder for strings and a <code>%d</code> placedolder for integers. You can pass as many values as you like, each as a new parameter in the <code>prepare()</code> method.
</p>
<h2><span class="mw-headline" id="Show_and_Hide_SQL_Errors">Show and Hide SQL Errors</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=21" title="Edit section: Show and Hide SQL Errors">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>You can turn error echoing on and off with the <code>show_errors</code> and <code>hide_errors</code>, respectively.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">show_errors</span><span style="color: #007700">();&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;<br />&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hide_errors</span><span style="color: #007700">();&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p><p>You can also print the error (if any) generated by the most recent query with <code>print_error</code>.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">print_error</span><span style="color: #007700">();&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<h2><span class="mw-headline" id="Getting_Column_Information">Getting Column Information</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=22" title="Edit section: Getting Column Information">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>You can retrieve information about the columns of the most recent query result with <code>get_col_info</code>.  This can be useful when a function has returned an OBJECT whose properties you don't know.  The function will output the desired information from the specified column, or an array with information on <i>all</i> columns from the query result if no column is specified.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_col_info</span><span style="color: #007700">(</span><span style="color: #DD0000">'type'</span><span style="color: #007700">,&#160;</span><span style="color: #0000BB">offset</span><span style="color: #007700">);&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p>
<dl><dt> type&#160;</dt>
<dd> (string) What information you wish to retrieve.  May take on any of the following values (list taken from the <a rel="nofollow" class="external text" href="http://justinvincent.com/home/docs/ezsql/ez_sql_help.htm">ezSQL docs</a>).  Defaults to <b>name</b>.
<ul><li>name - column name.  Default.</li>
<li>table - name of the table the column belongs to</li>
<li>max_length - maximum length of the column</li>
<li>not_null - 1 if the column cannot be NULL</li>
<li>primary_key - 1 if the column is a primary key</li>
<li>unique_key - 1 if the column is a unique key</li>
<li>multiple_key - 1 if the column is a non-unique key</li>
<li>numeric - 1 if the column is numeric</li>
<li>blob - 1 if the column is a BLOB</li>
<li>type - the type of the column</li>
<li>unsigned - 1 if the column is unsigned</li>
<li>zerofill - 1 if the column is zero-filled</li></ul></dd></dl>
<dl><dt> offset&#160;</dt>
<dd> (integer) Specify the column from which to retrieve information (with <b>0</b> being the first column).  Defaults to <b>-1</b>.
<ul><li>-1 - Retrieve information from all columns.  Output as array.  Default.</li>
<li>Non-negative integer - Retrieve information from specified column (<b>0</b> being the first).</li></ul></dd></dl>
<h2><span class="mw-headline" id="Clearing_the_Cache">Clearing the Cache</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=23" title="Edit section: Clearing the Cache">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>You can clear the SQL result cache with <code>flush</code>.
</p><p><code><span style="color: #000000">
&#160;<span style="color: #0000BB">&lt;?php&#160;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">flush</span><span style="color: #007700">();&#160;</span><span style="color: #0000BB">?&gt;</span>&#160;</span>
</code>
</p><p>This clears <code>$wpdb-&gt;last_result</code>, <code>$wpdb-&gt;last_query</code>, and <code>$wpdb-&gt;col_info</code>.
</p>
<h2><span class="mw-headline" id="Class_Variables">Class Variables</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=24" title="Edit section: Class Variables">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<dl><dt> $show_errors&#160;</dt>
<dd> Whether or not <a href="#Showing_and_Hiding_SQL_Errors">Error echoing</a> is turned on.  Defaults to TRUE.</dd></dl>
<dl><dt> $num_queries&#160;</dt>
<dd> The number of queries that have been executed.</dd></dl>
<dl><dt> $last_query&#160;</dt>
<dd> The most recent query to have been executed.</dd></dl>
<dl><dt> $queries&#160;</dt>
<dd> You may save all of the queries run on the database and their stop times by setting the SAVEQUERIES constant to TRUE (this constant defaults to FALSE).  If SAVEQUERIES is TRUE, your queries will be stored in this variable as an array.</dd></dl>
<dl><dt> $last_result&#160;</dt>
<dd> The most recent query results.</dd></dl>
<dl><dt> $col_info&#160;</dt>
<dd> The column information for the most recent query results.  See <a href="#Getting_Column_Information">Getting Column Information</a>.</dd></dl>
<dl><dt> $insert_id&#160;</dt>
<dd> ID generated for an AUTO_INCREMENT column by the most recent INSERT query.</dd></dl>
<dl><dt> $num_rows&#160;</dt>
<dd> The number of rows returned by the last query.</dd></dl>
<dl><dt> $prefix&#160;</dt>
<dd> The assigned WordPress table prefix for the site.</dd></dl>
<h3><span class="mw-headline" id="Multi-Site_Variables">Multi-Site Variables</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=25" title="Edit section: Multi-Site Variables">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>If you are using Multi-Site, you also have access to the following:
</p>
<dl><dt> $blogid&#160;</dt>
<dd>  The id of the current site (blog).</dd></dl>
<h2><span class="mw-headline" id="Tables">Tables</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=26" title="Edit section: Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The WordPress database tables are easily referenced in the <code>wpdb</code> class.
</p>
<dl><dt> $posts&#160;</dt>
<dd> The table of <a href="https://codex.wordpress.org/Database_Description#Table:_wp_posts" title="Database Description">Posts</a>.</dd></dl>
<dl><dt> $postmeta&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_postmeta" title="Database Description">Meta Content</a> (a.k.a. <a href="https://codex.wordpress.org/Custom_Fields" title="Custom Fields">Custom Fields</a>) table.</dd></dl>
<dl><dt> $comments&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_comments" title="Database Description">Comments</a> table.</dd></dl>
<dl><dt> $commentmeta&#160;</dt>
<dd> The table contains additional comment information.</dd></dl>
<dl><dt> $terms&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_terms" title="Database Description">terms</a> table contains the 'description' of Categories, Link Categories, Tags.</dd></dl>
<dl><dt> $term_taxonomy&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_term_taxonomy" title="Database Description">term_taxonomy</a> table describes the various taxonomies (classes of terms).  Categories, Link Categories, and Tags are taxonomies.</dd></dl>
<dl><dt> $term_relationships&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_term_relationships" title="Database Description">term relationships</a> table contains link between the term and the object that uses that term, meaning this file point to each Category used for each Post.</dd></dl>
<dl><dt> $users&#160;</dt>
<dd> The table of <a href="https://codex.wordpress.org/Database_Description#Table:_wp_users" title="Database Description">Users</a>.</dd></dl>
<dl><dt> $usermeta&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_usermeta" title="Database Description">usermeta</a> table contains additional user information, such as nicknames, descriptions and permissions.</dd></dl>
<dl><dt> $links&#160;</dt>
<dd> The table of <a href="https://codex.wordpress.org/Database_Description#Table:_wp_links" title="Database Description">Links</a>.</dd></dl>
<dl><dt> $options&#160;</dt>
<dd> The <a href="https://codex.wordpress.org/Database_Description#Table:_wp_options" title="Database Description">Options</a> table.</dd></dl>
<h2><span class="mw-headline" id="Related">Related</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-tw:Class_Reference/wpdb&amp;action=edit&amp;section=27" title="Edit section: Related">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div style="background-color:#DFDFDF; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">See also index of <a href="https://codex.wordpress.org/Class_Reference" title="Class Reference">Class Reference</a> and index of <a href="https://codex.wordpress.org/Function_Reference" title="Function Reference">Function Reference</a>.</div>

<!-- 
NewPP limit report
Cached time: 20190429054907
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.052 seconds
Real time usage: 0.056 seconds
Preprocessor visited node count: 457/1000000
Preprocessor generated node count: 1153/1000000
Post‐expand include size: 1477/2097152 bytes
Template argument size: 591/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   12.671      1 - -total
 72.02%    9.126      1 - Template:Languages
 17.83%    2.259      1 - Template:Class_Footer
 13.54%    1.716      1 - Template:zh-tw
  9.88%    1.252      1 - Template:ru
  9.71%    1.231      1 - Template:zh-cn
  8.93%    1.131      1 - Template:Message
  8.43%    1.068      1 - Template:ja
  8.16%    1.034      1 - Template:it
  8.14%    1.031      1 - Template:en
-->
