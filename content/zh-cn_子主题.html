<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<a href="https://codex.wordpress.org/Child_Themes" title="Child Themes">English</a> • 
<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/Child">Themes 日本語</a> 
<a href="https://codex.wordpress.org/fr:Th%C3%A8mes_Enfant" title="fr:Thèmes Enfant">Français</a> • 

<strong class="selflink">中文(简体)</strong> •  
 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<p>WordPress子主题也是一个主题，它继承了另一个主题——父主题——的功能，并允许你对父主题的功能进行修改，或者添加新功能。本文将说明如何创建一个基本的子主题并解释您能用它来干什么。本文将使用 <a href="https://codex.wordpress.org/Version_3.0" title="Version 3.0">WordPress 3.0</a> 的默认主题 Twenty Ten 作为父主题进行举例说明。
</p><p>创建一个子主题是很简单的。创建一个目录，将格式编写正确的 <i>style.css</i> 文件放进去，一个子主题就做成了！只需要对 HTML 和 <a href="https://codex.wordpress.org/CSS" title="CSS">CSS</a> 具有基本的了解，您就可以通过创建一个<i>非常基本的子主题</i> 来对一个父主题的样式和布局进行修改和扩展，而不需要对父主题的文件作任何修改。通过这样的方式，当父主题被更新的时候，您所做的修改就可以保存下来。
</p><p><b>因为这个原因，我们强烈推荐您使用子主题的方式来对主题进行修改。</b>  
</p><p>如果您对 PHP， <a href="https://codex.wordpress.org/Templates" title="Templates">WordPress Templates</a>，和 <a href="https://codex.wordpress.org/Plugin_API" title="Plugin API">WordPress Plugin API</a>有个基本的理解，理论上来讲，您可以使用子主题对父主题的每一个方面进行扩展，而不需要对父主题的文件进行任何修改。
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.E7.9B.AE.E5.BD.95.E7.BB.93.E6.9E.84"><span class="tocnumber">1</span> <span class="toctext">目录结构</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.E5.BF.85.E9.9C.80.E7.9A.84style.css.E6.96.87.E4.BB.B6"><span class="tocnumber">2</span> <span class="toctext">必需的style.css文件</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.E4.B8.80.E4.B8.AA.E5.AD.90.E4.B8.BB.E9.A2.98.E7.9A.84.E8.8C.83.E4.BE.8B"><span class="tocnumber">3</span> <span class="toctext">一个子主题的范例</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#.E6.B3.A8.E6.84.8F_.40import_.E8.A7.84.E5.88.99"><span class="tocnumber">3.1</span> <span class="toctext">注意 @import 规则</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#.E4.BD.BF.E7.94.A8_functions.php"><span class="tocnumber">4</span> <span class="toctext">使用 functions.php</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#.E6.A8.A1.E6.9D.BF.E6.96.87.E4.BB.B6"><span class="tocnumber">5</span> <span class="toctext">模板文件</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#.E5.85.B6.E4.BB.96.E6.96.87.E4.BB.B6"><span class="tocnumber">6</span> <span class="toctext">其他文件</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Resources"><span class="tocnumber">7</span> <span class="toctext">Resources</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id=".E7.9B.AE.E5.BD.95.E7.BB.93.E6.9E.84">目录结构</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E5%AD%90%E4%B8%BB%E9%A2%98&amp;action=edit&amp;section=1" title="Edit section: 目录结构">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>子主题放在<i>wp-content/themes</i>目录下属于自己的目录里。下面的结构显示的就是子主题和它的父主题（Twenty Ten）在典型的WordPress目录结构中的位置：
</p>
<ul><li>   <b>public_html</b>
<ul><li>      <b>wp-content</b> 
<ul><li>         <b>themes</b> (主题存放的目录)
<ul><li>            <b>twentyten</b> (示例中父主题Twenty Ten的目录)</li>
<li>            <b>twentyten-child</b> (子主题存放的目录，可以任意命名)
<ul><li>               <b>style.css</b> (子主题中不可或缺的文件，文件名必需为 style.css)</li></ul></li></ul></li></ul></li></ul></li></ul>
<p>这个文件夹里面可以少至只包含一个<i>style.css</i>文件，也可以包含多至一个完整WordPress主题所拥有的文件：
</p>
<ol><li>   style.css (必需)</li>
<li>   functions.php (可选)</li>
<li>   Template files (可选)</li>
<li>   Other files (可选)</li></ol>
<p>让我们看看它们是如何起作用的。
</p>
<h2><span class="mw-headline" id=".E5.BF.85.E9.9C.80.E7.9A.84style.css.E6.96.87.E4.BB.B6">必需的style.css文件</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E5%AD%90%E4%B8%BB%E9%A2%98&amp;action=edit&amp;section=2" title="Edit section: 必需的style.css文件">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><i>style.css</i>是一个子主题唯一<b>必须的</b>文件。它的头部提供的信息让WordPress辨认出子主题，并且<b>重写父主题中的style.css文件</b>。
</p><p>对于任何WordPress主题，头部信息必须位于文件的顶端，唯一的区别就是子主题中的<code>Template:</code>行是必须的，因为它让WordPress知道子主题的父主题是什么。
</p><p>下面是一个<i>style.css</i>文件的头部信息的示例：
</p>
<pre>
/*
Theme Name:     Twenty Ten Child
Theme URI:      http: //example.com/
Description:    Child theme for the Twenty Ten theme 
Author:         Your name here
Author URI:     http: //example.com/about/
Template:       twentyten
Version:        0.1.0
*/
</pre>
<p>逐行的简单解释：
</p><p><br />
</p>
<ul><li>   <code>Theme Name</code>.   (<b>必需</b>)   子主题的<b>名称</b>。</li>
<li>   <code>Theme URI</code>.    (可选)          子主题的主页。</li>
<li>   <code>Description</code>.  (可选)          子主题的描述。比如：我的第一个子主题，真棒！</li>
<li>   <code>Author URI</code>.   (可选)          作者主页。</li>
<li>   <code>Author</code>.       (optional)       作者的名字。</li>
<li>   <code>Template</code>.     (<b>必需</b>)      父主题的目录名，区别大小写。 <b>注意：</b> 当你更改子主题名字时，要先换成别的主题。</li>
<li>   <code>Version</code>.      (可选)         子主题的版本。比如：0.1，1.0，等。</li></ul>
<p><code>*/  </code>这个关闭标记的后面部分，就会按照一个常规的样式表文件一样生效，你可以把你想对WordPress应用的样式规则都写在它的后面。
</p><p>要注意的是，子主题的样式表会替换父主题的样式表而生效。（事实上WordPress根本就不会载入父主题的样式表。）所以，如果你想简单地改变父主题中的一些样式和结构——而不是从头开始制作新主题——你必须明确的导入父主题的样式表，然后对它进行修改。下面的例子告诉你如何使用<code>@import</code>规则完成这个。
</p>
<h2><span class="mw-headline" id=".E4.B8.80.E4.B8.AA.E5.AD.90.E4.B8.BB.E9.A2.98.E7.9A.84.E8.8C.83.E4.BE.8B">一个子主题的范例</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E5%AD%90%E4%B8%BB%E9%A2%98&amp;action=edit&amp;section=3" title="Edit section: 一个子主题的范例">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>这个例子中的父主题是Twenty Ten，我们喜欢这个主题的几乎每个部分，除了网站标题的颜色，因为我想把它从黑色的改成绿色的。使用子主题的话，只用完成以下三个简单的步骤：
</p>
<ol><li>   在<i>wp-content/themes</i>目录下创建一个新目录，并将它命名为twentyten-child（或其他你喜欢的名称）。</li>
<li>   将下面的代码保存在名为<i>style.css</i>的文件里，并将它放到新建的这个文件夹。</li>
<li>   到WordPress的控制台&gt;主题，然后激活你的新主题：Twenty Ten Child。</li></ol>
<pre>
/*
Theme Name: Twenty Ten Child
Description: Child theme for the Twenty Ten theme 
Author: Your name here
Template: twentyten
*/

@import url("../twentyten/style.css");

#site-title a {
    color: #009900;
}
</pre>
<p>下面一步步解释上面代码的作用：
</p>
<ol><li>   <code>/*</code> 开启子主题的头部信息。</li>
<li>   <code>Theme Name:</code> 子主题名称的声明。</li>
<li>   <code>Description:</code> 主题的描述（可选，也可被省略）。</li>
<li>   <code>Author:</code> 作者名字的声明（可选，也可被省略）。</li>
<li>   <code>Template:</code> 声明子主题的父主题，换言之，父主题所在的文件夹的名称，区分大小写。</li>
<li>   <code>*/</code>子主题头部信息的关闭标记。</li>
<li>   用 <code>@import</code>规则将父主题的样式表调入</li>
<li>    <code>#site-title a</code> 定义网站标题的颜色（绿色），覆盖父主题中相同的样式规则。</li></ol>
<h3><span class="mw-headline" id=".E6.B3.A8.E6.84.8F_.40import_.E8.A7.84.E5.88.99">注意 <code>@import</code> 规则</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E5%AD%90%E4%B8%BB%E9%A2%98&amp;action=edit&amp;section=4" title="Edit section: 注意 @import 规则">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>需要注意的是，<code>@import</code>  规则之前没有其他的CSS样式规则，如果你将其他的规则置于它之上，那么它将无效，并且父主题的样式表不会被导入。
</p>
<h2><span class="mw-headline" id=".E4.BD.BF.E7.94.A8_functions.php">使用 functions.php</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E5%AD%90%E4%B8%BB%E9%A2%98&amp;action=edit&amp;section=5" title="Edit section: 使用 functions.php">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>不像<i>style.css</i>，子主题中的<i>functions.php</i>不会覆盖父主题中对应功能，而是将新的功能加入到父主题的<i>functions.php</i>中。（其实它会在<b>父主题文件加载之前先载入</b>。）
</p><p>这样，子主题的<i>functions.php</i>提供了一个灵活稳定的方式来修改父主题的功能。如果你想在你的主题里加入一些PHP函数，最快的方式可能是打开<i>functions.php</i>文件然后加入进去。但那样并不灵活：下次你的主题升级更新了，你加入的新功能就会丢失掉。相反地，如果你使用子主题，将<i>functions.php</i>文件放进去，再将你想加入的功能写进这个文件里，那么这个功能同样会工作得很好，并且对于父主题以后的升级更新，子主题中加入的功能也不会受到影响。
</p><p><i>functions.php</i>文件的结构非常简单：将PHP起始标签置于顶部，关闭标签置于底部，它们之间就写上你自己的PHP函数。你可以写得很多，也可以写得很少，反正按你所需。下面的示例是一个基本的<i>functions.php</i>文件的写法，作用是将favicon链接加入到HTML页面的head元素里面。
</p>
<pre>
&lt;?php

function favicon_link() {
    echo '&lt;link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" /&gt;' . "\n";
}
add_action('wp_head', 'favicon_link');

?&gt;
</pre>
<p>给主题作者的提示。事实上子主题的<i>functions.php</i>首先加载意味着你的主题的用户功能可插入——即子主题是可替换的——通过有条件地进行声明。例如：
</p>
<pre>
if (!function_exists('theme_special_nav')) {
    function theme_special_nav() {
        //  Do something.
    }
}
</pre>
<p>注意，替换的过程是在父级主题中，使用php的function_exits进行判断。
用这种方式，子主题可以替换父主题中的一个PHP函数，只需要简单地对它再次声明。
</p>
<h2><span class="mw-headline" id=".E6.A8.A1.E6.9D.BF.E6.96.87.E4.BB.B6">模板文件</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E5%AD%90%E4%B8%BB%E9%A2%98&amp;action=edit&amp;section=6" title="Edit section: 模板文件">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><a href="https://codex.wordpress.org/Templates" title="Templates">模板文件</a> 在子主题中的表现和<i>style.css</i>一样，它们会<b>覆盖</b>父主题中的相同文件。子主题可以覆盖<b>任何</b>父主题模板中的文件，只需要创建同名文件就行。（注意：<i>index.php</i>在WordPress3.0及以上版本才能被覆盖。）
</p><p>同样，这项WordPress的功能允许你修改父主题的样式功能而不用去编辑父主题的文件，并且你的修改能让你在更新父主题后继续保留。
</p><p>下面是一些使用模板文件的子主题的例子：
</p>
<ul><li>  增加一个父主题没有提供的模板（例如：网站地图页面的模板，或者一单栏页面，它们在页面编辑，模板选择里是可用的）</li></ul>
<ul><li>  增加一个比父模板更加具体的模板（见<a href="https://codex.wordpress.org/Template_Hierarchy" title="Template Hierarchy">模板级别</a>）。（例如：新加的<i>tag.php</i>模板用于按tag归档的文章来代替父主题中通常的<i>archive.php</i>模板。）</li></ul>
<ul><li>  替换父主题中的一个模板.（例：使用你自己的<i>home.php</i>来覆盖父主题中的<i>home.php</i>）</li></ul>
<h2><span class="mw-headline" id=".E5.85.B6.E4.BB.96.E6.96.87.E4.BB.B6">其他文件</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E5%AD%90%E4%B8%BB%E9%A2%98&amp;action=edit&amp;section=7" title="Edit section: 其他文件">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>除了style.css，functions.php，index.php和home.php，子主题可以使用任何正式主题使用的类型的文件，只要文件被正确链接。打个比方，你可以使用在样式表里或者Javascript文件里链接的图标、图片，或者从functions.php文件中调用出来的额外PHP文件。
</p>
<h2><span class="mw-headline" id="Resources">Resources</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=zh-cn:%E5%AD%90%E4%B8%BB%E9%A2%98&amp;action=edit&amp;section=8" title="Edit section: Resources">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> <a href="https://codex.wordpress.org/Theme_Development" title="Theme Development">Theme Development</a></li>
<li> <a rel="nofollow" class="external text" href="http://themeshaper.com/modify-wordpress-themes/">How to Modify WordPress Themes the Smart Way</a> - four-part series on child themes  </li>
<li> <a rel="nofollow" class="external text" href="http://op111.net/53">How to make a child theme for WordPress: A pictorial introduction for beginners</a> -  illustrated introduction to child themes</li>
<li> <a rel="nofollow" class="external text" href="http://aaron.jorb.in/blog/2010/04/05/introducing-thirty-ten/">Introducing Thirty Ten</a> - guide to creating a Twenty Ten Child Theme</li></ul>

<!-- 
NewPP limit report
Cached time: 20190429054859
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.016 seconds
Real time usage: 0.129 seconds
Preprocessor visited node count: 98/1000000
Preprocessor generated node count: 361/1000000
Post‐expand include size: 612/2097152 bytes
Template argument size: 206/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   47.009      1 - Template:Languages
100.00%   47.009      1 - -total
 17.27%    8.119      1 - Template:ja
 14.43%    6.781      1 - Template:en
 11.95%    5.618      1 - Template:zh-hans
  6.89%    3.238      1 - Template:fr
-->
