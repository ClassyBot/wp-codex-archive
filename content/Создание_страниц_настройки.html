<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<a href="https://codex.wordpress.org/Creating_Options_Pages" title="Creating Options Pages">English</a> • 
<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/Creating">Options Pages 日本語</a> 
<strong class="selflink">Русский</strong> • 

 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5"><span class="tocnumber">1</span> <span class="toctext">Введение</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.D0.9E.D1.82.D0.BA.D1.80.D1.8B.D1.82.D0.B8.D0.B5_.D1.81.D1.82.D1.80.D0.B0.D0.BD.D0.B8.D1.86.D1.8B"><span class="tocnumber">2</span> <span class="toctext">Открытие страницы</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.D0.A2.D0.B5.D0.B3_.D1.84.D0.BE.D1.80.D0.BC.D1.8B"><span class="tocnumber">3</span> <span class="toctext">Тег формы</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#.D0.9C.D0.B0.D0.B3.D0.B8.D1.8F_nonce"><span class="tocnumber">4</span> <span class="toctext">Магия nonce</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#.D0.A4.D0.BE.D1.80.D0.BC.D0.B0_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D1.8B"><span class="tocnumber">5</span> <span class="toctext">Форма таблицы</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#.D0.9F.D0.BE.D0.BB.D0.B5_action"><span class="tocnumber">6</span> <span class="toctext">Поле action</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#.D0.9F.D0.BE.D0.BB.D0.B5_page_options"><span class="tocnumber">7</span> <span class="toctext">Поле page_options</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#.D0.97.D0.B0.D0.BA.D1.80.D1.8B.D0.B2.D0.B0.D0.B5.D0.BC_.D1.82.D0.B5.D0.B3.D0.B8"><span class="tocnumber">8</span> <span class="toctext">Закрываем теги</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#.D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D0.BC_.D0.B2.D1.81.D1.91_.D0.B2.D0.BC.D0.B5.D1.81.D1.82.D0.B5"><span class="tocnumber">9</span> <span class="toctext">Смотрим всё вместе</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Wordpress_2.7_.D0.B8_.D0.BD.D0.BE.D0.B2.D0.B5.D0.B5"><span class="tocnumber">10</span> <span class="toctext">Wordpress 2.7 и новее</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#settings_fields_Function"><span class="tocnumber">10.1</span> <span class="toctext">settings_fields Function</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Register_Settings"><span class="tocnumber">10.2</span> <span class="toctext">Register Settings</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#See_It_All_Together"><span class="tocnumber">10.3</span> <span class="toctext">See It All Together</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#Pitfalls"><span class="tocnumber">10.3.1</span> <span class="toctext">Pitfalls</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id=".D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5">Введение</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8&amp;action=edit&amp;section=1" title="Edit section: Введение">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Создавать собственные панели настроек в WordPress относительно легко.
</p><p>Для начала, чтобы создать элемент меню и новую страницу, посмотрите статью <a href="https://codex.wordpress.org/%D0%94%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B0%D0%B4%D0%BC%D0%B8%D0%BD%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%82%D0%B8%D0%B2%D0%BD%D1%8B%D1%85_%D0%BC%D0%B5%D0%BD%D1%8E" title="Добавление административных меню">«Добавление административных меню»</a>.
</p><p>Если придерживаться этой структуры, WordPress сам позаботится о создании настроек, обновлении, сохранении и перенаправлении. Он также проверит права доступа и сделает остальную закулисную магию.
</p><p>Несколько новых функций были добавлены в WordPress 2.7. Эти новые функции необязательны в WordPress 2.7, но будут требоваться в будущем. Они необходимы для WordPress MU 2.7. См. <a href="https://codex.wordpress.org/Migrating_Plugins_and_Themes_to_2.7" title="Migrating Plugins and Themes to 2.7">Migrating Plugins and Themes to 2.7</a> и <a href="https://codex.wordpress.org/Settings_API" title="Settings API">Settings API</a> для получения более детальной информации.
</p>
<h2><span class="mw-headline" id=".D0.9E.D1.82.D0.BA.D1.80.D1.8B.D1.82.D0.B8.D0.B5_.D1.81.D1.82.D1.80.D0.B0.D0.BD.D0.B8.D1.86.D1.8B">Открытие страницы</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8&amp;action=edit&amp;section=2" title="Edit section: Открытие страницы">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Вы можете поместить код страницы параметров в ваш php-файл плагина или создать второй файл с именем например options.php, и включить его с помощью функции php include - <a rel="nofollow" class="external free" href="http://www.w3schools.com/PHP/php_includes.asp">http://www.w3schools.com/PHP/php_includes.asp</a>
</p><p>Если вы хотите совместить внешний вид существующих страниц параметров WordPress, откройте следующее:
</p>
<pre>&lt;div class="wrap"&gt;
&lt;h2&gt;Your Plugin Page Title&lt;/h2&gt;
</pre>
<h2><span class="mw-headline" id=".D0.A2.D0.B5.D0.B3_.D1.84.D0.BE.D1.80.D0.BC.D1.8B">Тег формы</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8&amp;action=edit&amp;section=3" title="Edit section: Тег формы">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Когда у вас появилась страница, нужно создать HTML-форму. Используйте этот код:
</p>
<pre>&lt;form method="post" action="options.php"&gt;
</pre>
<h2><span class="mw-headline" id=".D0.9C.D0.B0.D0.B3.D0.B8.D1.8F_nonce">Магия nonce</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8&amp;action=edit&amp;section=4" title="Edit section: Магия nonce">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>После открытия тега формы вставьте следующий PHP-код:
</p>
<pre>&lt;?php wp_nonce_field('update-options');&#160;?&gt;
</pre>
<p>Он добавит два скрытых поля, позволяющих автоматически проверять, что пользователь может обновлять настройки, и перенаправлять его обратно на нужную страницу (поскольку форма отсылает результат на другую страницу).
</p><p>(Это <b>не требуется</b> если используется <b>версия 2.7</b>, функция <a href="https://codex.wordpress.org/Function_Reference/settings_fields" title="Function Reference/settings fields">settings_fields</a>.)
</p>
<h2><span class="mw-headline" id=".D0.A4.D0.BE.D1.80.D0.BC.D0.B0_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D1.8B">Форма таблицы</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8&amp;action=edit&amp;section=5" title="Edit section: Форма таблицы">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Большинство страниц параметров используют таблицу с классом «form-table» для отображения их параметров. Чтобы сопоставить внешний вид этих страниц, создайте новую таблицу:
</p>
<pre>&lt;table class="form-table"&gt;
</pre>
<p>Используйте поля с теми же названиями, какие вы хотите дать создаваемым настройкам (которые будут храниться в таблице options), например:
</p>
<pre>&lt;tr valign="top"&gt;
&lt;th scope="row"&gt;New Option Name&lt;/th&gt;
&lt;td&gt;&lt;input type="text" name="new_option_name" value="&lt;?php echo get_option('new_option_name');&#160;?&gt;" /&gt;&lt;/td&gt;
&lt;/tr&gt;
</pre>
<p>Внимательнее посмотрите на элемент &lt;input&gt;:
</p>
<pre>&lt;input type="text" name="new_option_name" value="&lt;?php echo get_option('new_option_name');&#160;?&gt;" /&gt;
</pre>
<p>Обратите внимание, что благодаря использованию функции get_option() в качестве значения поля, оно автоматически обновится, когда настройки будут сохранены.
</p><p>После того как вы добавили все поля для параметров, закройте таблицу:
</p>
<pre>&lt;/table&gt;
</pre>
<h2><span class="mw-headline" id=".D0.9F.D0.BE.D0.BB.D0.B5_action">Поле action</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8&amp;action=edit&amp;section=6" title="Edit section: Поле action">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Теперь создайте скрытое поле под названием «action» со значением «update».
</p>
<pre>&lt;input type="hidden" name="action" value="update" /&gt;
</pre>
<p>(Это <b>не требуется</b> если используется <b>версия 2.7</b>, функция <a href="https://codex.wordpress.org/Function_Reference/settings_fields" title="Function Reference/settings fields">settings_fields</a> is used.)
</p>
<h2><span class="mw-headline" id=".D0.9F.D0.BE.D0.BB.D0.B5_page_options">Поле page_options</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8&amp;action=edit&amp;section=7" title="Edit section: Поле page options">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>В заключение, создайте скрытое поле под названием «page_options», содержащее разделённый запятыми список всех настроек, которые нужно записать при сохранении.
</p>
<pre>&lt;input type="hidden" name="page_options" value="new_option_name,some_other_option,option_etc" /&gt;
</pre>
<p>(Это <b>не требуется</b> если используется <b>версия 2.7</b>, и функции <a href="https://codex.wordpress.org/Function_Reference/settings_fields" title="Function Reference/settings fields">settings_fields</a> и <a href="https://codex.wordpress.org/Function_Reference/register_setting" title="Function Reference/register setting">register_setting</a>.)
</p>
<h2><span class="mw-headline" id=".D0.97.D0.B0.D0.BA.D1.80.D1.8B.D0.B2.D0.B0.D0.B5.D0.BC_.D1.82.D0.B5.D0.B3.D0.B8">Закрываем теги</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8&amp;action=edit&amp;section=8" title="Edit section: Закрываем теги">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Затем, очевидно, следует закрыть тег формы. Если хотите, можно добавить ещё одну кнопку «Обновить настройки» — в WordPress так принято.
</p>
<pre>&lt;p class="submit"&gt;
&lt;input type="submit" class="button-primary" value="&lt;?php _e('Save Changes')&#160;?&gt;" /&gt;
&lt;/p&gt;
&lt;/form&gt;
&lt;/div&gt;
</pre>
<p>Обратите внимание на использование функции _e() для перевода текста. Подробности — в статье <a href="https://codex.wordpress.org/Localizing_WordPress" title="Localizing WordPress" class="mw-redirect">«Локализация WordPress»</a>.
</p>
<h2><span class="mw-headline" id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D0.BC_.D0.B2.D1.81.D1.91_.D0.B2.D0.BC.D0.B5.D1.81.D1.82.D0.B5">Смотрим всё вместе</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8&amp;action=edit&amp;section=9" title="Edit section: Смотрим всё вместе">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre>&lt;div class="wrap"&gt;
&lt;h2&gt;Your Plugin Name&lt;/h2&gt;

&lt;form method="post" action="options.php"&gt;
&lt;?php wp_nonce_field('update-options');&#160;?&gt;

&lt;table class="form-table"&gt;

&lt;tr valign="top"&gt;
&lt;th scope="row"&gt;New Option Name&lt;/th&gt;
&lt;td&gt;&lt;input type="text" name="new_option_name" value="&lt;?php echo get_option('new_option_name');&#160;?&gt;" /&gt;&lt;/td&gt;
&lt;/tr&gt;
 
&lt;tr valign="top"&gt;
&lt;th scope="row"&gt;Some Other Option&lt;/th&gt;
&lt;td&gt;&lt;input type="text" name="some_other_option" value="&lt;?php echo get_option('some_other_option');&#160;?&gt;" /&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr valign="top"&gt;
&lt;th scope="row"&gt;Options, Etc.&lt;/th&gt;
&lt;td&gt;&lt;input type="text" name="option_etc" value="&lt;?php echo get_option('option_etc');&#160;?&gt;" /&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;/table&gt;

&lt;input type="hidden" name="action" value="update" /&gt;
&lt;input type="hidden" name="page_options" value="new_option_name,some_other_option,option_etc" /&gt;

&lt;p class="submit"&gt;
&lt;input type="submit" class="button-primary" value="&lt;?php _e('Save Changes')&#160;?&gt;" /&gt;
&lt;/p&gt;

&lt;/form&gt;
&lt;/div&gt;
</pre>
<h2><span class="mw-headline" id="Wordpress_2.7_.D0.B8_.D0.BD.D0.BE.D0.B2.D0.B5.D0.B5">Wordpress 2.7 и новее</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8&amp;action=edit&amp;section=10" title="Edit section: Wordpress 2.7 и новее">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Здесь новые API функции, которые будут использоваться в версии 3.0.
</p><p>Эта функция создаёт страницу настройки. 
</p><p>Add sub menu page to the options main menu. 
This function takes a capability which will be used to determine whether or not a page is included in the menu. The function which is hooked in to handle the output of the page must check that the user has the required capability as well. 
</p>
<dl><dt>page_title</dt>
<dd> The text to be displayed in the title tags of the page when the menu is selected </dd>
<dt>menu_title</dt>
<dd> The text to be used for the menu </dd>
<dt>capability</dt>
<dd> The capability required for this menu to be displayed to the user. </dd>
<dt>menu_slug</dt>
<dd> The slug name to refer to this menu by (should be unique for this menu) </dd>
<dt>function</dt>
<dd> The function to be called to output the content for this page. </dd></dl>
<p><br />
</p>
<h3><span class="mw-headline" id="settings_fields_Function">settings_fields Function</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8&amp;action=edit&amp;section=11" title="Edit section: settings fields Function">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The setting fields will know which settings your options page will handle.
</p><p>Somewhere within the form add this function
</p>
<pre>settings_fields( 'myoption-group' );
</pre>
<p>where <tt>myoption-group</tt> is the same name used in the <a href="https://codex.wordpress.org/Function_Reference/register_setting" title="Function Reference/register setting">register_setting</a> function.
</p><p>This function <b>replaces</b> the <b>nonce magic</b>, <b>action field</b>, and <b>page_options field</b> mentioned above.
</p>
<h3><span class="mw-headline" id="Register_Settings">Register Settings</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8&amp;action=edit&amp;section=12" title="Edit section: Register Settings">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The <a href="https://codex.wordpress.org/Function_Reference/register_setting" title="Function Reference/register setting">register_setting</a> and <a href="https://codex.wordpress.org/Function_Reference/unregister_setting" title="Function Reference/unregister setting">unregister_setting</a> functions add and remove options from a whitelist of allowed options that the form is able to save. They can also name a sanitize callback function as a security measure to check each option's value.
</p><p>The register_setting function should be called in an <a href="https://codex.wordpress.org/Plugin_API/Action_Reference#Administrative_Actions" title="Plugin API/Action Reference">admin_init</a> action, which runs before every admin page and in particular, <tt>options.php</tt>, which receives this form.
</p><p>Your plugin probably has a section with an add_action that adds a new menu item to the administration menus. This line will be in the same section to add an action to admin_init.
</p>
<pre>
if ( is_admin() ){ // admin actions
  add_action( 'admin_menu', 'add_mymenu' );
  add_action( 'admin_init', 'register_mysettings' );
} else {
  // non-admin enqueues, actions, and filters
}
</pre>
<p>Then you create a new function that registers each option.
</p>
<pre>
function register_mysettings() { // whitelist options
  register_setting( 'myoption-group', 'new_option_name' );
  register_setting( 'myoption-group', 'some_other_option' );
  register_setting( 'myoption-group', 'option_etc' );
}
</pre>
<p>The name of <tt>myoption-group</tt> doesn't matter but it has to match the name used in the settings_fields function above.
</p><p><br />
</p>
<h3><span class="mw-headline" id="See_It_All_Together">See It All Together</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8&amp;action=edit&amp;section=13" title="Edit section: See It All Together">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The below example uses the new Settings API to create and save your plugin options
</p>
<pre>
&lt;?php
// create custom plugin settings menu
add_action('admin_menu', 'baw_create_menu');

function baw_create_menu() {

	//create new top-level menu
	add_menu_page('BAW Plugin Settings', 'BAW Settings', 'administrator', __FILE__, 'baw_settings_page',plugins_url('/images/icon.png', __FILE__));

	//call register settings function
	add_action( 'admin_init', 'register_mysettings' );
}


function register_mysettings() {
	//register our settings
	register_setting( 'baw-settings-group', 'new_option_name' );
	register_setting( 'baw-settings-group', 'some_other_option' );
	register_setting( 'baw-settings-group', 'option_etc' );
}

function baw_settings_page() {
?&gt;
&lt;div class="wrap"&gt;
&lt;h2&gt;Your Plugin Name&lt;/h2&gt;

&lt;form method="post" action="options.php"&gt;
    &lt;?php settings_fields( 'baw-settings-group' );&#160;?&gt;
    &lt;table class="form-table"&gt;
        &lt;tr valign="top"&gt;
        &lt;th scope="row"&gt;New Option Name&lt;/th&gt;
        &lt;td&gt;&lt;input type="text" name="new_option_name" value="&lt;?php echo get_option('new_option_name');&#160;?&gt;" /&gt;&lt;/td&gt;
        &lt;/tr&gt;
         
        &lt;tr valign="top"&gt;
        &lt;th scope="row"&gt;Some Other Option&lt;/th&gt;
        &lt;td&gt;&lt;input type="text" name="some_other_option" value="&lt;?php echo get_option('some_other_option');&#160;?&gt;" /&gt;&lt;/td&gt;
        &lt;/tr&gt;
        
        &lt;tr valign="top"&gt;
        &lt;th scope="row"&gt;Options, Etc.&lt;/th&gt;
        &lt;td&gt;&lt;input type="text" name="option_etc" value="&lt;?php echo get_option('option_etc');&#160;?&gt;" /&gt;&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
    
    &lt;p class="submit"&gt;
    &lt;input type="submit" class="button-primary" value="&lt;?php _e('Save Changes')&#160;?&gt;" /&gt;
    &lt;/p&gt;

&lt;/form&gt;
&lt;/div&gt;
&lt;?php }&#160;?&gt;
</pre>
<h4><span class="mw-headline" id="Pitfalls">Pitfalls</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8&amp;action=edit&amp;section=14" title="Edit section: Pitfalls">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The <b>Settings</b> name, the second parameter in the <i>register_setting()</i> function, MUST match the name of the option being updated in the database!
<br />
For example, say you have <b>add_option( 'foo_bar', 'isfoo' )</b>, you MUST use <b>foo_bar</b> as the second parameter for the <b>register_setting()</b> function.  Otherwise WordPress does not know which setting it is suppose to update and it will fail to update.
</p>
<div style="background-color:#FAEBD7; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">Эта страница <a href="https://codex.wordpress.org/Category:Stubs" title="Category:Stubs">помечена</a> как незавершённая. Вы можете <a href="https://codex.wordpress.org/Codex:Contributing" title="Codex:Contributing">помочь</a> проекту, <b><a rel="nofollow" class="external text" href="https://codex.wordpress.org/index.php?title=%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8&amp;action=edit">дополнив её</a></b>.</div>


