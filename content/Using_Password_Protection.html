<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="https://codex.wordpress.org/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<strong class="selflink">English</strong> • 
<a href="https://codex.wordpress.org/ko:Using_Password_Protection" title="ko:Using Password Protection">한국어</a> • 
 <small>(<a href="https://codex.wordpress.org/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Post_Visibility_Settings"><span class="tocnumber">1</span> <span class="toctext">Post Visibility Settings</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Finding_or_Changing_a_Password"><span class="tocnumber">2</span> <span class="toctext">Finding or Changing a Password</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Password_Protected_Posts"><span class="tocnumber">3</span> <span class="toctext">Password Protected Posts</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Password_Protecting_Many_Posts_and_Pages"><span class="tocnumber">3.1</span> <span class="toctext">Password Protecting Many Posts and Pages</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#Protect_Custom_Fields"><span class="tocnumber">4</span> <span class="toctext">Protect Custom Fields</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Customize_the_Protected_Text"><span class="tocnumber">5</span> <span class="toctext">Customize the Protected Text</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Password_Form_Text"><span class="tocnumber">5.1</span> <span class="toctext">Password Form Text</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#Password_Size_Limitation"><span class="tocnumber">5.1.1</span> <span class="toctext">Password Size Limitation</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9"><a href="#Protected_Excerpt_Text"><span class="tocnumber">5.2</span> <span class="toctext">Protected Excerpt Text</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Add_the_Password_Form_to_the_Excerpt"><span class="tocnumber">5.3</span> <span class="toctext">Add the Password Form to the Excerpt</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#Hiding_Password_Protected_Posts"><span class="tocnumber">6</span> <span class="toctext">Hiding Password Protected Posts</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#Changing_the_cookie_lifetime"><span class="tocnumber">7</span> <span class="toctext">Changing the cookie lifetime</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Post_Visibility_Settings">Post Visibility Settings</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Password_Protection&amp;action=edit&amp;section=1" title="Edit section: Post Visibility Settings">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Once you publish a WordPress post (or Page), it is visible to the public (by default). In WordPress terms, this means a post with a <i>Published</i> status has a default visibility of <i>Public</i>, based on the settings in the <a href="https://codex.wordpress.org/Writing_Posts#Descriptions_of_Post_Fields" title="Writing Posts">Publish box</a> of a <a href="https://codex.wordpress.org/Administration_Panels#Posts_-_Make_some_content" title="Administration Panels" class="mw-redirect">Edit Post Screen</a>.
</p><p>WordPress also offers two less public options for your post's <a href="https://codex.wordpress.org/Content_Visibility" title="Content Visibility">Content Visibility</a>. Clicking the "Edit" link next to <b>Visibility: Public</b> reveals three radio buttons:
</p>
<ul><li> <i>Public</i> is selected by default.</li></ul>
<ul><li> Checking <i>Password protected</i> reveals a text field for entering a password, that will be required to view that post. <b>The password is limited to 20 characters.</b></li></ul>
<ul><li> Checking <i>Private</i> makes your post visible only to your site's Users with the role of <a href="https://codex.wordpress.org/Roles_and_Capabilities" title="Roles and Capabilities">Administrator or Editor</a>.<div class="thumb tright"><div class="thumbinner" style="width:297px;"><a href="https://codex.wordpress.org/File:protected_edit.png" class="image"><img alt="" src="/images/6/61/protected_edit.png" width="295" height="366" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="https://codex.wordpress.org/File:protected_edit.png" class="internal" title="Enlarge"></a></div>Visibility Settings</div></div></div></li></ul>
<p>When you're done editing the post's visibility, click the "OK" button. You should now see your post's new setting, e.g., <b>Visibility: Password Protected.</b> Remember: a setting change does not take effect until you click the "Publish" button (or "Update" if the post is already published.)
</p>
<h2><span class="mw-headline" id="Finding_or_Changing_a_Password">Finding or Changing a Password</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Password_Protection&amp;action=edit&amp;section=2" title="Edit section: Finding or Changing a Password">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Only an Administrator, Editor, or the post's Author can change a post's password or visibility setting. To do so, use the "Visibility: Edit" link again. These settings are also available using the post's <a href="https://codex.wordpress.org/Posts_Screen#Quick_Edit" title="Posts Screen">Quick Edit</a> link in the All Posts Screen.
</p><p>The <b>Visibility</b> "Edit" link (or "Quick Edit") is also a good way to reveal a forgotten post password.
</p>
<h2><span class="mw-headline" id="Password_Protected_Posts">Password Protected Posts</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Password_Protection&amp;action=edit&amp;section=3" title="Edit section: Password Protected Posts">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="thumb tright"><div class="thumbinner" style="width:294px;"><a href="https://codex.wordpress.org/File:protected_password.png" class="image"><img alt="" src="/images/2/22/protected_password.png" width="292" height="253" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="https://codex.wordpress.org/File:protected_password.png" class="internal" title="Enlarge"></a></div>Visibility: Protected</div></div></div>WordPress displays a password-protected post differently. It makes these changes to the post's:
<ul><li> <b>Title–</b> Adds the text "Protected: " before the post Title. </li>
<li> <b>Excerpt–</b> Instead of the post Excerpt, prints this text: "There is no excerpt because this is a protected post." </li>
<li> <b>Content–</b> Instead of the post Content, prints a password form with this text: "This post is password protected. To view it please enter your password below:"</li></ul>
<p>So, a password-protected post with a title of "My Post" would display like this:
<a href="https://codex.wordpress.org/File:protected_content.png" class="image" title="Password-protected Content"><img alt="Password-protected Content" src="/images/f/f2/protected_content.png" width="549" height="272" /></a>
</p>
<h3><span class="mw-headline" id="Password_Protecting_Many_Posts_and_Pages">Password Protecting Many Posts and Pages</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Password_Protection&amp;action=edit&amp;section=4" title="Edit section: Password Protecting Many Posts and Pages">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>WordPress stores this password in a browser cookie so readers don't have to re-enter passwords if they visit the same page multiple times. Furthermore, if multiple posts use the same password, the reader will only have to enter the password once to access every post (see caveat below).
</p><p>WordPress will only track one password at a time. Therefore, if two posts use two different passwords, entering the password for post A, then entering the password for post B means that revisiting post A (or any post which shares its password) will require the user to re-enter the password for post A.
</p>
<h2><span class="mw-headline" id="Protect_Custom_Fields">Protect Custom Fields</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Password_Protection&amp;action=edit&amp;section=5" title="Edit section: Protect Custom Fields">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>WordPress does not print a password-protected post's Content or Excerpt until the correct password is entered. But a post's <a href="https://codex.wordpress.org/Custom_Fields" title="Custom Fields">Custom Field(s)</a> data is not protected, and can still show. To stop CFs from printing, wrap your <tt><a href="https://codex.wordpress.org/Function_Reference/get_post_meta" title="Function Reference/get post meta">get_post_meta</a></tt> calls (e.g., in <tt>single.php</tt> or <tt>page.php</tt>) with a conditional statement using: <tt><a href="https://codex.wordpress.org/Function_Reference/post_password_required" title="Function Reference/post password required">post_password_required</a></tt>. This one WordPress function checks both whether your post requires a password and whether the correct password has been provided: 
</p>
<pre>
&lt;?php
if (&#160;! post_password_required() ) {
    // Code to fetch and print CFs, such as:
    $key_1_value_1 = get_post_meta( $post-&gt;ID, 'key_1', true );
        echo $key_1_value_1;
}
?&gt;
</pre>
<p>The <tt>post_password_required</tt> function within in an <tt>if</tt> statement is also handy for other customizations, such as preventing password-protected posts from displaying in a list.
</p>
<h2><span class="mw-headline" id="Customize_the_Protected_Text">Customize the Protected Text</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Password_Protection&amp;action=edit&amp;section=6" title="Edit section: Customize the Protected Text">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>With <a href="https://codex.wordpress.org/Plugin_API/Filter_Reference" title="Plugin API/Filter Reference">WordPress Filters</a> you can: change the default text in the password form, change the default text for the password-protected post Excerpt, and insert the password form into the post Excerpt. To do so, add the following code to your custom plugin file.
</p>
<h3><span class="mw-headline" id="Password_Form_Text">Password Form Text</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Password_Protection&amp;action=edit&amp;section=7" title="Edit section: Password Form Text">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The password form displays this default message: "This post is password protected. To view it please enter your password below:"
The following code will return the form with different text and different html structure &#8212; in this example the custom message is: "To view this protected post, enter the password below:" 
</p>
<pre>
&lt;?php
function my_password_form() {
    global $post;
    $label = 'pwbox-'.( empty( $post-&gt;ID )&#160;? rand()&#160;: $post-&gt;ID );
    $o = '&lt;form action="' . esc_url( site_url( 'wp-login.php?action=postpass', 'login_post' ) ) . '" method="post"&gt;
    ' . __( "To view this protected post, enter the password below:" ) . '
    &lt;label for="' . $label . '"&gt;' . __( "Password:" ) . ' &lt;/label&gt;&lt;input name="post_password" id="' . $label . '" type="password" size="20" maxlength="20" /&gt;&lt;input type="submit" name="Submit" value="' . esc_attr__( "Submit" ) . '" /&gt;
    &lt;/form&gt;
    ';
    return $o;
}
add_filter( 'the_password_form', 'my_password_form' );
?&gt;
</pre>
<p>Please note: the <tt>my_password_form</tt> function must return a value: don't use print or echo.
</p>
<h4><span class="mw-headline" id="Password_Size_Limitation">Password Size Limitation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Password_Protection&amp;action=edit&amp;section=8" title="Edit section: Password Size Limitation">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Make sure to set the <tt>maxlength</tt> parameter to a value of 20 when replacing the password protection form as WordPress will only save the first 20 characters due to database constraints.
</p>
<h3><span class="mw-headline" id="Protected_Excerpt_Text">Protected Excerpt Text</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Password_Protection&amp;action=edit&amp;section=9" title="Edit section: Protected Excerpt Text">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The default Excerpt of a password-protected post is: "There is no excerpt because this is a protected post." This code will replace that text with your own &#8212; HTML allowed:
</p>
<pre>
&lt;?php
function my_excerpt_protected( $excerpt ) {
    if ( post_password_required() )
        $excerpt = '&lt;em&gt;[This is password-protected.]&lt;/em&gt;';
    return $excerpt;
}
add_filter( 'the_excerpt', 'my_excerpt_protected' );
?&gt;
</pre>
<p>Replace "<tt>&lt;em&gt;[This is password-protected.]&lt;/em&gt;</tt>" with your custom password-protected Excerpt message.
</p>
<h3><span class="mw-headline" id="Add_the_Password_Form_to_the_Excerpt">Add the Password Form to the Excerpt</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Password_Protection&amp;action=edit&amp;section=10" title="Edit section: Add the Password Form to the Excerpt">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Another option for your protected Excerpts is to print out the password form instead of the Excerpt message. That way people enter the password right from an index or archive page. Then, when they click the Title link, they'll see the Content. With the <tt>get_the_password_form</tt> function, you can make the password form be the Excerpt for a password-protected post:
</p>
<pre>
&lt;?php
function my_excerpt_password_form( $excerpt ) {
    if ( post_password_required() )
        $excerpt = get_the_password_form();
    return $excerpt;
}
add_filter( 'the_excerpt', 'my_excerpt_password_form' );
?&gt;
</pre>
<p>This will get the default Wordpress password form and text or <a href="#Password_Form_Text">any customizations</a> you've made. For a better understanding of how <tt>post_password_required()</tt> and <tt>get_the_password_form()</tt> work, read their function definitions in <tt><code><a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/browser/tags/5.0.3/src/wp-includes/post-template.php#L0">wp-includes/post-template.php</a></code></tt>.
</p><p>In this same WordPress core file you'll also find the <tt>the_excerpt</tt> and <tt>the_password_form</tt> filters, and the functions <tt><a href="https://codex.wordpress.org/Function_Reference/get_the_excerpt" title="Function Reference/get the excerpt">get_the_excerpt()</a></tt>, <tt><a href="https://codex.wordpress.org/Function_Reference/get_the_title" title="Function Reference/get the title">get_the_title()</a></tt>,  and <tt><a href="https://codex.wordpress.org/Function_Reference/get_the_content" title="Function Reference/get the content">get_the_content()</a></tt>. These functions control how a post's title, excerpt and content display, depending on its visibility setting.
</p>
<h2><span class="mw-headline" id="Hiding_Password_Protected_Posts">Hiding Password Protected Posts</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Password_Protection&amp;action=edit&amp;section=11" title="Edit section: Hiding Password Protected Posts">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Sometimes, you don't want your password protected posts to show up on other places around your site, like on the home page or archive pages. To effectively hide them from these pages without affecting your pagination, place the following code in your custom plugin file:
</p>
<pre>
&lt;?php

// Filter to hide protected posts
function exclude_protected($where) {
	global $wpdb;
	return $where .= " AND {$wpdb-&gt;posts}.post_password = '' ";
}

// Decide where to display them
function exclude_protected_action($query) {
	if(&#160;!is_single() &amp;&amp;&#160;!is_page() &amp;&amp;&#160;!is_admin() ) {
		add_filter( 'posts_where', 'exclude_protected' );
	}
}

// Action to queue the filter at the right time
add_action('pre_get_posts', 'exclude_protected_action');

?&gt;
</pre>
<p>This code works in two parts: the first part effectively removes any password protected posts directly from any SQL query that WordPress is running, using the <a href="https://codex.wordpress.org/Plugin_API/Filter_Reference/posts_where" title="Plugin API/Filter Reference/posts where">posts_where filter</a>. The second part adds this filter to all pages except single posts, pages, and admin pages.
</p><p>For more information on why pre_get_posts is the right action for this function, see the <a href="https://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts" title="Plugin API/Action Reference/pre get posts">pre_get_posts action reference</a>.
</p>
<h2><span class="mw-headline" id="Changing_the_cookie_lifetime">Changing the cookie lifetime</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/index.php?title=Using_Password_Protection&amp;action=edit&amp;section=12" title="Edit section: Changing the cookie lifetime">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>See <a rel="nofollow" class="external free" href="https://developer.wordpress.org/reference/hooks/post_password_expires/">https://developer.wordpress.org/reference/hooks/post_password_expires/</a>
</p>
<!-- 
NewPP limit report
Cached time: 20190211004142
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.024 seconds
Real time usage: 0.030 seconds
Preprocessor visited node count: 122/1000000
Preprocessor generated node count: 347/1000000
Post‐expand include size: 618/2097152 bytes
Template argument size: 200/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    5.906      1 - -total
 56.20%    3.319      1 - Template:Languages
 36.27%    2.142      1 - Template:Trac
 17.22%    1.017      1 - Template:en
 16.83%    0.994      1 - Template:ko
 13.75%    0.812      1 - Template:CurrentVersion
-->
